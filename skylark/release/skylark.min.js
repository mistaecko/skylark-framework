/*! skylark 2013-11-25 */
!function() {
    for (var lastTime = 0, vendors = [ "ms", "moz", "webkit", "o" ], x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) window.requestAnimationFrame = window[vendors[x] + "RequestAnimationFrame"], 
    window.cancelAnimationFrame = window[vendors[x] + "CancelAnimationFrame"] || window[vendors[x] + "CancelRequestAnimationFrame"];
    window.requestAnimationFrame || (window.requestAnimationFrame = function(callback) {
        var currTime = new Date().getTime(), timeToCall = Math.max(0, 16 - (currTime - lastTime)), id = window.setTimeout(function() {
            callback(currTime + timeToCall);
        }, timeToCall);
        return lastTime = currTime + timeToCall, id;
    }), window.cancelAnimationFrame || (window.cancelAnimationFrame = function(id) {
        clearTimeout(id);
    });
}();

var NativeImage = Image, skylark;

!function(skylark) {
    var Matrix = function() {
        function Matrix(a, b, c, d, tx, ty) {
            "undefined" == typeof b && (b = 0), "undefined" == typeof c && (c = 0), "undefined" == typeof d && (d = 0), 
            "undefined" == typeof tx && (tx = 0), "undefined" == typeof ty && (ty = 0), "undefined" == typeof a && (a = 1, 
            b = 0, c = 0, d = 1, tx = 0, ty = 0), this.a = a, this.b = b, this.c = c, this.d = d, 
            this.tx = tx, this.ty = ty;
        }
        return Matrix.prototype.setTo = function(a, b, c, d, tx, ty) {
            this.a = a, this.b = b, this.c = c, this.d = d, this.tx = tx, this.ty = ty;
        }, Matrix.prototype.identity = function() {
            this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.tx = 0, this.ty = 0;
        }, Matrix.prototype.transformPoint = function(p) {
            var result = new skylark.Point(p.x * this.a + p.y * this.c + this.tx, p.x * this.b + p.y * this.d + this.ty);
            return result;
        }, Matrix.prototype.translate = function(x, y) {
            this.tx += x, this.ty += y;
        }, Matrix.prototype.rotate = function(angle) {
            var cos = Math.cos(angle), sin = Math.sin(angle), rotateMatrix = new Matrix(cos, sin, -sin, cos, 0, 0);
            this.concat(rotateMatrix);
        }, Matrix.prototype.scale = function(x, y) {
            var scaleMatrix = new Matrix(x, 0, 0, y, 0, 0);
            this.concat(scaleMatrix);
        }, Matrix.prototype.concat = function(m) {
            this.copyFrom(new Matrix(this.a * m.a + this.b * m.c, this.a * m.b + this.b * m.d, this.c * m.a + this.d * m.c, this.c * m.b + this.d * m.d, this.tx * m.a + this.ty * m.c + m.tx, this.tx * m.b + this.ty * m.d + m.ty));
        }, Matrix.prototype.invert = function() {
            var adbc = this.a * this.d - this.b * this.c;
            this.copyFrom(new Matrix(this.d / adbc, -this.b / adbc, -this.c / adbc, this.a / adbc, (this.c * this.ty - this.d * this.tx) / adbc, -((this.a * this.ty - this.b * this.tx) / adbc)));
        }, Matrix.prototype.clone = function() {
            var result = new Matrix(this.a, this.b, this.c, this.d, this.tx, this.ty);
            return result;
        }, Matrix.prototype.copyFrom = function(m) {
            this.a = m.a, this.b = m.b, this.c = m.c, this.d = m.d, this.tx = m.tx, this.ty = m.ty;
        }, Matrix;
    }();
    skylark.Matrix = Matrix;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var Point = function() {
        function Point(x, y) {
            "undefined" == typeof x && (x = 0), "undefined" == typeof y && (y = 0), this.x = x, 
            this.y = y;
        }
        return Point.prototype.add = function(p) {
            return new Point(this.x + p.x, this.y + p.y);
        }, Point.prototype.subtract = function(p) {
            return new Point(this.x - p.x, this.y - p.y);
        }, Point.prototype.dot = function(p) {
            return this.x * p.x + this.y * p.y;
        }, Point.prototype.cross = function(p) {
            return this.x * p.y - this.y * p.x;
        }, Point.prototype.clone = function() {
            return new Point(this.x, this.y);
        }, Point.prototype.setTo = function(x, y) {
            this.x = x, this.y = y;
        }, Object.defineProperty(Point.prototype, "length", {
            get: function() {
                var x = this.x, y = this.y;
                return Math.sqrt(x * x + y * y);
            },
            enumerable: !0,
            configurable: !0
        }), Point.distance = function(p1, p2) {
            return Math.sqrt((p2.x - p1.x) * (p2.x - p1.x) + (p2.y - p1.y) * (p2.y - p1.y));
        }, Point;
    }();
    skylark.Point = Point;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var Rectangle = function() {
        function Rectangle(x, y, width, height) {
            "undefined" == typeof x && (x = 0), "undefined" == typeof y && (y = 0), "undefined" == typeof width && (width = 0), 
            "undefined" == typeof height && (height = 0), this.setTo(x, y, width, height);
        }
        return Rectangle.prototype.setTo = function(x, y, width, height) {
            "undefined" == typeof x && (x = 0), "undefined" == typeof y && (y = 0), "undefined" == typeof width && (width = 0), 
            "undefined" == typeof height && (height = 0), this.x = x, this.y = y, this.width = width, 
            this.height = height;
        }, Object.defineProperty(Rectangle.prototype, "bottom", {
            get: function() {
                return this.y + this.height;
            },
            set: function(value) {
                null != value && (this.height = value - this.y);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Rectangle.prototype, "bottomright", {
            get: function() {
                return new skylark.Point(this.right, this.bottom);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Rectangle.prototype, "left", {
            set: function(newX) {
                null !== newX && "undefined" != typeof newX && (this.width += this.x - newX, this.x = newX);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Rectangle.prototype, "right", {
            get: function() {
                return this.x + this.width;
            },
            set: function(value) {
                null != value && (this.width = value - this.x);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Rectangle.prototype, "size", {
            get: function() {
                return new skylark.Point(this.width, this.height);
            },
            set: function() {
                throw new skylark.IllegalOperationError("Not yet implemented");
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Rectangle.prototype, "top", {
            set: function(newY) {
                null !== newY && "undefined" != typeof newY && (this.height += this.y - newY, this.y = newY);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Rectangle.prototype, "topLeft", {
            get: function() {
                return new skylark.Point(this.x, this.y);
            },
            enumerable: !0,
            configurable: !0
        }), Rectangle.prototype.clone = function() {
            return new Rectangle(this.x, this.y, this.width, this.height);
        }, Rectangle.prototype.contains = function(x, y) {
            var isInside = x >= this.x && y >= this.y && x <= this.right && y <= this.bottom;
            return isInside;
        }, Rectangle.prototype.containsPoint = function(point) {
            return this.contains(point.x, point.y);
        }, Rectangle.prototype.containsRect = function(rect) {
            var isInside = rect.x >= this.x && rect.y >= this.y && rect.right <= this.right && rect.bottom <= this.bottom;
            return isInside;
        }, Rectangle.prototype.equals = function(toCompare) {
            var isIdentical = toCompare.x === this.x && toCompare.y === this.y && toCompare.width === this.width && toCompare.height === this.height;
            return isIdentical;
        }, Rectangle.prototype.inflate = function(dx, dy) {
            this.x -= dx, this.y -= dy, this.width += 2 * dx, this.height += 2 * dy;
        }, Rectangle.prototype.inflatePoint = function(point) {
            this.inflate(point.x, point.y);
        }, Rectangle.prototype.inclusiveRangeContains = function(value, min, max) {
            var isInside = value >= min && max >= value;
            return isInside;
        }, Rectangle.prototype.intersectRange = function(aMin, aMax, bMin, bMax) {
            var maxMin = Math.max(aMin, bMin);
            if (!this.inclusiveRangeContains(maxMin, aMin, aMax) || !this.inclusiveRangeContains(maxMin, bMin, bMax)) return null;
            var minMax = Math.min(aMax, bMax);
            return this.inclusiveRangeContains(minMax, aMin, aMax) && this.inclusiveRangeContains(minMax, bMin, bMax) ? {
                min: maxMin,
                max: minMax
            } : null;
        }, Rectangle.prototype.intersection = function(toIntersect) {
            var xSpan = this.intersectRange(this.x, this.right, toIntersect.x, toIntersect.right);
            if (!xSpan) return null;
            var ySpan = this.intersectRange(this.y, this.bottom, toIntersect.y, toIntersect.bottom);
            if (!ySpan) return null;
            var result = new Rectangle(xSpan.min, ySpan.min, xSpan.max - xSpan.min, ySpan.max - ySpan.min);
            return result;
        }, Rectangle.prototype.intersects = function(toIntersect) {
            var intersection = this.intersection(toIntersect);
            return null !== intersection;
        }, Rectangle.prototype.isEmpty = function() {
            return this.width <= 0 || this.height <= 0;
        }, Rectangle.prototype.offset = function(dx, dy) {
            this.x += dx, this.y += dy;
        }, Rectangle.prototype.offsetPoint = function(point) {
            this.offset(point.x, point.y);
        }, Rectangle.prototype.setEmpty = function() {
            this.x = 0, this.y = 0, this.width = 0, this.height = 0;
        }, Rectangle.prototype.toString = function() {
            var result = "{";
            return result += '"x":' + this.x + ",", result += '"y":' + this.y + ",", result += '"width":' + this.width + ",", 
            result += '"height":' + this.height + "}";
        }, Rectangle.prototype.union = function(toUnion) {
            var minX = Math.min(toUnion.x, this.x), maxX = Math.max(toUnion.right, this.right), minY = Math.min(toUnion.y, this.y), maxY = Math.max(toUnion.bottom, this.bottom), result = new Rectangle(minX, minY, maxX - minX, maxY - minY);
            return result;
        }, Rectangle;
    }();
    skylark.Rectangle = Rectangle;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var Event = function() {
        function Event(type, bubbles, data) {
            "undefined" == typeof bubbles && (bubbles = !1), "undefined" == typeof data && (data = null), 
            this._type = type, this._bubbles = bubbles, this._data = data;
        }
        return Event.prototype.stopPropagation = function() {
            this._stopsPropagation = !0;
        }, Event.prototype.stopImmediatePropagation = function() {
            this._stopsPropagation = this._stopsImmediatePropagation = !0;
        }, Event.prototype.toString = function() {
            var name = skylark.ClassUtil.getQualifiedClassName(this).split("::").pop();
            return skylark.StringUtil.format('[{0} type="{1}" bubbles={2}]', name, this._type, this._bubbles);
        }, Object.defineProperty(Event.prototype, "bubbles", {
            get: function() {
                return this._bubbles;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Event.prototype, "target", {
            get: function() {
                return this._target;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Event.prototype, "currentTarget", {
            get: function() {
                return this._currentTarget;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Event.prototype, "type", {
            get: function() {
                return this._type;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Event.prototype, "data", {
            get: function() {
                return this._data;
            },
            enumerable: !0,
            configurable: !0
        }), Event.prototype.setTarget = function(value) {
            this._target = value;
        }, Event.prototype.setCurrentTarget = function(value) {
            this._currentTarget = value;
        }, Event.prototype.setData = function(value) {
            this._data = value;
        }, Object.defineProperty(Event.prototype, "stopsPropagation", {
            get: function() {
                return this._stopsPropagation;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Event.prototype, "stopsImmediatePropagation", {
            get: function() {
                return this._stopsImmediatePropagation;
            },
            enumerable: !0,
            configurable: !0
        }), Event.fromPool = function(type, bubbles, data) {
            return "undefined" == typeof bubbles && (bubbles = !1), "undefined" == typeof data && (data = null), 
            Event._eventPool.length ? Event._eventPool.pop().reset(type, bubbles, data) : new Event(type, bubbles, data);
        }, Event.toPool = function(event) {
            event._data = event._target = event._currentTarget = null, Event._eventPool.push(event);
        }, Event.prototype.reset = function(type, bubbles, data) {
            return "undefined" == typeof bubbles && (bubbles = !1), "undefined" == typeof data && (data = null), 
            this._type = type, this._bubbles = bubbles, this._data = data, this._target = this._currentTarget = null, 
            this._stopsPropagation = this._stopsImmediatePropagation = !1, this;
        }, Event.ADDED = "added", Event.ADDED_TO_STAGE = "addedToStage", Event.ENTER_FRAME = "enterFrame", 
        Event.REMOVED = "removed", Event.REMOVED_FROM_STAGE = "removedFromStage", Event.TRIGGERED = "triggered", 
        Event.FLATTEN = "flatten", Event.RESIZE = "resize", Event.COMPLETE = "complete", 
        Event.CONTEXT3D_CREATE = "context3DCreate", Event.ROOT_CREATED = "rootCreated", 
        Event.REMOVE_FROM_JUGGLER = "removeFromJuggler", Event.CHANGE = "change", Event.CANCEL = "cancel", 
        Event.SCROLL = "scroll", Event.OPEN = "open", Event.CLOSE = "close", Event.SELECT = "select", 
        Event._eventPool = [], Event;
    }();
    skylark.Event = Event;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var Touch = function() {
        function Touch(id, globalX, globalY, phase, target) {
            this.mID = id, this._globalX = this._previousGlobalX = globalX, this._globalY = this._previousGlobalY = globalY, 
            this._tapCount = 0, this._phase = phase, this._target = target, this._pressure = this._width = this._height = 1, 
            this._bubbleChain = [], this.updateBubbleChain();
        }
        return Touch.prototype.getLocation = function(space, resultPoint) {
            return "undefined" == typeof resultPoint && (resultPoint = null), null == resultPoint && (resultPoint = new skylark.Point()), 
            space.base.getTransformationMatrix(space, Touch._helperMatrix), skylark.MatrixUtil.transformCoords(Touch._helperMatrix, this._globalX, this._globalY, resultPoint);
        }, Touch.prototype.getPreviousLocation = function(space, resultPoint) {
            return "undefined" == typeof resultPoint && (resultPoint = null), null == resultPoint && (resultPoint = new skylark.Point()), 
            space.base.getTransformationMatrix(space, Touch._helperMatrix), skylark.MatrixUtil.transformCoords(Touch._helperMatrix, this._previousGlobalX, this._previousGlobalY, resultPoint);
        }, Touch.prototype.getMovement = function(space, resultPoint) {
            "undefined" == typeof resultPoint && (resultPoint = null), null == resultPoint && (resultPoint = new skylark.Point()), 
            this.getLocation(space, resultPoint);
            var x = resultPoint.x, y = resultPoint.y;
            return this.getPreviousLocation(space, resultPoint), resultPoint.setTo(x - resultPoint.x, y - resultPoint.y), 
            resultPoint;
        }, Touch.prototype.isTouching = function(target) {
            return -1 != this._bubbleChain.indexOf(target);
        }, Touch.prototype.toString = function() {
            return skylark.StringUtil.format("Touch {0}: globalX={1}, globalY={2}, phase={3}", this.mID, this._globalX, this._globalY, this._phase);
        }, Touch.prototype.clone = function() {
            var clone = new Touch(this.mID, this._globalX, this._globalY, this._phase, this._target);
            return clone._previousGlobalX = this._previousGlobalX, clone._previousGlobalY = this._previousGlobalY, 
            clone._tapCount = this._tapCount, clone._timestamp = this._timestamp, clone._pressure = this._pressure, 
            clone._width = this._width, clone._height = this._height, clone;
        }, Touch.prototype.updateBubbleChain = function() {
            if (this._target) {
                var length = 1, element = this._target;
                for (this._bubbleChain.length = 1, this._bubbleChain[0] = element; null != (element = element.parent); ) this._bubbleChain[length++] = element;
            } else this._bubbleChain.length = 0;
        }, Object.defineProperty(Touch.prototype, "id", {
            get: function() {
                return this.mID;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Touch.prototype, "globalX", {
            get: function() {
                return this._globalX;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Touch.prototype, "globalY", {
            get: function() {
                return this._globalY;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Touch.prototype, "previousGlobalX", {
            get: function() {
                return this._previousGlobalX;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Touch.prototype, "previousGlobalY", {
            get: function() {
                return this._previousGlobalY;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Touch.prototype, "tapCount", {
            get: function() {
                return this._tapCount;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Touch.prototype, "phase", {
            get: function() {
                return this._phase;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Touch.prototype, "target", {
            get: function() {
                return this._target;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Touch.prototype, "timestamp", {
            get: function() {
                return this._timestamp;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Touch.prototype, "pressure", {
            get: function() {
                return this._pressure;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Touch.prototype, "width", {
            get: function() {
                return this._width;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Touch.prototype, "height", {
            get: function() {
                return this._height;
            },
            enumerable: !0,
            configurable: !0
        }), Touch.prototype.dispatchEvent = function(event) {
            this._target && event.dispatch(this._bubbleChain);
        }, Object.defineProperty(Touch.prototype, "bubbleChain", {
            get: function() {
                return this._bubbleChain.concat();
            },
            enumerable: !0,
            configurable: !0
        }), Touch.prototype.setTarget = function(value) {
            this._target = value, this.updateBubbleChain();
        }, Touch.prototype.setPosition = function(globalX, globalY) {
            this._previousGlobalX = this._globalX, this._previousGlobalY = this._globalY, this._globalX = globalX, 
            this._globalY = globalY;
        }, Touch.prototype.setSize = function(width, height) {
            this._width = width, this._height = height;
        }, Touch.prototype.setPhase = function(value) {
            this._phase = value;
        }, Touch.prototype.setTapCount = function(value) {
            this._tapCount = value;
        }, Touch.prototype.setTimestamp = function(value) {
            this._timestamp = value;
        }, Touch.prototype.setPressure = function(value) {
            this._pressure = value;
        }, Touch._helperMatrix = new skylark.Matrix(), Touch;
    }();
    skylark.Touch = Touch;
}(skylark || (skylark = {}));

var __extends = this.__extends || function(d, b) {
    function __() {
        this.constructor = d;
    }
    for (var p in b) b.hasOwnProperty(p) && (d[p] = b[p]);
    __.prototype = b.prototype, d.prototype = new __();
}, skylark;

!function(skylark) {
    var TouchEvent = function(_super) {
        function TouchEvent(type, touches, shiftKey, ctrlKey, bubbles) {
            "undefined" == typeof shiftKey && (shiftKey = !1), "undefined" == typeof ctrlKey && (ctrlKey = !1), 
            "undefined" == typeof bubbles && (bubbles = !0), _super.call(this, type, bubbles, touches), 
            this._shiftKey = shiftKey, this._ctrlKey = ctrlKey, this._timestamp = -1, this._visitedObjects = [];
            for (var numTouches = touches.length, i = 0; numTouches > i; ++i) touches[i].timestamp > this._timestamp && (this._timestamp = touches[i].timestamp);
        }
        return __extends(TouchEvent, _super), TouchEvent.prototype.getTouches = function(target, phase, result) {
            "undefined" == typeof phase && (phase = null), "undefined" == typeof result && (result = null), 
            null == result && (result = []);
            for (var allTouches = this.data, numTouches = allTouches.length, i = 0; numTouches > i; ++i) {
                var touch = allTouches[i], correctTarget = touch.isTouching(target), correctPhase = null == phase || phase == touch.phase;
                correctTarget && correctPhase && result.push(touch);
            }
            return result;
        }, TouchEvent.prototype.getTouch = function(target, phase) {
            if ("undefined" == typeof phase && (phase = null), this.getTouches(target, phase, TouchEvent._touches), 
            TouchEvent._touches.length) {
                var touch = TouchEvent._touches[0];
                return TouchEvent._touches.length = 0, touch;
            }
            return null;
        }, TouchEvent.prototype.interactsWith = function(target) {
            if (null == this.getTouch(target)) return !1;
            for (var touches = this.getTouches(target), i = touches.length - 1; i >= 0; --i) if (touches[i].phase != skylark.TouchPhase.ENDED) return !0;
            return !1;
        }, TouchEvent.prototype.dispatch = function(chain) {
            if (chain && chain.length) {
                var chainLength = this.bubbles ? chain.length : 1, previousTarget = this.target;
                this.setTarget(chain[0]);
                for (var i = 0; chainLength > i; ++i) {
                    var chainElement = chain[i];
                    if (-1 == this._visitedObjects.indexOf(chainElement)) {
                        var stopPropagation = chainElement.invokeEvent(this);
                        if (this._visitedObjects.push(chainElement), stopPropagation) break;
                    }
                }
                this.setTarget(previousTarget);
            }
        }, Object.defineProperty(TouchEvent.prototype, "timestamp", {
            get: function() {
                return this._timestamp;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TouchEvent.prototype, "touches", {
            get: function() {
                return this.data.concat();
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TouchEvent.prototype, "shiftKey", {
            get: function() {
                return this._shiftKey;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TouchEvent.prototype, "ctrlKey", {
            get: function() {
                return this._ctrlKey;
            },
            enumerable: !0,
            configurable: !0
        }), TouchEvent.TOUCH = "touch", TouchEvent._touches = [], TouchEvent;
    }(skylark.Event);
    skylark.TouchEvent = TouchEvent;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var TouchPhase = function() {
        function TouchPhase() {
            throw new skylark.AbstractClassError();
        }
        return TouchPhase.HOVER = "hover", TouchPhase.BEGAN = "began", TouchPhase.MOVED = "moved", 
        TouchPhase.STATIONARY = "stationary", TouchPhase.ENDED = "ended", TouchPhase;
    }();
    skylark.TouchPhase = TouchPhase;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var KeyboardEvent = function(_super) {
        function KeyboardEvent(type, charCode, keyCode, keyLocation, ctrlKey, altKey, shiftKey) {
            "undefined" == typeof charCode && (charCode = 0), "undefined" == typeof keyCode && (keyCode = 0), 
            "undefined" == typeof keyLocation && (keyLocation = 0), "undefined" == typeof ctrlKey && (ctrlKey = !1), 
            "undefined" == typeof altKey && (altKey = !1), "undefined" == typeof shiftKey && (shiftKey = !1), 
            _super.call(this, type, !1, keyCode), this._charCode = charCode, this._keyCode = keyCode, 
            this._keyLocation = keyLocation, this._ctrlKey = ctrlKey, this._altKey = altKey, 
            this._shiftKey = shiftKey;
        }
        return __extends(KeyboardEvent, _super), Object.defineProperty(KeyboardEvent.prototype, "charCode", {
            get: function() {
                return this._charCode;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(KeyboardEvent.prototype, "keyCode", {
            get: function() {
                return this._keyCode;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(KeyboardEvent.prototype, "keyLocation", {
            get: function() {
                return this._keyLocation;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(KeyboardEvent.prototype, "altKey", {
            get: function() {
                return this._altKey;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(KeyboardEvent.prototype, "ctrlKey", {
            get: function() {
                return this._ctrlKey;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(KeyboardEvent.prototype, "shiftKey", {
            get: function() {
                return this._shiftKey;
            },
            enumerable: !0,
            configurable: !0
        }), KeyboardEvent.KEY_UP = "keyup", KeyboardEvent.KEY_DOWN = "keydown", KeyboardEvent;
    }(skylark.Event);
    skylark.KeyboardEvent = KeyboardEvent;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var EnterFrameEvent = function(_super) {
        function EnterFrameEvent(type, passedTime, bubbles) {
            "undefined" == typeof bubbles && (bubbles = !1), _super.call(this, type, bubbles, passedTime);
        }
        return __extends(EnterFrameEvent, _super), Object.defineProperty(EnterFrameEvent.prototype, "passedTime", {
            get: function() {
                return this.data;
            },
            enumerable: !0,
            configurable: !0
        }), EnterFrameEvent.ENTER_FRAME = "enterFrame", EnterFrameEvent;
    }(skylark.Event);
    skylark.EnterFrameEvent = EnterFrameEvent;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var EventListener = function() {
        function EventListener(fn, context) {
            this.context = context, this.fn = fn;
        }
        return EventListener;
    }();
    skylark.EventListener = EventListener;
    var EventDispatcher = function() {
        function EventDispatcher() {}
        return EventDispatcher.prototype.addEventListener = function(type, listener, This) {
            "undefined" == typeof This && (This = null), null == this._eventListeners && (this._eventListeners = {});
            var listeners = this._eventListeners[type], entry = new EventListener(listener, This || this);
            null == listeners ? this._eventListeners[type] = [ entry ] : -1 === this.findEventListener(type, listener, This || this) && listeners.push(entry);
        }, EventDispatcher.prototype.removeEventListener = function(type, listener, This) {
            if ("undefined" == typeof This && (This = null), this._eventListeners) {
                var listeners = this._eventListeners[type];
                if (listeners) {
                    for (var numListeners = listeners.length, remainingListeners = [], i = 0; numListeners > i; ++i) {
                        var eventListener = listeners[i];
                        (eventListener.context !== (This || this) || eventListener.fn !== listener) && remainingListeners.push(eventListener);
                    }
                    this._eventListeners[type] = remainingListeners;
                }
            }
        }, EventDispatcher.prototype.findEventListener = function(type, listener, This) {
            "undefined" == typeof This && (This = null);
            var chain = this._eventListeners[type];
            if (null != chain) for (var i = 0; i < chain.length; i++) {
                var l = chain[i];
                if (l.context === This && l.fn === listener) return i;
            }
            return -1;
        }, EventDispatcher.prototype.removeEventListeners = function(type) {
            "undefined" == typeof type && (type = null), type && this._eventListeners ? delete this._eventListeners[type] : this._eventListeners = null;
        }, EventDispatcher.prototype.dispatchEvent = function(event) {
            var bubbles = event.bubbles;
            if (bubbles || null != this._eventListeners && event.type in this._eventListeners) {
                var previousTarget = event.target;
                event.setTarget(this), bubbles && this instanceof skylark.DisplayObject ? this.bubbleEvent(event) : this.invokeEvent(event), 
                previousTarget && event.setTarget(previousTarget);
            }
        }, EventDispatcher.prototype.invokeEvent = function(event) {
            var listeners = this._eventListeners ? this._eventListeners[event.type] : null, numListeners = null == listeners ? 0 : listeners.length;
            if (numListeners) {
                event.setCurrentTarget(this);
                for (var i = 0; numListeners > i; ++i) {
                    var eventListener = listeners[i], listener = eventListener.fn, context = eventListener.context;
                    if (listener.apply(context, [ event, event.data ]), event.stopsImmediatePropagation) return !0;
                }
                return event.stopsPropagation;
            }
            return !1;
        }, EventDispatcher.prototype.bubbleEvent = function(event) {
            var chain, element = this, length = 1;
            for (EventDispatcher._bubbleChains.length > 0 ? (chain = EventDispatcher._bubbleChains.pop(), 
            chain[0] = element) : chain = [ element ]; null != (element = element.parent); ) chain[length++] = element;
            for (var i = 0; length > i; ++i) {
                var stopPropagation = chain[i].invokeEvent(event);
                if (stopPropagation) break;
            }
            chain.length = 0, EventDispatcher._bubbleChains.push(chain);
        }, EventDispatcher.prototype.dispatchEventWith = function(type, bubbles, data) {
            if ("undefined" == typeof bubbles && (bubbles = !1), "undefined" == typeof data && (data = null), 
            bubbles || this.hasEventListener(type)) {
                var event = skylark.Event.fromPool(type, bubbles, data);
                this.dispatchEvent(event), skylark.Event.toPool(event);
            }
        }, EventDispatcher.prototype.hasEventListener = function(type) {
            var listeners = this._eventListeners ? this._eventListeners[type] : null;
            return listeners ? 0 != listeners.length : !1;
        }, EventDispatcher._bubbleChains = [], EventDispatcher;
    }();
    skylark.EventDispatcher = EventDispatcher;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var DisplayObject = function(_super) {
        function DisplayObject() {
            _super.call(this), this.mX = this.mY = this._pivotX = this._pivotY = this._rotation = this._skewX = this._skewY = 0, 
            this._scaleX = this._scaleY = this._alpha = 1, this._visible = this._touchable = !0, 
            this._blendMode = skylark.BlendMode.AUTO, this._transformationMatrix = new skylark.Matrix(), 
            this._orientationChanged = this._useHandCursor = !1;
        }
        return __extends(DisplayObject, _super), DisplayObject.prototype.dispose = function() {
            this.removeEventListeners(null);
        }, DisplayObject.prototype.removeFromParent = function(dispose) {
            "undefined" == typeof dispose && (dispose = !1), this._parent && this._parent.removeChild(this, dispose);
        }, DisplayObject.prototype.getTransformationMatrix = function(targetSpace, resultMatrix) {
            "undefined" == typeof resultMatrix && (resultMatrix = null);
            var commonParent, currentObject;
            if (resultMatrix ? resultMatrix.identity() : resultMatrix = new skylark.Matrix(), 
            targetSpace === this) return resultMatrix;
            if (targetSpace === this._parent || null == targetSpace && null == this._parent) return resultMatrix.copyFrom(this.transformationMatrix), 
            resultMatrix;
            if (null == targetSpace || targetSpace === this.base) {
                for (currentObject = this; currentObject != targetSpace; ) resultMatrix.concat(currentObject.transformationMatrix), 
                currentObject = currentObject._parent;
                return resultMatrix;
            }
            if (targetSpace._parent === this) return targetSpace.getTransformationMatrix(this, resultMatrix), 
            resultMatrix.invert(), resultMatrix;
            for (commonParent = null, currentObject = this; currentObject; ) DisplayObject._ancestors.push(currentObject), 
            currentObject = currentObject._parent;
            for (currentObject = targetSpace; currentObject && -1 === DisplayObject._ancestors.indexOf(currentObject); ) currentObject = currentObject._parent;
            if (DisplayObject._ancestors.length = 0, !currentObject) throw new skylark.ArgumentError("Object not connected to target");
            for (commonParent = currentObject, currentObject = this; currentObject != commonParent; ) resultMatrix.concat(currentObject.transformationMatrix), 
            currentObject = currentObject._parent;
            if (commonParent === targetSpace) return resultMatrix;
            for (DisplayObject._helperMatrix.identity(), currentObject = targetSpace; currentObject != commonParent; ) DisplayObject._helperMatrix.concat(currentObject.transformationMatrix), 
            currentObject = currentObject._parent;
            return DisplayObject._helperMatrix.invert(), resultMatrix.concat(DisplayObject._helperMatrix), 
            resultMatrix;
        }, DisplayObject.prototype.getBounds = function(targetSpace, resultRect) {
            throw "undefined" == typeof resultRect && (resultRect = null), new skylark.AbstractMethodError("Method needs to be implemented in subclass");
        }, DisplayObject.prototype.hitTest = function(localPoint, forTouch) {
            return "undefined" == typeof forTouch && (forTouch = !1), !forTouch || this._visible && this._touchable ? this.getBounds(this, DisplayObject._helperRect).containsPoint(localPoint) ? this : null : null;
        }, DisplayObject.prototype.localToGlobal = function(localPoint, resultPoint) {
            return "undefined" == typeof resultPoint && (resultPoint = null), this.getTransformationMatrix(this.base, DisplayObject._helperMatrix), 
            skylark.MatrixUtil.transformCoords(DisplayObject._helperMatrix, localPoint.x, localPoint.y, resultPoint);
        }, DisplayObject.prototype.globalToLocal = function(globalPoint, resultPoint) {
            return "undefined" == typeof resultPoint && (resultPoint = null), this.getTransformationMatrix(this.base, DisplayObject._helperMatrix), 
            DisplayObject._helperMatrix.invert(), skylark.MatrixUtil.transformCoords(DisplayObject._helperMatrix, globalPoint.x, globalPoint.y, resultPoint);
        }, DisplayObject.prototype.render = function() {
            throw new skylark.AbstractMethodError("Method needs to be implemented in subclass");
        }, Object.defineProperty(DisplayObject.prototype, "hasVisibleArea", {
            get: function() {
                return 0 != this._alpha && this._visible && 0 != this._scaleX && 0 != this._scaleY;
            },
            enumerable: !0,
            configurable: !0
        }), DisplayObject.prototype.setParent = function(value) {
            for (var ancestor = value; ancestor != this && null != ancestor; ) ancestor = ancestor._parent;
            if (ancestor === this) throw new skylark.ArgumentError("An object cannot be <a>added child to itself or one of its children (or children's children, etc.)");
            this._parent = value;
        }, DisplayObject.isEquivalent = function(a, b, epsilon) {
            return "undefined" == typeof epsilon && (epsilon = 1e-4), b > a - epsilon && a + epsilon > b;
        }, DisplayObject.normalizeAngle = function(angle) {
            for (;angle < -Math.PI; ) angle += 2 * Math.PI;
            for (;angle > Math.PI; ) angle -= 2 * Math.PI;
            return angle;
        }, Object.defineProperty(DisplayObject.prototype, "transformationMatrix", {
            get: function() {
                return this._orientationChanged && (this._orientationChanged = !1, this._transformationMatrix.identity(), 
                (1 != this._scaleX || 1 != this._scaleY) && this._transformationMatrix.scale(this._scaleX, this._scaleY), 
                (0 != this._skewX || 0 != this._skewY) && skylark.MatrixUtil.skew(this._transformationMatrix, this._skewX, this._skewY), 
                0 != this._rotation && this._transformationMatrix.rotate(this._rotation), (0 != this.mX || 0 != this.mY) && this._transformationMatrix.translate(this.mX, this.mY), 
                (0 != this._pivotX || 0 != this._pivotY) && (this._transformationMatrix.tx = this.mX - this._transformationMatrix.a * this._pivotX - this._transformationMatrix.c * this._pivotY, 
                this._transformationMatrix.ty = this.mY - this._transformationMatrix.b * this._pivotX - this._transformationMatrix.d * this._pivotY)), 
                this._transformationMatrix;
            },
            set: function(matrix) {
                this._orientationChanged = !1, this._transformationMatrix.copyFrom(matrix), this.mX = matrix.tx, 
                this.mY = matrix.ty, this._scaleX = Math.sqrt(matrix.a * matrix.a + matrix.b * matrix.b), 
                this._skewY = Math.acos(matrix.a / this._scaleX), DisplayObject.isEquivalent(matrix.b, this._scaleX * Math.sin(this._skewY)) || (this._scaleX *= -1, 
                this._skewY = Math.acos(matrix.a / this._scaleX)), this._scaleY = Math.sqrt(matrix.c * matrix.c + matrix.d * matrix.d), 
                this._skewX = Math.acos(matrix.d / this._scaleY), DisplayObject.isEquivalent(matrix.c, -this._scaleY * Math.sin(this._skewX)) || (this._scaleY *= -1, 
                this._skewX = Math.acos(matrix.d / this._scaleY)), DisplayObject.isEquivalent(this._skewX, this._skewY) ? (this._rotation = this._skewX, 
                this._skewX = this._skewY = 0) : this._rotation = 0;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "useHandCursor", {
            get: function() {
                return this._useHandCursor;
            },
            set: function(value) {
                value !== this._useHandCursor && (this._useHandCursor = value);
            },
            enumerable: !0,
            configurable: !0
        }), DisplayObject.prototype.onTouch = function() {}, Object.defineProperty(DisplayObject.prototype, "bounds", {
            get: function() {
                return this.getBounds(this._parent);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "width", {
            get: function() {
                return this.getBounds(this._parent, DisplayObject._helperRect).width;
            },
            set: function(value) {
                this.scaleX = 1;
                var actualWidth = this.width;
                0 != actualWidth && (this.scaleX = value / actualWidth);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "height", {
            get: function() {
                return this.getBounds(this._parent, DisplayObject._helperRect).height;
            },
            set: function(value) {
                this.scaleY = 1;
                var actualHeight = this.height;
                0 != actualHeight && (this.scaleY = value / actualHeight);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "x", {
            get: function() {
                return this.mX;
            },
            set: function(value) {
                this.mX != value && (this.mX = value, this._orientationChanged = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "y", {
            get: function() {
                return this.mY;
            },
            set: function(value) {
                this.mY != value && (this.mY = value, this._orientationChanged = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "pivotX", {
            get: function() {
                return this._pivotX;
            },
            set: function(value) {
                this._pivotX != value && (this._pivotX = value, this._orientationChanged = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "pivotY", {
            get: function() {
                return this._pivotY;
            },
            set: function(value) {
                this._pivotY != value && (this._pivotY = value, this._orientationChanged = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "scaleX", {
            get: function() {
                return this._scaleX;
            },
            set: function(value) {
                this._scaleX != value && (this._scaleX = value, this._orientationChanged = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "scaleY", {
            get: function() {
                return this._scaleY;
            },
            set: function(value) {
                this._scaleY != value && (this._scaleY = value, this._orientationChanged = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "skewX", {
            get: function() {
                return this._skewX;
            },
            set: function(value) {
                value = DisplayObject.normalizeAngle(value), this._skewX != value && (this._skewX = value, 
                this._orientationChanged = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "skewY", {
            get: function() {
                return this._skewY;
            },
            set: function(value) {
                value = DisplayObject.normalizeAngle(value), this._skewY != value && (this._skewY = value, 
                this._orientationChanged = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "rotation", {
            get: function() {
                return this._rotation;
            },
            set: function(value) {
                value = DisplayObject.normalizeAngle(value), this._rotation != value && (this._rotation = value, 
                this._orientationChanged = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "alpha", {
            get: function() {
                return this._alpha;
            },
            set: function(value) {
                this._alpha = 0 > value ? 0 : value > 1 ? 1 : value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "visible", {
            get: function() {
                return this._visible;
            },
            set: function(value) {
                this._visible = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "touchable", {
            get: function() {
                return this._touchable;
            },
            set: function(value) {
                this._touchable = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "blendMode", {
            get: function() {
                return this._blendMode;
            },
            set: function(value) {
                this._blendMode = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "name", {
            get: function() {
                return this._name;
            },
            set: function(value) {
                this._name = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "parent", {
            get: function() {
                return this._parent;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "base", {
            get: function() {
                for (var currentObject = this; currentObject._parent; ) currentObject = currentObject._parent;
                return currentObject;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "root", {
            get: function() {
                for (var currentObject = this; currentObject._parent; ) {
                    if (currentObject._parent instanceof skylark.Stage) return currentObject;
                    currentObject = currentObject.parent;
                }
                return null;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DisplayObject.prototype, "stage", {
            get: function() {
                var s = this.base;
                return s instanceof skylark.Stage ? s : null;
            },
            enumerable: !0,
            configurable: !0
        }), DisplayObject._ancestors = [], DisplayObject._helperRect = new skylark.Rectangle(), 
        DisplayObject._helperMatrix = new skylark.Matrix(), DisplayObject;
    }(skylark.EventDispatcher);
    skylark.DisplayObject = DisplayObject;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var DisplayObjectContainer = function(_super) {
        function DisplayObjectContainer() {
            _super.call(this), this._children = [];
        }
        return __extends(DisplayObjectContainer, _super), DisplayObjectContainer.prototype.dispose = function() {
            for (var i = this._children.length - 1; i >= 0; --i) this._children[i].dispose();
            _super.prototype.dispose.call(this);
        }, DisplayObjectContainer.prototype.addChild = function(child) {
            return this.addChildAt(child, this.numChildren), child;
        }, DisplayObjectContainer.prototype.addChildAt = function(child, index) {
            var numChildren = this._children.length;
            if (index >= 0 && numChildren >= index) {
                if (child.removeFromParent(), index == numChildren ? this._children.push(child) : this._children.splice(index, 0, child), 
                child.setParent(this), child.dispatchEventWith(skylark.Event.ADDED, !0), this.stage) {
                    var container = child;
                    child instanceof DisplayObjectContainer ? container.broadcastEventWith(skylark.Event.ADDED_TO_STAGE) : child.dispatchEventWith(skylark.Event.ADDED_TO_STAGE);
                }
                return child;
            }
            throw new RangeError("Invalid child index");
        }, DisplayObjectContainer.prototype.removeChild = function(child, dispose) {
            "undefined" == typeof dispose && (dispose = !1);
            var childIndex = this.getChildIndex(child);
            return -1 != childIndex && this.removeChildAt(childIndex, dispose), child;
        }, DisplayObjectContainer.prototype.removeChildAt = function(index, dispose) {
            if ("undefined" == typeof dispose && (dispose = !1), index >= 0 && index < this.numChildren) {
                var child = this._children[index];
                if (child.dispatchEventWith(skylark.Event.REMOVED, !0), this.stage) {
                    var container = child;
                    child instanceof DisplayObjectContainer ? container.broadcastEventWith(skylark.Event.REMOVED_FROM_STAGE) : child.dispatchEventWith(skylark.Event.REMOVED_FROM_STAGE);
                }
                return child.setParent(null), index = this._children.indexOf(child), index >= 0 && this._children.splice(index, 1), 
                dispose && child.dispose(), child;
            }
            throw new RangeError("Invalid child index");
        }, DisplayObjectContainer.prototype.removeChildren = function(beginIndex, endIndex, dispose) {
            "undefined" == typeof beginIndex && (beginIndex = 0), "undefined" == typeof endIndex && (endIndex = -1), 
            "undefined" == typeof dispose && (dispose = !1), (0 > endIndex || endIndex >= this.numChildren) && (endIndex = this.numChildren - 1);
            for (var i = beginIndex; endIndex >= i; ++i) this.removeChildAt(beginIndex, dispose);
        }, DisplayObjectContainer.prototype.getChildAt = function(index) {
            if (index >= 0 && index < this.numChildren) return this._children[index];
            throw new RangeError("Invalid child index");
        }, DisplayObjectContainer.prototype.getChildByName = function(name) {
            for (var numChildren = this._children.length, i = 0; numChildren > i; ++i) if (this._children[i].name == name) return this._children[i];
            return null;
        }, DisplayObjectContainer.prototype.getChildIndex = function(child) {
            return this._children.indexOf(child);
        }, DisplayObjectContainer.prototype.setChildIndex = function(child, index) {
            var oldIndex = this.getChildIndex(child);
            if (-1 == oldIndex) throw new skylark.ArgumentError("Not a child of this container");
            this._children.splice(oldIndex, 1), this._children.splice(index, 0, child);
        }, DisplayObjectContainer.prototype.swapChildren = function(child1, child2) {
            var index1 = this.getChildIndex(child1), index2 = this.getChildIndex(child2);
            if (-1 == index1 || -1 == index2) throw new skylark.ArgumentError("Not a child of this container");
            this.swapChildrenAt(index1, index2);
        }, DisplayObjectContainer.prototype.swapChildrenAt = function(index1, index2) {
            var child1 = this.getChildAt(index1), child2 = this.getChildAt(index2);
            this._children[index1] = child2, this._children[index2] = child1;
        }, DisplayObjectContainer.prototype.sortChildren = function(compareFunction) {
            this._children.sort(compareFunction);
        }, DisplayObjectContainer.prototype.contains = function(child) {
            for (;child; ) {
                if (child == this) return !0;
                child = child.parent;
            }
            return !1;
        }, DisplayObjectContainer.prototype.getBounds = function(targetSpace, resultRect) {
            "undefined" == typeof resultRect && (resultRect = null), null == resultRect && (resultRect = new skylark.Rectangle());
            var numChildren = this._children.length;
            if (0 == numChildren) return this.getTransformationMatrix(targetSpace, DisplayObjectContainer._helperMatrix), 
            skylark.MatrixUtil.transformCoords(DisplayObjectContainer._helperMatrix, 0, 0, DisplayObjectContainer._helperPoint), 
            resultRect.setTo(DisplayObjectContainer._helperPoint.x, DisplayObjectContainer._helperPoint.y, 0, 0), 
            resultRect;
            if (1 == numChildren) return this._children[0].getBounds(targetSpace, resultRect);
            for (var minX = Number.MAX_VALUE, maxX = -Number.MAX_VALUE, minY = Number.MAX_VALUE, maxY = -Number.MAX_VALUE, i = 0; numChildren > i; ++i) this._children[i].getBounds(targetSpace, resultRect), 
            minX = minX < resultRect.x ? minX : resultRect.x, maxX = maxX > resultRect.right ? maxX : resultRect.right, 
            minY = minY < resultRect.y ? minY : resultRect.y, maxY = maxY > resultRect.bottom ? maxY : resultRect.bottom;
            return resultRect.setTo(minX, minY, maxX - minX, maxY - minY), resultRect;
        }, DisplayObjectContainer.prototype.hitTest = function(localPoint, forTouch) {
            if ("undefined" == typeof forTouch && (forTouch = !1), forTouch && (!this.visible || !this.touchable)) return null;
            for (var localX = localPoint.x, localY = localPoint.y, numChildren = this._children.length, i = numChildren - 1; i >= 0; --i) {
                var child = this._children[i];
                this.getTransformationMatrix(child, DisplayObjectContainer._helperMatrix), skylark.MatrixUtil.transformCoords(DisplayObjectContainer._helperMatrix, localX, localY, DisplayObjectContainer._helperPoint);
                var target = child.hitTest(DisplayObjectContainer._helperPoint, forTouch);
                if (target) return target;
            }
            return null;
        }, DisplayObjectContainer.prototype.render = function(support) {
            this.alpha;
            for (var numChildren = this._children.length, blendMode = support.blendMode, i = 0; numChildren > i; ++i) {
                var child = this._children[i];
                child.hasVisibleArea && (support.pushState(), support.transformMatrix(child), support.blendMode = child.blendMode, 
                support.alpha = child.alpha, child.render(support), support.blendMode = blendMode, 
                support.popState());
            }
        }, DisplayObjectContainer.prototype.broadcastEvent = function(event) {
            if (event.bubbles) throw new skylark.ArgumentError("Broadcast of bubbling events is prohibited");
            DisplayObjectContainer._broadcastListeners;
            var fromIndex = DisplayObjectContainer._broadcastListeners.length;
            this.getChildEventListeners(this, event.type, DisplayObjectContainer._broadcastListeners);
            for (var toIndex = DisplayObjectContainer._broadcastListeners.length, i = fromIndex; toIndex > i; ++i) DisplayObjectContainer._broadcastListeners[i].dispatchEvent(event);
            DisplayObjectContainer._broadcastListeners.length = fromIndex;
        }, DisplayObjectContainer.prototype.broadcastEventWith = function(type, data) {
            "undefined" == typeof data && (data = null);
            var event = skylark.Event.fromPool(type, !1, data);
            this.broadcastEvent(event), skylark.Event.toPool(event);
        }, DisplayObjectContainer.prototype.getChildEventListeners = function(object, eventType, listeners) {
            var container = object;
            if (object.hasEventListener(eventType) && listeners.push(object), container && container._children) for (var children = container._children, numChildren = children.length, i = 0; numChildren > i; ++i) this.getChildEventListeners(children[i], eventType, listeners);
        }, Object.defineProperty(DisplayObjectContainer.prototype, "numChildren", {
            get: function() {
                return this._children.length;
            },
            enumerable: !0,
            configurable: !0
        }), DisplayObjectContainer._helperMatrix = new skylark.Matrix(), DisplayObjectContainer._helperPoint = new skylark.Point(), 
        DisplayObjectContainer._broadcastListeners = [], DisplayObjectContainer;
    }(skylark.DisplayObject);
    skylark.DisplayObjectContainer = DisplayObjectContainer;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var Quad = function(_super) {
        function Quad(width, height, color, premultipliedAlpha) {
            if ("undefined" == typeof color && (color = 16777215), "undefined" == typeof premultipliedAlpha && (premultipliedAlpha = !0), 
            _super.call(this), null == width || null == height) throw new skylark.ArgumentError('Either "width" or "height" is undefined: ' + width + ", " + height);
            this._tinted = 16777215 != color, this._vertexData = new skylark.VertexData(4, premultipliedAlpha), 
            this._vertexData.setPosition(0, 0, 0), this._vertexData.setPosition(1, width, 0), 
            this._vertexData.setPosition(2, 0, height), this._vertexData.setPosition(3, width, height), 
            this._vertexData.setUniformColor(color), this.onVertexDataChanged();
        }
        return __extends(Quad, _super), Quad.prototype.onVertexDataChanged = function() {}, 
        Quad.prototype.getBounds = function(targetSpace, resultRect) {
            if ("undefined" == typeof resultRect && (resultRect = null), null == resultRect && (resultRect = new skylark.Rectangle()), 
            targetSpace === this) this._vertexData.getPosition(3, Quad._helperPoint), resultRect.setTo(0, 0, Quad._helperPoint.x, Quad._helperPoint.y); else if (targetSpace === this.parent && 0 === this.rotation) {
                var scaleX = this.scaleX, scaleY = this.scaleY;
                this._vertexData.getPosition(3, Quad._helperPoint), resultRect.setTo(this.x - this.pivotX * scaleX, this.y - this.pivotY * scaleY, Quad._helperPoint.x * scaleX, Quad._helperPoint.y * scaleY), 
                0 > scaleX && (resultRect.width *= -1, resultRect.x -= resultRect.width), 0 > scaleY && (resultRect.height *= -1, 
                resultRect.y -= resultRect.height);
            } else this.getTransformationMatrix(targetSpace, Quad._helperMatrix), this._vertexData.getBounds(Quad._helperMatrix, 0, 4, resultRect);
            return resultRect;
        }, Quad.prototype.getVertexColor = function(vertexID) {
            return this._vertexData.getColor(vertexID);
        }, Quad.prototype.setVertexColor = function(vertexID, color) {
            this._vertexData.setColor(vertexID, color), this.onVertexDataChanged(), this._tinted = 16777215 != color ? !0 : this._vertexData.tinted;
        }, Quad.prototype.getVertexAlpha = function(vertexID) {
            return this._vertexData.getAlpha(vertexID);
        }, Quad.prototype.setVertexAlpha = function(vertexID, alpha) {
            this._vertexData.setAlpha(vertexID, alpha), this.onVertexDataChanged(), this._tinted = 1 != alpha ? !0 : this._vertexData.tinted;
        }, Object.defineProperty(Quad.prototype, "color", {
            get: function() {
                return this._vertexData.getColor(0);
            },
            set: function(value) {
                for (var i = 0; 4 > i; ++i) this.setVertexColor(i, value);
                this._tinted = 16777215 != value || 1 != this.alpha ? !0 : this._vertexData.tinted;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Quad.prototype, "alpha", {
            get: function() {
                return Object.getOwnPropertyDescriptor(_super.prototype, "alpha").get.call(this);
            },
            set: function(value) {
                Object.getOwnPropertyDescriptor(_super.prototype, "alpha").set.call(this, value), 
                this._tinted = 1 > value ? !0 : this._vertexData.tinted;
            },
            enumerable: !0,
            configurable: !0
        }), Quad.prototype.copyVertexDataTo = function(targetData, targetVertexID) {
            "undefined" == typeof targetVertexID && (targetVertexID = 0), this._vertexData.copyTo(targetData, targetVertexID);
        }, Quad.prototype.render = function(support) {
            var context = support.context;
            context.save();
            var m = support.mvpMatrix;
            if (context.setTransform(m.a, m.b, m.c, m.d, m.tx, m.ty), context.globalAlpha = support.alpha, 
            null == this.blendMode) throw new skylark.IllegalOperationError('a blend mode value of "null" is not supported!');
            support.applyBlendMode(!1), this.renderTransformed(support, context), context.restore();
        }, Quad.prototype.renderTransformed = function(support, context) {
            context.fillStyle = skylark.Color.toHexString(this.color), context.fillRect(0, 0, this.width, this.height);
        }, Object.defineProperty(Quad.prototype, "tinted", {
            get: function() {
                return this._tinted;
            },
            enumerable: !0,
            configurable: !0
        }), Quad._helperPoint = new skylark.Point(), Quad._helperMatrix = new skylark.Matrix(), 
        Quad;
    }(skylark.DisplayObject);
    skylark.Quad = Quad;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var Image = function(_super) {
        function Image(a) {
            if (null == a) throw new skylark.ArgumentError("Image constructor requires a Texture or a HTMLImageElement/Image object");
            var texture;
            texture = a instanceof HTMLImageElement ? new skylark.ConcreteTexture(a) : a;
            var frame = texture.frame, width = frame ? frame.width : texture.width, height = frame ? frame.height : texture.height, pma = texture.premultipliedAlpha;
            _super.call(this, width, height, 16777215, pma), this._vertexData.setTexCoords(0, 0, 0), 
            this._vertexData.setTexCoords(1, 1, 0), this._vertexData.setTexCoords(2, 0, 1), 
            this._vertexData.setTexCoords(3, 1, 1), this._texture = texture, this._smoothing = skylark.TextureSmoothing.BILINEAR, 
            this._vertexDataCache = new skylark.VertexData(4, pma), this._vertexDataCacheInvalid = !0;
        }
        return __extends(Image, _super), Image.prototype.onVertexDataChanged = function() {
            this._vertexDataCacheInvalid = !0;
        }, Image.prototype.readjustSize = function() {
            var texture = this.texture, frame = texture.frame, width = frame ? frame.width : texture.width, height = frame ? frame.height : texture.height;
            this._vertexData.setPosition(0, 0, 0), this._vertexData.setPosition(1, width, 0), 
            this._vertexData.setPosition(2, 0, height), this._vertexData.setPosition(3, width, height), 
            this.onVertexDataChanged();
        }, Image.prototype.setTexCoords = function(vertexID, coords) {
            this._vertexData.setTexCoords(vertexID, coords.x, coords.y), this.onVertexDataChanged();
        }, Image.prototype.getTexCoords = function(vertexID, resultPoint) {
            return "undefined" == typeof resultPoint && (resultPoint = null), null == resultPoint && (resultPoint = new skylark.Point()), 
            this._vertexData.getTexCoords(vertexID, resultPoint), resultPoint;
        }, Image.prototype.copyVertexDataTo = function(targetData, targetVertexID) {
            "undefined" == typeof targetVertexID && (targetVertexID = 0), this._vertexDataCacheInvalid && (this._vertexDataCacheInvalid = !1, 
            this._vertexData.copyTo(this._vertexDataCache), this._texture.adjustVertexData(this._vertexDataCache, 0, 4)), 
            this._vertexDataCache.copyTo(targetData, targetVertexID);
        }, Object.defineProperty(Image.prototype, "texture", {
            get: function() {
                return this._texture;
            },
            set: function(value) {
                if (null == value) throw new skylark.ArgumentError("Texture cannot be null");
                value != this._texture && (this._texture = value, this._vertexData.setPremultipliedAlpha(this._texture.premultipliedAlpha), 
                this.onVertexDataChanged());
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Image.prototype, "smoothing", {
            get: function() {
                return this._smoothing;
            },
            set: function(value) {
                if (!skylark.TextureSmoothing.isValid(value)) throw new skylark.ArgumentError("Invalid smoothing mode: " + value);
                this._smoothing = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Image.prototype, "color", {
            set: function() {
                throw new skylark.DefaultError('Image class does not support "color" tinting (yet?)');
            },
            enumerable: !0,
            configurable: !0
        }), Image.prototype.renderTransformed = function(support, context) {
            this._vertexDataCacheInvalid && (this._vertexDataCacheInvalid = !1, this._vertexData.copyTo(this._vertexDataCache), 
            this._texture.adjustVertexData(this._vertexDataCache, 0, 4));
            var texture = this._texture, base = texture.base, image = null != base ? base.image : null;
            if (null == image) throw new skylark.DefaultError('Cannot render Texture without "base.image" property');
            var vd = this._vertexDataCache, hp = skylark.Quad._helperPoint, textureWidth = texture.root.width, textureHeight = texture.root.height;
            vd.getTexCoords(0, hp);
            var sx = hp.x * textureWidth, sy = hp.y * textureHeight;
            vd.getTexCoords(3, hp);
            var sw = hp.x * textureWidth - sx, sh = hp.y * textureHeight - sy;
            vd.getPosition(0, hp);
            var dx = hp.x, dy = hp.y, dw = sw, dh = sh;
            context.drawImage(image, sx, sy, sw, sh, dx, dy, dw, dh);
        }, Image;
    }(skylark.Quad);
    skylark.Image = Image;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var MovieClip = function(_super) {
        function MovieClip(textures, fps) {
            if ("undefined" == typeof fps && (fps = 12), !(textures.length > 0)) throw new skylark.ArgumentError("Empty texture array");
            _super.call(this, textures[0]), this.init(textures, fps);
        }
        return __extends(MovieClip, _super), MovieClip.prototype.init = function(textures, fps) {
            if (0 >= fps) throw new skylark.ArgumentError("Invalid fps: " + fps);
            var numFrames = textures.length;
            this._defaultFrameDuration = 1 / fps, this._loop = !0, this._playing = !0, this._currentTime = 0, 
            this._currentFrame = 0, this._totalTime = this._defaultFrameDuration * numFrames, 
            this._textures = textures.concat(), this._sounds = new Array(numFrames), this._durations = new Array(numFrames), 
            this._startTimes = new Array(numFrames);
            for (var i = 0; numFrames > i; ++i) this._durations[i] = this._defaultFrameDuration, 
            this._startTimes[i] = i * this._defaultFrameDuration;
        }, MovieClip.prototype.addFrame = function(texture, sound, duration) {
            "undefined" == typeof sound && (sound = null), "undefined" == typeof duration && (duration = -1), 
            this.addFrameAt(this.numFrames, texture, sound, duration);
        }, MovieClip.prototype.addFrameAt = function(frameID, texture, sound, duration) {
            if ("undefined" == typeof sound && (sound = null), "undefined" == typeof duration && (duration = -1), 
            0 > frameID || frameID > this.numFrames) throw new skylark.ArgumentError("Invalid frame id");
            0 > duration && (duration = this._defaultFrameDuration), this._textures.splice(frameID, 0, texture), 
            this._sounds.splice(frameID, 0, sound), this._durations.splice(frameID, 0, duration), 
            this._totalTime += duration, frameID > 0 && frameID == this.numFrames ? this._startTimes[frameID] = this._startTimes[frameID - 1] + this._durations[frameID - 1] : this.updateStartTimes();
        }, MovieClip.prototype.removeFrameAt = function(frameID) {
            if (0 > frameID || frameID >= this.numFrames) throw new skylark.ArgumentError("Invalid frame id");
            if (1 == this.numFrames) throw new skylark.IllegalOperationError("Movie clip must not be empty");
            this._totalTime -= this.getFrameDuration(frameID), this._textures.splice(frameID, 1), 
            this._sounds.splice(frameID, 1), this._durations.splice(frameID, 1), this.updateStartTimes();
        }, MovieClip.prototype.getFrameTexture = function(frameID) {
            if (0 > frameID || frameID >= this.numFrames) throw new skylark.ArgumentError("Invalid frame id");
            return this._textures[frameID];
        }, MovieClip.prototype.setFrameTexture = function(frameID, texture) {
            if (0 > frameID || frameID >= this.numFrames) throw new skylark.ArgumentError("Invalid frame id");
            this._textures[frameID] = texture;
        }, MovieClip.prototype.getFrameSound = function(frameID) {
            if (0 > frameID || frameID >= this.numFrames) throw new skylark.ArgumentError("Invalid frame id");
            return this._sounds[frameID];
        }, MovieClip.prototype.setFrameSound = function(frameID, sound) {
            if (0 > frameID || frameID >= this.numFrames) throw new skylark.ArgumentError("Invalid frame id");
            this._sounds[frameID] = sound;
        }, MovieClip.prototype.getFrameDuration = function(frameID) {
            if (0 > frameID || frameID >= this.numFrames) throw new skylark.ArgumentError("Invalid frame id");
            return this._durations[frameID];
        }, MovieClip.prototype.setFrameDuration = function(frameID, duration) {
            if (0 > frameID || frameID >= this.numFrames) throw new skylark.ArgumentError("Invalid frame id");
            this._totalTime -= this.getFrameDuration(frameID), this._totalTime += duration, 
            this._durations[frameID] = duration, this.updateStartTimes();
        }, MovieClip.prototype.play = function() {
            this._playing = !0;
        }, MovieClip.prototype.pause = function() {
            this._playing = !1;
        }, MovieClip.prototype.stop = function() {
            this._playing = !1, this.currentFrame = 0;
        }, MovieClip.prototype.updateStartTimes = function() {
            var numFrames = this.numFrames;
            this._startTimes.length = 0, this._startTimes[0] = 0;
            for (var i = 1; numFrames > i; ++i) this._startTimes[i] = this._startTimes[i - 1] + this._durations[i - 1];
        }, MovieClip.prototype.advanceTime = function(passedTime) {
            var finalFrame, previousFrame = this._currentFrame, restTime = 0, breakAfterFrame = !1;
            if (this._loop && this._currentTime == this._totalTime && (this._currentTime = 0, 
            this._currentFrame = 0), this._playing && passedTime > 0 && this._currentTime < this._totalTime) for (this._currentTime += passedTime, 
            finalFrame = this._textures.length - 1; this._currentTime >= this._startTimes[this._currentFrame] + this._durations[this._currentFrame]; ) {
                this._currentFrame == finalFrame ? (this.hasEventListener(skylark.Event.COMPLETE) && (this._currentFrame != previousFrame && (this.texture = this._textures[this._currentFrame]), 
                restTime = this._currentTime - this._totalTime, this._currentTime = this._totalTime, 
                this.dispatchEventWith(skylark.Event.COMPLETE), breakAfterFrame = !0), this._loop ? (this._currentTime -= this._totalTime, 
                this._currentFrame = 0) : (this._currentTime = this._totalTime, breakAfterFrame = !0)) : this._currentFrame++;
                var sound = this._sounds[this._currentFrame];
                if (sound && sound.play(), breakAfterFrame) break;
            }
            this._currentFrame != previousFrame && (this.texture = this._textures[this._currentFrame]), 
            restTime && this.advanceTime(restTime);
        }, Object.defineProperty(MovieClip.prototype, "isComplete", {
            get: function() {
                return !this._loop && this._currentTime >= this._totalTime;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(MovieClip.prototype, "totalTime", {
            get: function() {
                return this._totalTime;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(MovieClip.prototype, "numFrames", {
            get: function() {
                return this._textures.length;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(MovieClip.prototype, "loop", {
            get: function() {
                return this._loop;
            },
            set: function(value) {
                this._loop = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(MovieClip.prototype, "currentFrame", {
            get: function() {
                return this._currentFrame;
            },
            set: function(value) {
                this._currentFrame = value, this._currentTime = 0;
                for (var i = 0; value > i; ++i) this._currentTime += this.getFrameDuration(i);
                this.texture = this._textures[this._currentFrame], this._sounds[this._currentFrame] && this._sounds[this._currentFrame].play();
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(MovieClip.prototype, "fps", {
            get: function() {
                return 1 / this._defaultFrameDuration;
            },
            set: function(value) {
                if (0 >= value) throw new skylark.ArgumentError("Invalid fps: " + value);
                var newFrameDuration = 1 / value, acceleration = newFrameDuration / this._defaultFrameDuration;
                this._currentTime *= acceleration, this._defaultFrameDuration = newFrameDuration;
                for (var i = 0; i < this.numFrames; ++i) {
                    var duration = this._durations[i] * acceleration;
                    this._totalTime = this._totalTime - this._durations[i] + duration, this._durations[i] = duration;
                }
                this.updateStartTimes();
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(MovieClip.prototype, "isPlaying", {
            get: function() {
                return this._playing ? this._loop || this._currentTime < this._totalTime : !1;
            },
            enumerable: !0,
            configurable: !0
        }), MovieClip;
    }(skylark.Image);
    skylark.MovieClip = MovieClip;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var Sprite = function(_super) {
        function Sprite() {
            _super.call(this);
        }
        return __extends(Sprite, _super), Sprite.prototype.dispose = function() {
            this.disposeFlattenedContents(), _super.prototype.dispose.call(this);
        }, Sprite.prototype.disposeFlattenedContents = function() {
            if (this._flattenedContents, this._flattenedContents) {
                for (var i = 0, max = this._flattenedContents.length; max > i; ++i) this._flattenedContents[i].dispose();
                this._flattenedContents = null;
            }
        }, Sprite.prototype.flatten = function() {
            this._flattenRequested = !0, this.broadcastEventWith(skylark.Event.FLATTEN);
        }, Sprite.prototype.unflatten = function() {
            this._flattenRequested = !1, this.disposeFlattenedContents();
        }, Object.defineProperty(Sprite.prototype, "isFlattened", {
            get: function() {
                return null != this._flattenedContents || this._flattenRequested;
            },
            enumerable: !0,
            configurable: !0
        }), Sprite;
    }(skylark.DisplayObjectContainer);
    skylark.Sprite = Sprite;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var Stage = function(_super) {
        function Stage(width, height, color, alpha) {
            _super.call(this), this._enterFrameEvent = new skylark.EnterFrameEvent(skylark.Event.ENTER_FRAME, 0), 
            this._width = width, this._height = height, "undefined" == typeof color && (color = 0, 
            alpha = 0), "undefined" == typeof alpha && (alpha = 1), this._color = color, this.alpha = alpha;
        }
        return __extends(Stage, _super), Stage.prototype.advanceTime = function(passedTime) {
            this._enterFrameEvent.reset(skylark.Event.ENTER_FRAME, !1, passedTime), this.broadcastEvent(this._enterFrameEvent);
        }, Stage.prototype.hitTest = function(localPoint, forTouch) {
            if ("undefined" == typeof forTouch && (forTouch = !1), forTouch && (!this.visible || !this.touchable)) return null;
            if (localPoint.x < 0 || localPoint.x > this._width || localPoint.y < 0 || localPoint.y > this._height) return null;
            var target = _super.prototype.hitTest.call(this, localPoint, forTouch);
            return null == target && (target = this), target;
        }, Object.defineProperty(Stage.prototype, "width", {
            set: function() {
                throw new skylark.IllegalOperationError("Cannot set width of stage");
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Stage.prototype, "height", {
            set: function() {
                throw new skylark.IllegalOperationError("Cannot set height of stage");
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Stage.prototype, "x", {
            set: function() {
                throw new skylark.IllegalOperationError("Cannot set x-coordinate of stage");
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Stage.prototype, "y", {
            set: function() {
                throw new skylark.IllegalOperationError("Cannot set y-coordinate of stage");
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Stage.prototype, "scaleX", {
            set: function() {
                throw new skylark.IllegalOperationError("Cannot scale stage");
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Stage.prototype, "scaleY", {
            set: function() {
                throw new skylark.IllegalOperationError("Cannot scale stage");
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Stage.prototype, "rotation", {
            set: function() {
                throw new skylark.IllegalOperationError("Cannot rotate stage");
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Stage.prototype, "color", {
            get: function() {
                return this._color;
            },
            set: function(value) {
                this._color = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Stage.prototype, "stageWidth", {
            get: function() {
                return this._width;
            },
            set: function(value) {
                this._width = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Stage.prototype, "stageHeight", {
            get: function() {
                return this._height;
            },
            set: function(value) {
                this._height = value;
            },
            enumerable: !0,
            configurable: !0
        }), Stage;
    }(skylark.DisplayObjectContainer);
    skylark.Stage = Stage;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var BlendMode = function() {
        function BlendMode() {
            throw new skylark.AbstractClassError();
        }
        return BlendMode.AUTO = "auto", BlendMode.NONE = "copy", BlendMode.NORMAL = "source-over", 
        BlendMode.ADD = "add", BlendMode.MULTIPLY = "multiply", BlendMode.SCREEN = "screen", 
        BlendMode.ERASE = "destination-out", BlendMode;
    }();
    skylark.BlendMode = BlendMode;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var Button = function(_super) {
        function Button(upState, b, c) {
            if (null == upState) throw new skylark.ArgumentError("Texture cannot be null");
            _super.call(this);
            var downState, text;
            "string" == typeof b ? (text = b, downState = c) : null != typeof b && (downState = b), 
            this._upState = upState, this._downState = downState ? downState : upState, this._background = new skylark.Image(upState), 
            this._scaleWhenDown = downState ? 1 : .9, this._alphaWhenDisabled = .5, this._enabled = !0, 
            this._isDown = !1, this.useHandCursor = !0, this._textBounds = new skylark.Rectangle(0, 0, upState.width, upState.height), 
            this._contents = new skylark.Sprite(), this._contents.addChild(this._background), 
            this.addChild(this._contents), this.addEventListener(skylark.TouchEvent.TOUCH, this.onTouchButton), 
            null != text && text.length > 0 && (this.text = text);
        }
        return __extends(Button, _super), Button.prototype.resetContents = function() {
            this._isDown = !1, this._background.texture = this._upState, this._contents.x = this._contents.y = 0, 
            this._contents.scaleX = this._contents.scaleY = 1;
        }, Button.prototype.createTextField = function() {
            null == this._textField && (this._textField = new skylark.TextField(this._textBounds.width, this._textBounds.height, ""), 
            this._textField.vAlign = skylark.VAlign.CENTER, this._textField.hAlign = skylark.HAlign.CENTER, 
            this._textField.touchable = !1, this._textField.autoScale = !0, this._contents.addChild(this._textField)), 
            this._textField.width = this._textBounds.width, this._textField.height = this._textBounds.height, 
            this._textField.x = this._textBounds.x, this._textField.y = this._textBounds.y;
        }, Button.prototype.onTouchButton = function(event) {
            var touch = event.getTouch(this);
            if (this._enabled && null != touch) if (touch.phase != skylark.TouchPhase.BEGAN || this._isDown) if (touch.phase == skylark.TouchPhase.MOVED && this._isDown) {
                var buttonRect = this.getBounds(this.stage);
                (touch.globalX < buttonRect.x - Button.MAX_DRAG_DIST || touch.globalY < buttonRect.y - Button.MAX_DRAG_DIST || touch.globalX > buttonRect.x + buttonRect.width + Button.MAX_DRAG_DIST || touch.globalY > buttonRect.y + buttonRect.height + Button.MAX_DRAG_DIST) && this.resetContents();
            } else touch.phase == skylark.TouchPhase.ENDED && this._isDown && (this.resetContents(), 
            this.dispatchEventWith(skylark.Event.TRIGGERED, !0)); else this._background.texture = this._downState, 
            this._contents.scaleX = this._contents.scaleY = this._scaleWhenDown, this._contents.x = (1 - this._scaleWhenDown) / 2 * this._background.width, 
            this._contents.y = (1 - this._scaleWhenDown) / 2 * this._background.height, this._isDown = !0;
        }, Object.defineProperty(Button.prototype, "scaleWhenDown", {
            get: function() {
                return this._scaleWhenDown;
            },
            set: function(value) {
                this._scaleWhenDown = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Button.prototype, "alphaWhenDisabled", {
            get: function() {
                return this._alphaWhenDisabled;
            },
            set: function(value) {
                this._alphaWhenDisabled = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Button.prototype, "enabled", {
            get: function() {
                return this._enabled;
            },
            set: function(value) {
                this._enabled != value && (this._enabled = value, this._contents.alpha = value ? 1 : this._alphaWhenDisabled, 
                this.resetContents());
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Button.prototype, "text", {
            get: function() {
                return this._textField ? this._textField.text : "";
            },
            set: function(value) {
                this.createTextField(), this._textField.text = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Button.prototype, "fontName", {
            get: function() {
                return this._textField ? this._textField.fontName : "Verdana";
            },
            set: function(value) {
                this.createTextField(), this._textField.fontName = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Button.prototype, "fontSize", {
            get: function() {
                return this._textField ? this._textField.fontSize : 12;
            },
            set: function(value) {
                this.createTextField(), this._textField.fontSize = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Button.prototype, "fontColor", {
            get: function() {
                return this._textField ? this._textField.color : 0;
            },
            set: function(value) {
                this.createTextField(), this._textField.color = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Button.prototype, "fontBold", {
            get: function() {
                return this._textField ? this._textField.bold : !1;
            },
            set: function(value) {
                this.createTextField(), this._textField.bold = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Button.prototype, "upState", {
            get: function() {
                return this._upState;
            },
            set: function(value) {
                this._upState != value && (this._upState = value, this._isDown || (this._background.texture = value));
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Button.prototype, "downState", {
            get: function() {
                return this._downState;
            },
            set: function(value) {
                this._downState != value && (this._downState = value, this._isDown && (this._background.texture = value));
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Button.prototype, "textVAlign", {
            get: function() {
                return this._textField.vAlign;
            },
            set: function(value) {
                this.createTextField(), this._textField.vAlign = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Button.prototype, "textHAlign", {
            get: function() {
                return this._textField.hAlign;
            },
            set: function(value) {
                this.createTextField(), this._textField.hAlign = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Button.prototype, "textBounds", {
            get: function() {
                return this._textBounds.clone();
            },
            set: function(value) {
                this._textBounds = value.clone(), this.createTextField();
            },
            enumerable: !0,
            configurable: !0
        }), Button.MAX_DRAG_DIST = 50, Button;
    }(skylark.DisplayObjectContainer);
    skylark.Button = Button;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var _asLittleEndianHex = function(value, bytes) {
        for (var result = []; bytes > 0; bytes--) result.push(String.fromCharCode(255 & value)), 
        value >>= 8;
        return result.join("");
    }, _collapseData = function(rows, row_padding) {
        for (var i, j, pixel, rows_len = rows.length, pixels_len = rows_len ? rows[0].length : 0, padding = "", result = []; row_padding > 0; row_padding--) padding += "\x00";
        for (i = 0; rows_len > i; i++) {
            for (j = 0; pixels_len > j; j++) pixel = rows[i][j], result.push(String.fromCharCode(pixel[2]) + String.fromCharCode(pixel[1]) + String.fromCharCode(pixel[0]));
            result.push(padding);
        }
        return result.join("");
    }, _scaleRows = function(rows, scale) {
        var new_row, x, y, real_w = rows.length, scaled_w = parseInt(String(real_w * scale)), real_h = real_w ? rows[0].length : 0, scaled_h = parseInt(String(real_h * scale)), new_rows = [];
        for (y = 0; scaled_h > y; y++) for (new_rows.push(new_row = []), x = 0; scaled_w > x; x++) new_row.push(rows[parseInt(String(y / scale))][parseInt(String(x / scale))]);
        return new_rows;
    }, Bitmap = function() {
        function Bitmap() {}
        return Bitmap.create = function(rows, scale) {
            if (!window.btoa) return console.log("Oh no, your browser does not support base64 encoding - window.btoa()!!"), 
            !1;
            scale = scale || 1, 1 != scale && (rows = _scaleRows(rows, scale));
            var file, height = rows.length, width = height ? rows[0].length : 0, row_padding = (4 - 3 * width % 4) % 4, num_data_bytes = (3 * width + row_padding) * height, num_file_bytes = 54 + num_data_bytes;
            return height = _asLittleEndianHex(height, 4), width = _asLittleEndianHex(width, 4), 
            num_data_bytes = _asLittleEndianHex(num_data_bytes, 4), num_file_bytes = _asLittleEndianHex(num_file_bytes, 4), 
            file = "BM" + num_file_bytes + "\x00\x00" + "\x00\x00" + "6\x00\x00\x00" + "(\x00\x00\x00" + width + height + "\x00" + "\x00" + "\x00\x00\x00\x00" + num_data_bytes + "\x00\x00" + "\x00\x00" + "\x00\x00\x00\x00" + "\x00\x00\x00\x00" + _collapseData(rows, row_padding), 
            "data:image/bmp;base64," + btoa(file);
        }, Bitmap;
    }();
    skylark.Bitmap = Bitmap;
}(skylark || (skylark = {})), function(global) {
    function PxLoader(settings) {
        settings = settings || {}, this.settings = settings, null == settings.statusInterval && (settings.statusInterval = 5e3), 
        null == settings.loggingDelay && (settings.loggingDelay = 2e4), null == settings.noProgressTimeout && (settings.noProgressTimeout = 1/0);
        var timeStarted, entries = [], progressListeners = [], progressChanged = Date.now(), ResourceState = {
            QUEUED: 0,
            WAITING: 1,
            LOADED: 2,
            ERROR: 3,
            TIMEOUT: 4
        }, ensureArray = function(val) {
            return null == val ? [] : Array.isArray(val) ? val : [ val ];
        };
        this.add = function(resource) {
            resource.tags = new PxLoaderTags(resource.tags), null == resource.priority && (resource.priority = 1/0), 
            entries.push({
                resource: resource,
                status: ResourceState.QUEUED
            });
        }, this.addProgressListener = function(callback, tags) {
            progressListeners.push({
                callback: callback,
                tags: new PxLoaderTags(tags)
            });
        }, this.addCompletionListener = function(callback, tags) {
            progressListeners.push({
                tags: new PxLoaderTags(tags),
                callback: function(e) {
                    e.completedCount === e.totalCount && callback(e);
                }
            });
        };
        var getResourceSort = function(orderedTags) {
            orderedTags = ensureArray(orderedTags);
            var getTagOrder = function(entry) {
                for (var resource = entry.resource, bestIndex = 1/0, i = 0; i < resource.tags.length; i++) for (var j = 0; j < Math.min(orderedTags.length, bestIndex) && !(resource.tags.all[i] === orderedTags[j] && bestIndex > j && (bestIndex = j, 
                0 === bestIndex)) && 0 !== bestIndex; j++) ;
                return bestIndex;
            };
            return function(a, b) {
                var aOrder = getTagOrder(a), bOrder = getTagOrder(b);
                return bOrder > aOrder ? -1 : aOrder > bOrder ? 1 : a.priority < b.priority ? -1 : a.priority > b.priority ? 1 : 0;
            };
        };
        this.start = function(orderedTags) {
            timeStarted = Date.now();
            var compareResources = getResourceSort(orderedTags);
            entries.sort(compareResources);
            for (var i = 0, len = entries.length; len > i; i++) {
                var entry = entries[i];
                entry.status = ResourceState.WAITING, entry.resource.start(this);
            }
            setTimeout(statusCheck, 100);
        };
        var statusCheck = function() {
            for (var checkAgain = !1, noProgressTime = Date.now() - progressChanged, timedOut = noProgressTime >= settings.noProgressTimeout, shouldLog = noProgressTime >= settings.loggingDelay, i = 0, len = entries.length; len > i; i++) {
                var entry = entries[i];
                entry.status === ResourceState.WAITING && (entry.resource.checkStatus && entry.resource.checkStatus(), 
                entry.status === ResourceState.WAITING && (timedOut ? entry.resource.onTimeout() : checkAgain = !0));
            }
            shouldLog && checkAgain && log(), checkAgain && setTimeout(statusCheck, settings.statusInterval);
        };
        this.isBusy = function() {
            for (var i = 0, len = entries.length; len > i; i++) if (entries[i].status === ResourceState.QUEUED || entries[i].status === ResourceState.WAITING) return !0;
            return !1;
        };
        var onProgress = function(resource, statusType) {
            var i, len, numResourceTags, listener, shouldCall, entry = null;
            for (i = 0, len = entries.length; len > i; i++) if (entries[i].resource === resource) {
                entry = entries[i];
                break;
            }
            if (null != entry && entry.status === ResourceState.WAITING) for (entry.status = statusType, 
            progressChanged = Date.now(), numResourceTags = resource.tags.length, i = 0, len = progressListeners.length; len > i; i++) listener = progressListeners[i], 
            shouldCall = 0 === listener.tags.length ? !0 : resource.tags.intersects(listener.tags), 
            shouldCall && sendProgress(entry, listener);
        };
        this.onLoad = function(resource) {
            onProgress(resource, ResourceState.LOADED);
        }, this.onError = function(resource) {
            onProgress(resource, ResourceState.ERROR);
        }, this.onTimeout = function(resource) {
            onProgress(resource, ResourceState.TIMEOUT);
        };
        var sendProgress = function(updatedEntry, listener) {
            var i, len, entry, includeResource, completed = 0, total = 0;
            for (i = 0, len = entries.length; len > i; i++) entry = entries[i], includeResource = !1, 
            includeResource = 0 === listener.tags.length ? !0 : entry.resource.tags.intersects(listener.tags), 
            includeResource && (total++, (entry.status === ResourceState.LOADED || entry.status === ResourceState.ERROR || entry.status === ResourceState.TIMEOUT) && completed++);
            listener.callback({
                resource: updatedEntry.resource,
                loaded: updatedEntry.status === ResourceState.LOADED,
                error: updatedEntry.status === ResourceState.ERROR,
                timeout: updatedEntry.status === ResourceState.TIMEOUT,
                completedCount: completed,
                totalCount: total
            });
        }, log = this.log = function(showAll) {
            if (window.console) {
                var elapsedSeconds = Math.round((Date.now() - timeStarted) / 1e3);
                window.console.log("PxLoader elapsed: " + elapsedSeconds + " sec");
                for (var i = 0, len = entries.length; len > i; i++) {
                    var entry = entries[i];
                    if (showAll || entry.status === ResourceState.WAITING) {
                        var message = "PxLoader: #" + i + " " + entry.resource.getName();
                        switch (entry.status) {
                          case ResourceState.QUEUED:
                            message += " (Not Started)";
                            break;

                          case ResourceState.WAITING:
                            message += " (Waiting)";
                            break;

                          case ResourceState.LOADED:
                            message += " (Loaded)";
                            break;

                          case ResourceState.ERROR:
                            message += " (Error)";
                            break;

                          case ResourceState.TIMEOUT:
                            message += " (Timeout)";
                        }
                        entry.resource.tags.length > 0 && (message += " Tags: [" + entry.resource.tags.all.join(",") + "]"), 
                        window.console.log(message);
                    }
                }
            }
        };
    }
    function PxLoaderTags(values) {
        if (this.all = [], this.first = null, this.length = 0, this.lookup = {}, values) {
            if (Array.isArray(values)) this.all = values.slice(0); else if ("object" == typeof values) for (var key in values) values.hasOwnProperty(key) && this.all.push(key); else this.all.push(values);
            this.length = this.all.length, this.length > 0 && (this.first = this.all[0]);
            for (var i = 0; i < this.length; i++) this.lookup[this.all[i]] = !0;
        }
    }
    function PxLoaderImage(url, tags, priority) {
        var self = this, loader = null;
        this.img = new Image(), this.tags = tags, this.priority = priority;
        var onReadyStateChange = function() {
            "complete" === self.img.readyState && (removeEventHandlers(), loader.onLoad(self));
        }, onLoad = function() {
            removeEventHandlers(), loader.onLoad(self);
        }, onError = function() {
            removeEventHandlers(), loader.onError(self);
        }, removeEventHandlers = function() {
            self.unbind("load", onLoad), self.unbind("readystatechange", onReadyStateChange), 
            self.unbind("error", onError);
        };
        this.start = function(pxLoader) {
            loader = pxLoader, self.bind("load", onLoad), self.bind("readystatechange", onReadyStateChange), 
            self.bind("error", onError), self.img.src = url;
        }, this.checkStatus = function() {
            self.img.complete && (removeEventHandlers(), loader.onLoad(self));
        }, this.onTimeout = function() {
            removeEventHandlers(), self.img.complete ? loader.onLoad(self) : loader.onTimeout(self);
        }, this.getName = function() {
            return url;
        }, this.bind = function(eventName, eventHandler) {
            self.img.addEventListener ? self.img.addEventListener(eventName, eventHandler, !1) : self.img.attachEvent && self.img.attachEvent("on" + eventName, eventHandler);
        }, this.unbind = function(eventName, eventHandler) {
            self.img.removeEventListener ? self.img.removeEventListener(eventName, eventHandler, !1) : self.img.detachEvent && self.img.detachEvent("on" + eventName, eventHandler);
        };
    }
    PxLoaderTags.prototype.intersects = function(other) {
        if (0 === this.length || 0 === other.length) return !1;
        if (1 === this.length && 1 === other.length) return this.first === other.first;
        if (other.length < this.length) return other.intersects(this);
        for (var key in this.lookup) if (other.lookup[key]) return !0;
        return !1;
    }, PxLoader.prototype.addImage = function(url, tags, priority) {
        var imageLoader = new PxLoaderImage(url, tags, priority);
        return this.add(imageLoader), imageLoader.img;
    }, global.PxLoader = PxLoader, global.PxLoaderImage = PxLoaderImage;
}(this);

var PxResourceState;

!function(PxResourceState) {
    PxResourceState[PxResourceState.QUEUED = 0] = "QUEUED", PxResourceState[PxResourceState.WAITING = 1] = "WAITING", 
    PxResourceState[PxResourceState.LOADED = 2] = "LOADED", PxResourceState[PxResourceState.ERROR = 3] = "ERROR", 
    PxResourceState[PxResourceState.TIMEOUT = 4] = "TIMEOUT";
}(PxResourceState || (PxResourceState = {}));

var skylark;

!function(skylark) {
    var ClassUtil = function() {
        function ClassUtil() {}
        return ClassUtil.getQualifiedClassName = function(obj) {
            var constructor;
            if ("function" == typeof obj) constructor = obj; else {
                if ("object" != typeof obj || null == obj.constructor) throw new skylark.ArgumentError("Given object is not a (constructor) function or an object instance created by a constructor function!");
                constructor = obj.constructor;
            }
            return constructor.name;
        }, ClassUtil.getDefinitionByName = function(name) {
            return eval(name);
        }, ClassUtil.isClass = function(obj) {
            return "function" == typeof obj && null != obj.constructor;
        }, ClassUtil.isCanvasImageSource = function(obj) {
            return obj instanceof HTMLCanvasElement || obj instanceof HTMLImageElement || obj instanceof HTMLVideoElement;
        }, ClassUtil;
    }();
    skylark.ClassUtil = ClassUtil;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var StringUtil = function() {
        function StringUtil() {}
        return StringUtil.format = function(str) {
            for (var values = [], _i = 0; _i < arguments.length - 1; _i++) values[_i] = arguments[_i + 1];
            var arg, result = str;
            for (arg = 0; arg < values.length; arg++) result = result.replace("{" + arg + "}", values[arg]);
            return result;
        }, StringUtil.parseXml = function(xmlStr) {
            var document = new DOMParser().parseFromString(xmlStr, "text/xml");
            if (document.getElementsByTagName("parsererror").length) throw new skylark.InvalidXmlError("XML failed to parse correctly", xmlStr, document.getElementsByTagName("parsererror"));
            return document;
        }, StringUtil.xmlToJson = function(node, simple) {
            function convert(node) {
                function jsVar(s) {
                    return String(s || "").replace(/-/g, "_");
                }
                function myArr(o) {
                    return Array.isArray(o) || (o = [ o ]), o;
                }
                function createObj() {
                    return simple ? {} : Object.create(proto);
                }
                if (!node) return null;
                var txt = "", obj = null, target = null;
                node.nodeType, jsVar(node.localName || node.nodeName), node.text || node.nodeValue || "";
                var childNodes = node.childNodes;
                if (childNodes && childNodes.length > 0) for (var i = 0; i < childNodes.length; i++) {
                    var cnode = childNodes[i], cnodeType = cnode.nodeType, cnodeName = jsVar(cnode.localName || cnode.nodeName), cnodeValue = cnode.text || cnode.nodeValue || "";
                    if (8 != cnodeType) if (3 != cnodeType && 4 != cnodeType && cnodeName) obj = obj || createObj(), 
                    obj[cnodeName] ? (obj[cnodeName] = myArr(obj[cnodeName]), obj[cnodeName][obj[cnodeName].length] = convert(cnode), 
                    obj[cnodeName].length = obj[cnodeName].length) : obj[cnodeName] = convert(cnode); else {
                        if (cnodeValue.match(/^\s+$/)) continue;
                        txt += cnodeValue.replace(/^\s+/, "").replace(/\s+$/, "");
                    }
                }
                if (node.attributes && node.attributes.length > 0) {
                    obj = obj || createObj(), target = simple ? obj : {};
                    for (var attributes = node.attributes, i = 0; i < attributes.length; i++) {
                        var attr = attributes[i], attrName = jsVar(attr.name), attrValue = attr.value;
                        target[attrName] ? (target[cnodeName] = myArr(target[cnodeName]), target[attrName][target[attrName].length] = attrValue) : target[attrName] = attrValue;
                    }
                }
                return null != obj || simple || (obj = createObj(), "" != txt && (obj.text = txt)), 
                simple || (obj.attributes = target), obj || txt;
            }
            if ("undefined" == typeof simple && (simple = !0), !(node instanceof Document)) throw new skylark.ArgumentError('xmlToJson expects a "Document" as first parameter.');
            var proto = {
                attribute: function(name) {
                    return this.attributes[name];
                }
            }, result = convert(node);
            return delete result.attributes, result;
        }, StringUtil.sortArray = function(arr) {
            return arr.sort(function(a, b) {
                return a = a.toLowerCase(), b = b.toLowerCase(), a == b ? 0 : a > b ? 1 : -1;
            }), arr;
        }, StringUtil;
    }();
    skylark.StringUtil = StringUtil;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var Arguments = function() {
        function Arguments() {}
        return Arguments.number = function() {
            for (var args = [], _i = 0; _i < arguments.length - 0; _i++) args[_i] = arguments[_i + 0];
            for (var i = 0; i < args.length; i++) {
                var arg = args[i];
                if ("number" != typeof arg) throw new skylark.ArgumentError("Value is not a number: " + arg);
            }
        }, Arguments;
    }();
    skylark.Arguments = Arguments;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var MatrixUtil = function() {
        function MatrixUtil() {
            throw new skylark.AbstractClassError();
        }
        return MatrixUtil.transformCoords = function(matrix, x, y, resultPoint) {
            return "undefined" == typeof resultPoint && (resultPoint = null), null == resultPoint && (resultPoint = new skylark.Point()), 
            resultPoint.x = matrix.a * x + matrix.c * y + matrix.tx, resultPoint.y = matrix.d * y + matrix.b * x + matrix.ty, 
            resultPoint;
        }, MatrixUtil.skew = function(matrix, skewX, skewY) {
            var sinX = Math.sin(skewX), cosX = Math.cos(skewX), sinY = Math.sin(skewY), cosY = Math.cos(skewY);
            matrix.setTo(matrix.a * cosY - matrix.b * sinX, matrix.a * sinY + matrix.b * cosX, matrix.c * cosY - matrix.d * sinX, matrix.c * sinY + matrix.d * cosX, matrix.tx * cosY - matrix.ty * sinX, matrix.tx * sinY + matrix.ty * cosX);
        }, MatrixUtil.prependMatrix = function(base, prep) {
            base.setTo(base.a * prep.a + base.c * prep.b, base.b * prep.a + base.d * prep.b, base.a * prep.c + base.c * prep.d, base.b * prep.c + base.d * prep.d, base.tx + base.a * prep.tx + base.c * prep.ty, base.ty + base.b * prep.tx + base.d * prep.ty);
        }, MatrixUtil.prependTranslation = function(matrix, tx, ty) {
            matrix.tx += matrix.a * tx + matrix.c * ty, matrix.ty += matrix.b * tx + matrix.d * ty;
        }, MatrixUtil.prependScale = function(matrix, sx, sy) {
            matrix.setTo(matrix.a * sx, matrix.b * sx, matrix.c * sy, matrix.d * sy, matrix.tx, matrix.ty);
        }, MatrixUtil.prependRotation = function(matrix, angle) {
            var sin = Math.sin(angle), cos = Math.cos(angle);
            matrix.setTo(matrix.a * cos + matrix.c * sin, matrix.b * cos + matrix.d * sin, matrix.c * cos - matrix.a * sin, matrix.d * cos - matrix.b * sin, matrix.tx, matrix.ty);
        }, MatrixUtil.prependSkew = function(matrix, skewX, skewY) {
            var sinX = Math.sin(skewX), cosX = Math.cos(skewX), sinY = Math.sin(skewY), cosY = Math.cos(skewY);
            matrix.setTo(matrix.a * cosY + matrix.c * sinY, matrix.b * cosY + matrix.d * sinY, matrix.c * cosX - matrix.a * sinX, matrix.d * cosX - matrix.b * sinX, matrix.tx, matrix.ty);
        }, MatrixUtil._rawData = [ 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1 ], MatrixUtil;
    }();
    skylark.MatrixUtil = MatrixUtil;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var VertexData = function() {
        function VertexData(numVertices, premultipliedAlpha) {
            "undefined" == typeof premultipliedAlpha && (premultipliedAlpha = !1), this._numVertices = 0, 
            this._rawData = [], this._premultipliedAlpha = premultipliedAlpha, this.numVertices = numVertices;
        }
        return VertexData.prototype.clone = function(vertexID, numVertices) {
            "undefined" == typeof vertexID && (vertexID = 0), "undefined" == typeof numVertices && (numVertices = -1), 
            (0 > numVertices || vertexID + numVertices > this._numVertices) && (numVertices = this._numVertices - vertexID);
            var clone = new VertexData(0, this._premultipliedAlpha);
            return clone._numVertices = numVertices, clone._rawData = this._rawData.slice(vertexID * VertexData.ELEMENTS_PER_VERTEX, numVertices * VertexData.ELEMENTS_PER_VERTEX), 
            clone;
        }, VertexData.prototype.copyTo = function(targetData, targetVertexID, vertexID, numVertices) {
            "undefined" == typeof targetVertexID && (targetVertexID = 0), "undefined" == typeof vertexID && (vertexID = 0), 
            "undefined" == typeof numVertices && (numVertices = -1), (0 > numVertices || vertexID + numVertices > this._numVertices) && (numVertices = this._numVertices - vertexID);
            for (var targetRawData = targetData._rawData, targetIndex = targetVertexID * VertexData.ELEMENTS_PER_VERTEX, sourceIndex = vertexID * VertexData.ELEMENTS_PER_VERTEX, dataLength = numVertices * VertexData.ELEMENTS_PER_VERTEX, i = sourceIndex; dataLength > i; ++i) targetRawData[Number(targetIndex++)] = this._rawData[i];
        }, VertexData.prototype.append = function(data) {
            for (var targetIndex = this._rawData.length, rawData = data._rawData, rawDataLength = rawData.length, i = 0; rawDataLength > i; ++i) this._rawData[Number(targetIndex++)] = rawData[i];
            this._numVertices += data.numVertices;
        }, VertexData.prototype.setPosition = function(vertexID, x, y) {
            var offset = this.getOffset(vertexID) + VertexData.POSITION_OFFSET;
            this._rawData[offset] = x, this._rawData[Number(offset + 1)] = y;
        }, VertexData.prototype.getPosition = function(vertexID, position) {
            var offset = this.getOffset(vertexID) + VertexData.POSITION_OFFSET;
            position.x = this._rawData[offset], position.y = this._rawData[Number(offset + 1)];
        }, VertexData.prototype.setColor = function(vertexID, color) {
            var offset = this.getOffset(vertexID) + VertexData.COLOR_OFFSET, multiplier = this._premultipliedAlpha ? this._rawData[Number(offset + 3)] : 1;
            this._rawData[offset] = (255 & color >> 16) / 255 * multiplier, this._rawData[Number(offset + 1)] = (255 & color >> 8) / 255 * multiplier, 
            this._rawData[Number(offset + 2)] = (255 & color) / 255 * multiplier;
        }, VertexData.prototype.getColor = function(vertexID) {
            var offset = this.getOffset(vertexID) + VertexData.COLOR_OFFSET, divisor = this._premultipliedAlpha ? this._rawData[Number(offset + 3)] : 1;
            if (0 == divisor) return 0;
            var red = this._rawData[offset] / divisor, green = this._rawData[Number(offset + 1)] / divisor, blue = this._rawData[Number(offset + 2)] / divisor;
            return Number(255 * red) << 16 | Number(255 * green) << 8 | Number(255 * blue);
        }, VertexData.prototype.setAlpha = function(vertexID, alpha) {
            var offset = this.getOffset(vertexID) + VertexData.COLOR_OFFSET + 3;
            if (this._premultipliedAlpha) {
                .001 > alpha && (alpha = .001);
                var color = this.getColor(vertexID);
                this._rawData[offset] = alpha, this.setColor(vertexID, color);
            } else this._rawData[offset] = alpha;
        }, VertexData.prototype.getAlpha = function(vertexID) {
            var offset = this.getOffset(vertexID) + VertexData.COLOR_OFFSET + 3;
            return this._rawData[offset];
        }, VertexData.prototype.setTexCoords = function(vertexID, u, v) {
            var offset = this.getOffset(vertexID) + VertexData.TEXCOORD_OFFSET;
            this._rawData[offset] = u, this._rawData[Number(offset + 1)] = v;
        }, VertexData.prototype.getTexCoords = function(vertexID, texCoords) {
            var offset = this.getOffset(vertexID) + VertexData.TEXCOORD_OFFSET;
            texCoords.x = this._rawData[offset], texCoords.y = this._rawData[Number(offset + 1)];
        }, VertexData.prototype.translateVertex = function(vertexID, deltaX, deltaY) {
            var offset = this.getOffset(vertexID) + VertexData.POSITION_OFFSET;
            this._rawData[offset] += deltaX, this._rawData[Number(offset + 1)] += deltaY;
        }, VertexData.prototype.transformVertex = function(vertexID, matrix, numVertices) {
            "undefined" == typeof numVertices && (numVertices = 1);
            for (var offset = this.getOffset(vertexID) + VertexData.POSITION_OFFSET, i = 0; numVertices > i; ++i) {
                var x = this._rawData[offset], y = this._rawData[Number(offset + 1)];
                this._rawData[offset] = matrix.a * x + matrix.c * y + matrix.tx, this._rawData[Number(offset + 1)] = matrix.d * y + matrix.b * x + matrix.ty, 
                offset += VertexData.ELEMENTS_PER_VERTEX;
            }
        }, VertexData.prototype.setUniformColor = function(color) {
            for (var i = 0; i < this._numVertices; ++i) this.setColor(i, color);
        }, VertexData.prototype.setUniformAlpha = function(alpha) {
            for (var i = 0; i < this._numVertices; ++i) this.setAlpha(i, alpha);
        }, VertexData.prototype.scaleAlpha = function(vertexID, alpha, numVertices) {
            if ("undefined" == typeof numVertices && (numVertices = 1), 1 != alpha) {
                (0 > numVertices || vertexID + numVertices > this._numVertices) && (numVertices = this._numVertices - vertexID);
                var i;
                if (this._premultipliedAlpha) for (i = 0; numVertices > i; ++i) this.setAlpha(vertexID + i, this.getAlpha(vertexID + i) * alpha); else {
                    var offset = this.getOffset(vertexID) + VertexData.COLOR_OFFSET + 3;
                    for (i = 0; numVertices > i; ++i) this._rawData[Number(offset + i * VertexData.ELEMENTS_PER_VERTEX)] *= alpha;
                }
            }
        }, VertexData.prototype.getOffset = function(vertexID) {
            return vertexID * VertexData.ELEMENTS_PER_VERTEX;
        }, VertexData.prototype.getBounds = function(transformationMatrix, vertexID, numVertices, resultRect) {
            "undefined" == typeof transformationMatrix && (transformationMatrix = null), "undefined" == typeof vertexID && (vertexID = 0), 
            "undefined" == typeof numVertices && (numVertices = -1), "undefined" == typeof resultRect && (resultRect = null), 
            null == resultRect && (resultRect = new skylark.Rectangle()), (0 > numVertices || vertexID + numVertices > this._numVertices) && (numVertices = this._numVertices - vertexID);
            var x, y, i, minX = Number.MAX_VALUE, maxX = -Number.MAX_VALUE, minY = Number.MAX_VALUE, maxY = -Number.MAX_VALUE, offset = this.getOffset(vertexID) + VertexData.POSITION_OFFSET;
            if (null == transformationMatrix) for (i = vertexID; numVertices > i; ++i) x = this._rawData[offset], 
            y = this._rawData[Number(offset + 1)], offset += VertexData.ELEMENTS_PER_VERTEX, 
            minX = x > minX ? minX : x, maxX = maxX > x ? maxX : x, minY = y > minY ? minY : y, 
            maxY = maxY > y ? maxY : y; else for (i = vertexID; numVertices > i; ++i) x = this._rawData[offset], 
            y = this._rawData[Number(offset + 1)], offset += VertexData.ELEMENTS_PER_VERTEX, 
            skylark.MatrixUtil.transformCoords(transformationMatrix, x, y, VertexData._helperPoint), 
            minX = minX < VertexData._helperPoint.x ? minX : VertexData._helperPoint.x, maxX = maxX > VertexData._helperPoint.x ? maxX : VertexData._helperPoint.x, 
            minY = minY < VertexData._helperPoint.y ? minY : VertexData._helperPoint.y, maxY = maxY > VertexData._helperPoint.y ? maxY : VertexData._helperPoint.y;
            return resultRect.setTo(minX, minY, maxX - minX, maxY - minY), resultRect;
        }, Object.defineProperty(VertexData.prototype, "tinted", {
            get: function() {
                for (var offset = VertexData.COLOR_OFFSET, i = 0; i < this._numVertices; ++i) {
                    for (var j = 0; 4 > j; ++j) if (1 != this._rawData[Number(offset + j)]) return !0;
                    offset += VertexData.ELEMENTS_PER_VERTEX;
                }
                return !1;
            },
            enumerable: !0,
            configurable: !0
        }), VertexData.prototype.setPremultipliedAlpha = function(value, updateData) {
            if ("undefined" == typeof updateData && (updateData = !0), value != this._premultipliedAlpha) {
                if (updateData) for (var dataLength = this._numVertices * VertexData.ELEMENTS_PER_VERTEX, i = VertexData.COLOR_OFFSET; dataLength > i; i += VertexData.ELEMENTS_PER_VERTEX) {
                    var alpha = this._rawData[Number(i + 3)], divisor = this._premultipliedAlpha ? alpha : 1, multiplier = value ? alpha : 1;
                    0 != divisor && (this._rawData[i] = this._rawData[i] / divisor * multiplier, this._rawData[Number(i + 1)] = this._rawData[Number(i + 1)] / divisor * multiplier, 
                    this._rawData[Number(i + 2)] = this._rawData[Number(i + 2)] / divisor * multiplier);
                }
                this._premultipliedAlpha = value;
            }
        }, Object.defineProperty(VertexData.prototype, "premultipliedAlpha", {
            get: function() {
                return this._premultipliedAlpha;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(VertexData.prototype, "numVertices", {
            get: function() {
                return this._numVertices;
            },
            set: function(value) {
                var i, delta = value - this._numVertices;
                for (i = 0; delta > i; ++i) this._rawData.push(0, 0, 0, 0, 0, 1, 0, 0);
                for (i = 0; i < -(delta * VertexData.ELEMENTS_PER_VERTEX); ++i) this._rawData.pop();
                this._numVertices = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(VertexData.prototype, "rawData", {
            get: function() {
                return this._rawData;
            },
            enumerable: !0,
            configurable: !0
        }), VertexData.ELEMENTS_PER_VERTEX = 8, VertexData.POSITION_OFFSET = 0, VertexData.COLOR_OFFSET = 2, 
        VertexData.TEXCOORD_OFFSET = 6, VertexData._helperPoint = new skylark.Point(), VertexData;
    }();
    skylark.VertexData = VertexData;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var RectangleUtil = function() {
        function RectangleUtil() {
            throw new skylark.AbstractClassError();
        }
        return RectangleUtil.intersect = function(rect1, rect2, resultRect) {
            "undefined" == typeof resultRect && (resultRect = null), null == resultRect && (resultRect = new skylark.Rectangle());
            var left = Math.max(rect1.x, rect2.x), right = Math.min(rect1.x + rect1.width, rect2.x + rect2.width), top = Math.max(rect1.y, rect2.y), bottom = Math.min(rect1.y + rect1.height, rect2.y + rect2.height);
            return left > right || top > bottom ? resultRect.setEmpty() : resultRect.setTo(left, top, right - left, bottom - top), 
            resultRect;
        }, RectangleUtil.fit = function(rectangle, into, scaleMode, pixelPerfect, resultRect) {
            if ("undefined" == typeof scaleMode && (scaleMode = "showAll"), "undefined" == typeof pixelPerfect && (pixelPerfect = !1), 
            "undefined" == typeof resultRect && (resultRect = null), !skylark.ScaleMode.isValid(scaleMode)) throw new skylark.ArgumentError("Invalid scaleMode: " + scaleMode);
            null == resultRect && (resultRect = new skylark.Rectangle());
            var width = rectangle.width, height = rectangle.height, factorX = into.width / width, factorY = into.height / height, factor = 1;
            return scaleMode == skylark.ScaleMode.SHOW_ALL ? (factor = factorY > factorX ? factorX : factorY, 
            pixelPerfect && (factor = RectangleUtil.nextSuitableScaleFactor(factor, !1))) : scaleMode == skylark.ScaleMode.NO_BORDER && (factor = factorX > factorY ? factorX : factorY, 
            pixelPerfect && (factor = RectangleUtil.nextSuitableScaleFactor(factor, !0))), width *= factor, 
            height *= factor, resultRect.setTo(into.x + (into.width - width) / 2, into.y + (into.height - height) / 2, width, height), 
            resultRect;
        }, RectangleUtil.nextSuitableScaleFactor = function(factor, up) {
            var divisor = 1;
            if (up) {
                if (factor >= .5) return Math.ceil(factor);
                for (;1 / (divisor + 1) > factor; ) ++divisor;
            } else {
                if (factor >= 1) return Math.floor(factor);
                for (;1 / divisor > factor; ) ++divisor;
            }
            return 1 / divisor;
        }, RectangleUtil;
    }();
    skylark.RectangleUtil = RectangleUtil;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var ScaleMode = function() {
        function ScaleMode() {
            throw new skylark.AbstractClassError();
        }
        return ScaleMode.isValid = function(scaleMode) {
            return scaleMode == ScaleMode.NONE || scaleMode == ScaleMode.NO_BORDER || scaleMode == ScaleMode.SHOW_ALL;
        }, ScaleMode.NONE = "none", ScaleMode.NO_BORDER = "noBorder", ScaleMode.SHOW_ALL = "showAll", 
        ScaleMode;
    }();
    skylark.ScaleMode = ScaleMode;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var MathUtil = function() {
        function MathUtil() {}
        return MathUtil.rad2deg = function(rad) {
            return 180 * (rad / Math.PI);
        }, MathUtil.deg2rad = function(deg) {
            return deg / 180 * Math.PI;
        }, MathUtil.getNextPowerOfTwo = function(number) {
            if (number > 0 && 0 == (number & number - 1)) return number;
            for (var result = 1; number > result; ) result <<= 1;
            return result;
        }, MathUtil;
    }();
    skylark.MathUtil = MathUtil;
}(skylark || (skylark = {})), function(root) {
    function tinycolor(color, opts) {
        if (color = color ? color : "", opts = opts || {}, "object" == typeof color && color.hasOwnProperty("_tc_id")) return color;
        var rgb = inputToRGB(color), r = rgb.r, g = rgb.g, b = rgb.b, a = rgb.a, roundA = mathRound(100 * a) / 100, format = opts.format || rgb.format;
        return 1 > r && (r = mathRound(r)), 1 > g && (g = mathRound(g)), 1 > b && (b = mathRound(b)), 
        {
            ok: rgb.ok,
            format: format,
            _tc_id: tinyCounter++,
            alpha: a,
            red: r,
            green: g,
            blue: b,
            toHsv: function() {
                var hsv = rgbToHsv(r, g, b);
                return {
                    h: 360 * hsv.h,
                    s: hsv.s,
                    v: hsv.v,
                    a: a
                };
            },
            toHsvString: function() {
                var hsv = rgbToHsv(r, g, b), h = mathRound(360 * hsv.h), s = mathRound(100 * hsv.s), v = mathRound(100 * hsv.v);
                return 1 == a ? "hsv(" + h + ", " + s + "%, " + v + "%)" : "hsva(" + h + ", " + s + "%, " + v + "%, " + roundA + ")";
            },
            toHsl: function() {
                var hsl = rgbToHsl(r, g, b);
                return {
                    h: 360 * hsl.h,
                    s: hsl.s,
                    l: hsl.l,
                    a: a
                };
            },
            toHslString: function() {
                var hsl = rgbToHsl(r, g, b), h = mathRound(360 * hsl.h), s = mathRound(100 * hsl.s), l = mathRound(100 * hsl.l);
                return 1 == a ? "hsl(" + h + ", " + s + "%, " + l + "%)" : "hsla(" + h + ", " + s + "%, " + l + "%, " + roundA + ")";
            },
            toHex: function(allow3Char) {
                return rgbToHex(r, g, b, allow3Char);
            },
            toHexString: function(allow3Char) {
                return "#" + rgbToHex(r, g, b, allow3Char);
            },
            toRgb: function() {
                return {
                    r: mathRound(r),
                    g: mathRound(g),
                    b: mathRound(b),
                    a: a
                };
            },
            toRgbString: function() {
                return 1 == a ? "rgb(" + mathRound(r) + ", " + mathRound(g) + ", " + mathRound(b) + ")" : "rgba(" + mathRound(r) + ", " + mathRound(g) + ", " + mathRound(b) + ", " + roundA + ")";
            },
            toPercentageRgb: function() {
                return {
                    r: mathRound(100 * bound01(r, 255)) + "%",
                    g: mathRound(100 * bound01(g, 255)) + "%",
                    b: mathRound(100 * bound01(b, 255)) + "%",
                    a: a
                };
            },
            toPercentageRgbString: function() {
                return 1 == a ? "rgb(" + mathRound(100 * bound01(r, 255)) + "%, " + mathRound(100 * bound01(g, 255)) + "%, " + mathRound(100 * bound01(b, 255)) + "%)" : "rgba(" + mathRound(100 * bound01(r, 255)) + "%, " + mathRound(100 * bound01(g, 255)) + "%, " + mathRound(100 * bound01(b, 255)) + "%, " + roundA + ")";
            },
            toName: function() {
                return 0 === a ? "transparent" : hexNames[rgbToHex(r, g, b, !0)] || !1;
            },
            toFilter: function(secondColor) {
                var hex = rgbToHex(r, g, b, !1), secondHex = hex, alphaHex = Math.round(255 * parseFloat(a)).toString(16), secondAlphaHex = alphaHex, gradientType = opts && opts.gradientType ? "GradientType = 1, " : "";
                if (secondColor) {
                    var s = tinycolor(secondColor, !1);
                    secondHex = s.toHex(), secondAlphaHex = Math.round(255 * parseFloat(s.alpha)).toString(16);
                }
                return "progid:DXImageTransform.Microsoft.gradient(" + gradientType + "startColorstr=#" + pad2(alphaHex) + hex + ",endColorstr=#" + pad2(secondAlphaHex) + secondHex + ")";
            },
            toString: function(format) {
                format = format || this.format;
                var formattedString = !1;
                return "rgb" === format && (formattedString = this.toRgbString()), "prgb" === format && (formattedString = this.toPercentageRgbString()), 
                ("hex" === format || "hex6" === format) && (formattedString = this.toHexString()), 
                "hex3" === format && (formattedString = this.toHexString(!0)), "name" === format && (formattedString = this.toName()), 
                "hsl" === format && (formattedString = this.toHslString()), "hsv" === format && (formattedString = this.toHsvString()), 
                formattedString || this.toHexString();
            }
        };
    }
    function inputToRGB(color) {
        var rgb = {
            r: 0,
            g: 0,
            b: 0
        }, a = 1, ok = !1, format = !1;
        return "string" == typeof color && (color = stringInputToObject(color)), "number" == typeof color && (color = numberInputToObject(color)), 
        "object" == typeof color && (color.hasOwnProperty("r") && color.hasOwnProperty("g") && color.hasOwnProperty("b") ? (rgb = rgbToRgb(color.r, color.g, color.b), 
        ok = !0, format = "%" === String(color.r).substr(-1) ? "prgb" : "rgb") : color.hasOwnProperty("h") && color.hasOwnProperty("s") && color.hasOwnProperty("v") ? (color.s = convertToPercentage(color.s), 
        color.v = convertToPercentage(color.v), rgb = hsvToRgb(color.h, color.s, color.v), 
        ok = !0, format = "hsv") : color.hasOwnProperty("h") && color.hasOwnProperty("s") && color.hasOwnProperty("l") && (color.s = convertToPercentage(color.s), 
        color.l = convertToPercentage(color.l), rgb = hslToRgb(color.h, color.s, color.l), 
        ok = !0, format = "hsl"), color.hasOwnProperty("a") && (a = color.a)), a = parseFloat(a), 
        (isNaN(a) || 0 > a || a > 1) && (a = 1), {
            ok: ok,
            format: color.format || format,
            r: mathMin(255, mathMax(rgb.r, 0)),
            g: mathMin(255, mathMax(rgb.g, 0)),
            b: mathMin(255, mathMax(rgb.b, 0)),
            a: a
        };
    }
    function rgbToRgb(r, g, b) {
        return {
            r: 255 * bound01(r, 255),
            g: 255 * bound01(g, 255),
            b: 255 * bound01(b, 255)
        };
    }
    function rgbToHsl(r, g, b) {
        r = bound01(r, 255), g = bound01(g, 255), b = bound01(b, 255);
        var h, s, max = mathMax(r, g, b), min = mathMin(r, g, b), l = (max + min) / 2;
        if (max == min) h = s = 0; else {
            var d = max - min;
            switch (s = l > .5 ? d / (2 - max - min) : d / (max + min), max) {
              case r:
                h = (g - b) / d + (b > g ? 6 : 0);
                break;

              case g:
                h = (b - r) / d + 2;
                break;

              case b:
                h = (r - g) / d + 4;
            }
            h /= 6;
        }
        return {
            h: h,
            s: s,
            l: l
        };
    }
    function hslToRgb(h, s, l) {
        function hue2rgb(p, q, t) {
            return 0 > t && (t += 1), t > 1 && (t -= 1), 1 / 6 > t ? p + 6 * (q - p) * t : .5 > t ? q : 2 / 3 > t ? p + 6 * (q - p) * (2 / 3 - t) : p;
        }
        var r, g, b;
        if (h = bound01(h, 360), s = bound01(s, 100), l = bound01(l, 100), 0 === s) r = g = b = l; else {
            var q = .5 > l ? l * (1 + s) : l + s - l * s, p = 2 * l - q;
            r = hue2rgb(p, q, h + 1 / 3), g = hue2rgb(p, q, h), b = hue2rgb(p, q, h - 1 / 3);
        }
        return {
            r: 255 * r,
            g: 255 * g,
            b: 255 * b
        };
    }
    function rgbToHsv(r, g, b) {
        r = bound01(r, 255), g = bound01(g, 255), b = bound01(b, 255);
        var h, s, max = mathMax(r, g, b), min = mathMin(r, g, b), v = max, d = max - min;
        if (s = 0 === max ? 0 : d / max, max == min) h = 0; else {
            switch (max) {
              case r:
                h = (g - b) / d + (b > g ? 6 : 0);
                break;

              case g:
                h = (b - r) / d + 2;
                break;

              case b:
                h = (r - g) / d + 4;
            }
            h /= 6;
        }
        return {
            h: h,
            s: s,
            v: v
        };
    }
    function hsvToRgb(h, s, v) {
        h = 6 * bound01(h, 360), s = bound01(s, 100), v = bound01(v, 100);
        var i = math.floor(h), f = h - i, p = v * (1 - s), q = v * (1 - f * s), t = v * (1 - (1 - f) * s), mod = i % 6, r = [ v, q, p, p, t, v ][mod], g = [ t, v, v, q, p, p ][mod], b = [ p, p, t, v, v, q ][mod];
        return {
            r: 255 * r,
            g: 255 * g,
            b: 255 * b
        };
    }
    function rgbToHex(r, g, b, allow3Char) {
        var hex = [ pad2(mathRound(r).toString(16)), pad2(mathRound(g).toString(16)), pad2(mathRound(b).toString(16)) ];
        return allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) ? hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) : hex.join("");
    }
    function flip(o) {
        var flipped = {};
        for (var i in o) o.hasOwnProperty(i) && (flipped[o[i]] = i);
        return flipped;
    }
    function bound01(n, max) {
        isOnePointZero(n) && (n = "100%");
        var processPercent = isPercentage(n);
        return n = mathMin(max, mathMax(0, parseFloat(n))), processPercent && (n = parseInt(n * max, 10) / 100), 
        math.abs(n - max) < 1e-6 ? 1 : n % max / parseFloat(max);
    }
    function parseHex(val) {
        return parseInt(val, 16);
    }
    function isOnePointZero(n) {
        return "string" == typeof n && -1 != n.indexOf(".") && 1 === parseFloat(n);
    }
    function isPercentage(n) {
        return "string" == typeof n && -1 != n.indexOf("%");
    }
    function pad2(c) {
        return 1 == c.length ? "0" + c : "" + c;
    }
    function convertToPercentage(n) {
        return 1 >= n && (n = 100 * n + "%"), n;
    }
    function stringInputToObject(color) {
        color = color.replace(trimLeft, "").replace(trimRight, "").toLowerCase();
        var named = !1;
        if (names[color]) color = names[color], named = !0; else if ("transparent" == color) return {
            r: 0,
            g: 0,
            b: 0,
            a: 0,
            format: "name"
        };
        var match;
        return (match = matchers.rgb.exec(color)) ? {
            r: match[1],
            g: match[2],
            b: match[3]
        } : (match = matchers.rgba.exec(color)) ? {
            r: match[1],
            g: match[2],
            b: match[3],
            a: match[4]
        } : (match = matchers.hsl.exec(color)) ? {
            h: match[1],
            s: match[2],
            l: match[3]
        } : (match = matchers.hsla.exec(color)) ? {
            h: match[1],
            s: match[2],
            l: match[3],
            a: match[4]
        } : (match = matchers.hsv.exec(color)) ? {
            h: match[1],
            s: match[2],
            v: match[3]
        } : (match = matchers.hex6.exec(color)) ? {
            r: parseHex(match[1]),
            g: parseHex(match[2]),
            b: parseHex(match[3]),
            format: named ? "name" : "hex"
        } : (match = matchers.hex3.exec(color)) ? {
            r: parseHex(match[1] + "" + match[1]),
            g: parseHex(match[2] + "" + match[2]),
            b: parseHex(match[3] + "" + match[3]),
            format: named ? "name" : "hex"
        } : !1;
    }
    function numberInputToObject(color) {
        return {
            r: 255 & color >> 16,
            g: 255 & color >> 8,
            b: 255 & color
        };
    }
    var trimLeft = /^[\s,#]+/, trimRight = /\s+$/, tinyCounter = 0, math = Math, mathRound = math.round, mathMin = math.min, mathMax = math.max;
    math.random, tinycolor.equals = function(color1, color2) {
        return color1 && color2 ? tinycolor(color1, !1).toRgbString() == tinycolor(color2, !1).toRgbString() : !1;
    };
    var names = tinycolor.names = {
        aliceblue: "f0f8ff",
        antiquewhite: "faebd7",
        aqua: "0ff",
        aquamarine: "7fffd4",
        azure: "f0ffff",
        beige: "f5f5dc",
        bisque: "ffe4c4",
        black: "000",
        blanchedalmond: "ffebcd",
        blue: "00f",
        blueviolet: "8a2be2",
        brown: "a52a2a",
        burlywood: "deb887",
        burntsienna: "ea7e5d",
        cadetblue: "5f9ea0",
        chartreuse: "7fff00",
        chocolate: "d2691e",
        coral: "ff7f50",
        cornflowerblue: "6495ed",
        cornsilk: "fff8dc",
        crimson: "dc143c",
        cyan: "0ff",
        darkblue: "00008b",
        darkcyan: "008b8b",
        darkgoldenrod: "b8860b",
        darkgray: "a9a9a9",
        darkgreen: "006400",
        darkgrey: "a9a9a9",
        darkkhaki: "bdb76b",
        darkmagenta: "8b008b",
        darkolivegreen: "556b2f",
        darkorange: "ff8c00",
        darkorchid: "9932cc",
        darkred: "8b0000",
        darksalmon: "e9967a",
        darkseagreen: "8fbc8f",
        darkslateblue: "483d8b",
        darkslategray: "2f4f4f",
        darkslategrey: "2f4f4f",
        darkturquoise: "00ced1",
        darkviolet: "9400d3",
        deeppink: "ff1493",
        deepskyblue: "00bfff",
        dimgray: "696969",
        dimgrey: "696969",
        dodgerblue: "1e90ff",
        firebrick: "b22222",
        floralwhite: "fffaf0",
        forestgreen: "228b22",
        fuchsia: "f0f",
        gainsboro: "dcdcdc",
        ghostwhite: "f8f8ff",
        gold: "ffd700",
        goldenrod: "daa520",
        gray: "808080",
        green: "008000",
        greenyellow: "adff2f",
        grey: "808080",
        honeydew: "f0fff0",
        hotpink: "ff69b4",
        indianred: "cd5c5c",
        indigo: "4b0082",
        ivory: "fffff0",
        khaki: "f0e68c",
        lavender: "e6e6fa",
        lavenderblush: "fff0f5",
        lawngreen: "7cfc00",
        lemonchiffon: "fffacd",
        lightblue: "add8e6",
        lightcoral: "f08080",
        lightcyan: "e0ffff",
        lightgoldenrodyellow: "fafad2",
        lightgray: "d3d3d3",
        lightgreen: "90ee90",
        lightgrey: "d3d3d3",
        lightpink: "ffb6c1",
        lightsalmon: "ffa07a",
        lightseagreen: "20b2aa",
        lightskyblue: "87cefa",
        lightslategray: "789",
        lightslategrey: "789",
        lightsteelblue: "b0c4de",
        lightyellow: "ffffe0",
        lime: "0f0",
        limegreen: "32cd32",
        linen: "faf0e6",
        magenta: "f0f",
        maroon: "800000",
        mediumaquamarine: "66cdaa",
        mediumblue: "0000cd",
        mediumorchid: "ba55d3",
        mediumpurple: "9370db",
        mediumseagreen: "3cb371",
        mediumslateblue: "7b68ee",
        mediumspringgreen: "00fa9a",
        mediumturquoise: "48d1cc",
        mediumvioletred: "c71585",
        midnightblue: "191970",
        mintcream: "f5fffa",
        mistyrose: "ffe4e1",
        moccasin: "ffe4b5",
        navajowhite: "ffdead",
        navy: "000080",
        oldlace: "fdf5e6",
        olive: "808000",
        olivedrab: "6b8e23",
        orange: "ffa500",
        orangered: "ff4500",
        orchid: "da70d6",
        palegoldenrod: "eee8aa",
        palegreen: "98fb98",
        paleturquoise: "afeeee",
        palevioletred: "db7093",
        papayawhip: "ffefd5",
        peachpuff: "ffdab9",
        peru: "cd853f",
        pink: "ffc0cb",
        plum: "dda0dd",
        powderblue: "b0e0e6",
        purple: "800080",
        red: "f00",
        rosybrown: "bc8f8f",
        royalblue: "4169e1",
        saddlebrown: "8b4513",
        salmon: "fa8072",
        sandybrown: "f4a460",
        seagreen: "2e8b57",
        seashell: "fff5ee",
        sienna: "a0522d",
        silver: "c0c0c0",
        skyblue: "87ceeb",
        slateblue: "6a5acd",
        slategray: "708090",
        slategrey: "708090",
        snow: "fffafa",
        springgreen: "00ff7f",
        steelblue: "4682b4",
        tan: "d2b48c",
        teal: "008080",
        thistle: "d8bfd8",
        tomato: "ff6347",
        turquoise: "40e0d0",
        violet: "ee82ee",
        wheat: "f5deb3",
        white: "fff",
        whitesmoke: "f5f5f5",
        yellow: "ff0",
        yellowgreen: "9acd32"
    }, hexNames = tinycolor.hexNames = flip(names), matchers = function() {
        var CSS_INTEGER = "[-\\+]?\\d+%?", CSS_NUMBER = "[-\\+]?\\d*\\.\\d+%?", CSS_UNIT = "(?:" + CSS_NUMBER + ")|(?:" + CSS_INTEGER + ")", PERMISSIVE_MATCH3 = "[\\s|\\(]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")\\s*\\)?", PERMISSIVE_MATCH4 = "[\\s|\\(]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")\\s*\\)?";
        return {
            rgb: new RegExp("rgb" + PERMISSIVE_MATCH3),
            rgba: new RegExp("rgba" + PERMISSIVE_MATCH4),
            hsl: new RegExp("hsl" + PERMISSIVE_MATCH3),
            hsla: new RegExp("hsla" + PERMISSIVE_MATCH4),
            hsv: new RegExp("hsv" + PERMISSIVE_MATCH3),
            hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
            hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/
        };
    }();
    root.TinyColor = tinycolor;
}(skylark);

var skylark;

!function(skylark) {
    var Color = function() {
        function Color() {
            throw new skylark.AbstractClassError();
        }
        return Color.getAlpha = function(color) {
            return 255 & color >> 24;
        }, Color.getRed = function(color) {
            return 255 & color >> 16;
        }, Color.getGreen = function(color) {
            return 255 & color >> 8;
        }, Color.getBlue = function(color) {
            return 255 & color;
        }, Color.rgb = function(red, green, blue) {
            return red << 16 | green << 8 | blue;
        }, Color.argb = function(alpha, red, green, blue) {
            return alpha << 24 | red << 16 | green << 8 | blue;
        }, Color.fromString = function(cssString) {
            var result = skylark.TinyColor(cssString);
            if (!result.ok) throw new skylark.ArgumentError("Color format mismatch: " + cssString);
            return 1 === result.alpha ? Color.rgb(result.red, result.green, result.blue) : Color.argb(result.alpha, result.red, result.green, result.blue);
        }, Color.toHexString = function(rgb) {
            return skylark.TinyColor(rgb).toHexString();
        }, Color.WHITE = 16777215, Color.SILVER = 12632256, Color.GRAY = 8421504, Color.BLACK = 0, 
        Color.RED = 16711680, Color.MAROON = 8388608, Color.YELLOW = 16776960, Color.OLIVE = 8421376, 
        Color.LIME = 65280, Color.GREEN = 32768, Color.AQUA = 65535, Color.TEAL = 32896, 
        Color.BLUE = 255, Color.NAVY = 128, Color.FUCHSIA = 16711935, Color.PURPLE = 8388736, 
        Color;
    }();
    skylark.Color = Color;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var HAlign = function() {
        function HAlign() {
            throw new skylark.AbstractClassError();
        }
        return HAlign.isValid = function(hAlign) {
            return hAlign == HAlign.LEFT || hAlign == HAlign.CENTER || hAlign == HAlign.RIGHT;
        }, HAlign.LEFT = "left", HAlign.CENTER = "center", HAlign.RIGHT = "right", HAlign;
    }();
    skylark.HAlign = HAlign;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var VAlign = function() {
        function VAlign() {
            throw new skylark.AbstractClassError();
        }
        return VAlign.isValid = function(vAlign) {
            return vAlign == VAlign.TOP || vAlign == VAlign.CENTER || vAlign == VAlign.BOTTOM;
        }, VAlign.TOP = "top", VAlign.CENTER = "middle", VAlign.MIDDLE = "middle", VAlign.BOTTOM = "bottom", 
        VAlign;
    }();
    skylark.VAlign = VAlign;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var BitmapData = function() {
        function BitmapData(width, height, a, b) {
            var bytes, transparent = !0, fillColor = 4294967295;
            if (Array.isArray(a)) {
                if (bytes = a, bytes.length !== width * height) throw new skylark.ArgumentError("Number of pixels in ByteArray does not match width*height");
            } else {
                "undefined" != typeof a && (transparent = !!a), "undefined" != typeof b && (fillColor = b);
                var length = width * height;
                bytes = [];
                for (var i = 0; length > i; i++) bytes.push(fillColor);
            }
            this._width = width, this._height = height, this._bytes = bytes;
        }
        return BitmapData.toDataURL = function(image) {
            var canvas;
            return image instanceof CanvasRenderingContext2D && null != image.canvas ? canvas = image.canvas : image instanceof HTMLCanvasElement ? canvas = image : (canvas = skylark.Skylark.getHelperCanvas(image.width, image.height), 
            canvas.getContext("2d").drawImage(image, 0, 0)), canvas.toDataURL();
        }, BitmapData.prototype.getPixel32 = function(x, y) {
            return this._bytes[y * this._width + x];
        }, Object.defineProperty(BitmapData.prototype, "bytes", {
            get: function() {
                return this._bytes;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(BitmapData.prototype, "width", {
            get: function() {
                return this._width;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(BitmapData.prototype, "height", {
            get: function() {
                return this._height;
            },
            enumerable: !0,
            configurable: !0
        }), BitmapData.prototype.dispose = function() {
            this._bytes = null;
        }, BitmapData.prototype.asUrl = function() {
            for (var rows = [], height = this._height, width = this._width, bytes = this._bytes, r = 0; height > r; r++) {
                for (var start = r * width, end = (r + 1) * width, row = [], i = start; end > i; i++) {
                    var px = [ skylark.Color.getRed(bytes[i]), skylark.Color.getGreen(bytes[i]), skylark.Color.getBlue(bytes[i]) ];
                    row.push(px);
                }
                rows.push(row);
            }
            return skylark.Bitmap.create(rows, 1);
        }, BitmapData;
    }();
    skylark.BitmapData = BitmapData;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var AssetManager = function(_super) {
        function AssetManager(scaleFactor, useMipmaps) {
            "undefined" == typeof scaleFactor && (scaleFactor = 1), "undefined" == typeof useMipmaps && (useMipmaps = !1), 
            _super.call(this), this.SUPPORTED_EXTENSIONS = [ "png", "jpg", "jpeg", "atf", "mp3", "xml", "fnt" ], 
            this._verbose = !1, this._scaleFactor = scaleFactor, this._useMipMaps = useMipmaps, 
            this._textures = {}, this._atlases = {}, this._sounds = {};
        }
        return __extends(AssetManager, _super), AssetManager.prototype.dispose = function() {
            var key, textures = this._textures, atlases = this._atlases;
            for (key in textures) textures.hasOwnProperty(key) && (textures[key].dispose(), 
            delete textures[key]);
            for (key in atlases) atlases.hasOwnProperty(key) && (atlases[key].dispose(), delete atlases[key]);
        }, AssetManager.prototype.getTexture = function(name) {
            var textures = this._textures;
            if (name in textures) return textures[name];
            var atlases = this._atlases;
            for (var key in atlases) if (atlases.hasOwnProperty(key)) {
                var texture = atlases[key].getTexture(name);
                if (texture) return texture;
            }
            return null;
        }, AssetManager.prototype.getTextures = function(a, result) {
            var names, prefix;
            Array.isArray(a) ? names = a : (prefix = a, names = this.getTextureNames(prefix, AssetManager._names)), 
            null == result && (result = []);
            for (var i = 0; i < names.length; i++) result.push(this.getTexture(names[i]));
            return AssetManager._names.length = 0, result;
        }, AssetManager.prototype.getTextureNames = function(prefix, result) {
            "undefined" == typeof prefix && (prefix = ""), "undefined" == typeof result && (result = null), 
            null == result && (result = []);
            var key, textures = this._textures;
            for (key in textures) textures.hasOwnProperty(key) && 0 == key.indexOf(prefix) && result.push(key);
            var atlases = this._atlases;
            for (key in atlases) atlases.hasOwnProperty(key) && atlases[key].getNames(prefix, result);
            return skylark.StringUtil.sortArray(result), result;
        }, AssetManager.prototype.getTextureAtlas = function(name) {
            return this._atlases[name];
        }, AssetManager.prototype.getSound = function(name) {
            return this._sounds[name];
        }, AssetManager.prototype.getSoundNames = function(prefix) {
            "undefined" == typeof prefix && (prefix = "");
            var names = [], sounds = this._sounds;
            for (var name in sounds) sounds.hasOwnProperty(name) && 0 == name.indexOf(prefix) && names.push(name);
            return skylark.StringUtil.sortArray(names);
        }, AssetManager.prototype.playSound = function(name, startTime, loops, transform) {
            return "undefined" == typeof startTime && (startTime = 0), "undefined" == typeof loops && (loops = 0), 
            "undefined" == typeof transform && (transform = null), name in this._sounds ? this.getSound(name).play(startTime, loops, transform) : null;
        }, AssetManager.prototype.addTexture = function(name, texture) {
            this._verbose && this.log("Adding texture '" + name + "'");
            var textures = this._textures;
            if (name in textures) throw new Error("Duplicate texture name: " + name);
            textures[name] = texture;
        }, AssetManager.prototype.addTextureAtlas = function(name, atlas) {
            this._verbose && this.log("Adding texture atlas '" + name + "'");
            var atlases = this._atlases;
            if (name in atlases) throw new Error("Duplicate texture atlas name: " + name);
            atlases[name] = atlas;
        }, AssetManager.prototype.addSound = function(name, sound) {
            this._verbose && this.log("Adding sound '" + name + "'");
            var sounds = this._sounds;
            if (name in sounds) throw new Error("Duplicate sound name: " + name);
            sounds[name] = sound;
        }, AssetManager.prototype.removeTexture = function(name, dispose) {
            "undefined" == typeof dispose && (dispose = !0);
            var texture, textures = this._textures;
            dispose && (texture = textures[name]) && texture.dispose(), delete textures[name];
        }, AssetManager.prototype.removeTextureAtlas = function(name, dispose) {
            "undefined" == typeof dispose && (dispose = !0);
            var atlas, atlases = this._atlases;
            dispose && (atlas = atlases[name]) && atlas.dispose(), delete atlases[name];
        }, AssetManager.prototype.removeSound = function(name) {
            delete this._sounds[name];
        }, AssetManager.prototype.purge = function() {
            var key, textures = this._textures;
            for (key in textures) textures.hasOwnProperty(key) && textures[key].dispose();
            var atlases = this._atlases;
            for (key in atlases) atlases.hasOwnProperty(key) && atlases[key].dispose();
            this._textures = {}, this._atlases = {}, this._sounds = {};
        }, AssetManager.prototype.enqueue = function() {
            for (var rawAssets = [], _i = 0; _i < arguments.length - 0; _i++) rawAssets[_i] = arguments[_i + 0];
            throw new skylark.AbstractMethodError();
        }, AssetManager.prototype.loadQueue = function() {
            throw new skylark.AbstractMethodError();
        }, AssetManager.prototype.onQueueComplete = function() {
            this.dispatchEventWith(skylark.Event.COMPLETE, !1);
        }, AssetManager.prototype.processTextureAtlas = function(xml, resource, resume) {
            "undefined" == typeof resume && (resume = !1);
            var _this = this, root = AssetManager.findRootNode(xml);
            if ("TextureAtlas" !== root.nodeName) throw new skylark.ArgumentError('Provided XML document/node is not named "TextureAtlas"');
            var imagePath = root.getAttribute("imagePath"), name = this.getName(imagePath), atlasTexture = this.getTexture(name);
            if (null == atlasTexture) {
                if (resume) throw new Error("Texture for TextureAtlas is missing: " + name);
                this.addPending({
                    resume: function() {
                        _this.processTextureAtlas(xml, resource, !0);
                    }
                });
            } else this.addTextureAtlas(name, new skylark.TextureAtlas(atlasTexture, xml)), 
            this.removeTexture(name, !1);
        }, AssetManager.prototype.addPending = function(job) {
            var pending = this._pending;
            pending || (this._pending = pending = []), pending.push(job);
        }, AssetManager.prototype.processPending = function() {
            var pending = this._pending;
            if (pending) {
                this._pending = null, pending = pending.slice(0);
                for (var i = 0; i < pending.length; i++) pending[i].resume();
            }
        }, AssetManager.prototype.getName = function(name) {
            if ("string" != typeof name) throw new skylark.ArgumentError("Cannot extract name from non-String: " + name);
            var matches;
            if (matches = AssetManager._urlParseRE.exec(name), matches && matches.length >= 15 && (name = decodeURIComponent(matches[15]), 
            matches = /(.*?)(\.[\w]{1,4})?$/.exec(name), matches && matches.length)) return matches[1];
            throw new skylark.ArgumentError("Could not extract name from String '" + name + "'");
        }, AssetManager.prototype.log = function(message) {
            this._verbose && console.log("[AssetManager]", message);
        }, Object.defineProperty(AssetManager.prototype, "verbose", {
            get: function() {
                return this._verbose;
            },
            set: function(value) {
                this._verbose = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(AssetManager.prototype, "useMipMaps", {
            get: function() {
                return this._useMipMaps;
            },
            set: function(value) {
                this._useMipMaps = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(AssetManager.prototype, "scaleFactor", {
            get: function() {
                return this._scaleFactor;
            },
            set: function(value) {
                this._scaleFactor = value;
            },
            enumerable: !0,
            configurable: !0
        }), AssetManager.findRootNode = function(data) {
            if (!data || !data.hasChildNodes()) return null;
            for (var node, children = data.childNodes, i = 0; i < children.length && (node = children[i], 
            node.nodeType !== Node.ELEMENT_NODE); i++) ;
            return node;
        }, AssetManager._names = [], AssetManager._urlParseRE = /^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/, 
        AssetManager;
    }(skylark.EventDispatcher);
    skylark.AssetManager = AssetManager;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var PxLoaderAssetManager = function(_super) {
        function PxLoaderAssetManager() {
            _super.apply(this, arguments);
        }
        return __extends(PxLoaderAssetManager, _super), PxLoaderAssetManager.prototype.getLoader = function() {
            var loader = this._loader;
            return null == loader && (loader = this._loader = this.createLoader()), loader;
        }, PxLoaderAssetManager.prototype.createLoader = function() {
            return new PxLoader();
        }, PxLoaderAssetManager.prototype.enqueue = function() {
            function add(url, type) {
                if (null == url) throw new Error('Missing required parameter "url"');
                "image" === type ? loader.addImage(url) : "sound" === type ? loader.addSound(url) : "xml" === type ? loader.addXml(url) : null == type && loader.addGeneric(url);
            }
            for (var rawAssets = [], _i = 0; _i < arguments.length - 0; _i++) rawAssets[_i] = arguments[_i + 0];
            for (var loader = this.getLoader(), i = 0; i < rawAssets.length; i++) {
                var rawAsset = rawAssets[i];
                if (Array.isArray(rawAsset)) this.enqueue.apply(this, rawAsset); else if ("string" == typeof rawAsset) {
                    var type = this.getType(rawAsset);
                    add(rawAsset, type);
                } else if ("object" == typeof rawAsset) {
                    var type = this.getType(rawAsset);
                    if (null == rawAsset.url) throw new Error('Asset definition is missing required property "url"!');
                    add(rawAsset.url, type);
                } else this.log("Ignoring unsupported asset type: " + skylark.ClassUtil.getQualifiedClassName(rawAsset));
            }
        }, PxLoaderAssetManager.prototype.getType = function(url) {
            if ("object" == typeof url && url.type) return url.type;
            var type, ext = /\.(\w{1,3})$/.exec(url);
            if (null == ext || !ext.length) return null;
            switch (ext[1]) {
              case "png":
              case "jpeg":
                type = "image";
                break;

              case "mp3":
              case "ogg":
                type = "audio";
                break;

              case "xml":
                type = "xml";
            }
            return type;
        }, PxLoaderAssetManager.prototype.loadQueue = function(onProgress) {
            var _this = this, loader = this._loader;
            return this._loader ? (loader.addProgressListener(function(e) {
                e.error ? _this.onError(e) : e.loaded ? _this.onLoaded(e) : e.timeout && _this.onTimeout(e), 
                e.completedCount / e.totalCount < 1 && onProgress(e.completedCount / e.totalCount, !1);
            }), loader.addCompletionListener(function(e) {
                _this.onComplete(e), onProgress(1, !0);
            }), loader.start([ "image", "textureatlas", "xml" ]), void 0) : (onProgress(1, !0), 
            void 0);
        }, PxLoaderAssetManager.prototype.onError = function() {
            console.log("[ERROR] Resource failed!");
        }, PxLoaderAssetManager.prototype.onLoaded = function(e) {
            var resource = e.resource;
            if (resource instanceof PxLoaderXml) {
                var rootNode = resource.rootNode;
                if (!rootNode || "TextureAtlas" !== rootNode.nodeName) throw new Error('Unsupported XML content - expecting a root node "TextureAtlas" but found "' + rootNode + '"');
                this.processTextureAtlas(resource.getXml(), resource);
            } else if (resource instanceof PxLoaderImage) {
                var name = this.getName(resource.getName()), img = resource.img;
                this.addTexture(name, new skylark.ConcreteTexture(new skylark.DefaultImageSource(img)));
            }
        }, PxLoaderAssetManager.prototype.onTimeout = function() {
            console.log("[ERROR] Resource timed out!");
        }, PxLoaderAssetManager.prototype.onComplete = function() {
            this.processPending(), this.onQueueComplete();
        }, PxLoaderAssetManager;
    }(skylark.AssetManager);
    skylark.PxLoaderAssetManager = PxLoaderAssetManager;
    var PxLoaderXml = function() {
        function PxLoaderXml(name, tags, priority) {
            this._complete = !1, this._tags = [], this._name = name, this._tags = tags, this._priority = priority;
        }
        return PxLoaderXml.prototype.start = function(pxLoader) {
            function cleanup() {
                xhr.onload = null, xhr.onerror = null, xhr.onabort = null;
            }
            var _this = this;
            this._loader = pxLoader;
            var xhr = new XMLHttpRequest();
            xhr.onload = function() {
                cleanup(), _this.onLoad(xhr.responseXML);
            }, xhr.onerror = function() {
                cleanup(), _this.onError(xhr.statusText);
            }, xhr.onabort = function() {
                cleanup(), _this.onAbort();
            }, xhr.ontimeout = function() {
                cleanup(), _this.onTimeout();
            }, xhr.open("GET", this._name), xhr.send();
        }, PxLoaderXml.prototype.checkStatus = function() {
            this._complete && this._loader.onLoad(this);
        }, PxLoaderXml.prototype.getName = function() {
            return this._name;
        }, PxLoaderXml.prototype.getXml = function() {
            return this._data;
        }, PxLoaderXml.prototype.onTimeout = function() {
            this._complete ? this._loader.onLoad(this) : this._loader.onTimeout(this);
        }, PxLoaderXml.prototype.onLoad = function(data) {
            this._complete = !0, this._data = data, this._loader.onLoad(this);
        }, PxLoaderXml.prototype.onError = function() {
            this._loader.onError(this);
        }, PxLoaderXml.prototype.onAbort = function() {
            this._loader.onError(this);
        }, Object.defineProperty(PxLoaderXml.prototype, "complete", {
            get: function() {
                return this._complete;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(PxLoaderXml.prototype, "rootNode", {
            get: function() {
                return skylark.AssetManager.findRootNode(this._data);
            },
            enumerable: !0,
            configurable: !0
        }), PxLoaderXml;
    }();
    skylark.PxLoaderXml = PxLoaderXml;
}(skylark || (skylark = {})), PxLoader.prototype.addXml = function(name, tags, priority) {
    var loader = new skylark.PxLoaderXml(name, tags, priority);
    return this.add(loader), name;
};

var skylark;

!function(skylark) {
    var State = function() {
        function State() {
            this.matrix = new skylark.Matrix(), this.blendMode = null, this.parentBlendMode = null, 
            this.alpha = 1;
        }
        return State;
    }(), RenderSupport = function() {
        function RenderSupport() {
            this._projectionMatrix = new skylark.Matrix(), this._modelViewMatrix = new skylark.Matrix(), 
            this._mvpMatrix = new skylark.Matrix(), this._stateStack = [], this._stateStackSize = 0, 
            this._drawCount = 0, this._blendMode = skylark.BlendMode.NORMAL, this._parentBlendMode = null, 
            this.loadIdentity(), this.setOrthographicProjection(0, 0, 400, 300);
        }
        return RenderSupport.prototype.setOrthographicProjection = function(x, y, width, height) {
            this._projectionMatrix.setTo(2 / width, 0, 0, -2 / height, -(2 * x + width) / width, (2 * y + height) / height);
        }, RenderSupport.prototype.loadIdentity = function() {
            this._modelViewMatrix.identity();
        }, RenderSupport.prototype.translateMatrix = function(dx, dy) {
            skylark.MatrixUtil.prependTranslation(this._modelViewMatrix, dx, dy);
        }, RenderSupport.prototype.rotateMatrix = function(angle) {
            skylark.MatrixUtil.prependRotation(this._modelViewMatrix, angle);
        }, RenderSupport.prototype.scaleMatrix = function(sx, sy) {
            skylark.MatrixUtil.prependScale(this._modelViewMatrix, sx, sy);
        }, RenderSupport.prototype.prependMatrix = function(matrix) {
            skylark.MatrixUtil.prependMatrix(this._modelViewMatrix, matrix);
        }, RenderSupport.prototype.transformMatrix = function(object) {
            skylark.MatrixUtil.prependMatrix(this._modelViewMatrix, object.transformationMatrix);
        }, RenderSupport.prototype.pushState = function() {
            var state;
            this._stateStack.length < this._stateStackSize + 1 ? (state = new State(), this._stateStack.push(state), 
            this._stateStackSize++) : state = this._stateStack[this._stateStackSize++];
            var blendMode = this.blendMode;
            state.matrix.copyFrom(this._modelViewMatrix), state.alpha = this.alpha, state.blendMode = blendMode, 
            state.parentBlendMode = this.parentBlendMode, this.alpha = 1, this.parentBlendMode = blendMode, 
            this.blendMode = skylark.BlendMode.AUTO;
        }, RenderSupport.prototype.popState = function() {
            var state = this._stateStack[--this._stateStackSize];
            this._modelViewMatrix.copyFrom(state.matrix), this._alpha = state.alpha, this.blendMode = state.blendMode;
        }, RenderSupport.prototype.resetMatrix = function() {
            this._stateStackSize = 0, this.loadIdentity();
        }, RenderSupport.transformMatrixForObject = function(matrix, object) {
            skylark.MatrixUtil.prependMatrix(matrix, object.transformationMatrix);
        }, Object.defineProperty(RenderSupport.prototype, "mvpMatrix", {
            get: function() {
                return this._mvpMatrix.copyFrom(this._modelViewMatrix), this._mvpMatrix;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(RenderSupport.prototype, "modelViewMatrix", {
            get: function() {
                return this._modelViewMatrix;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(RenderSupport.prototype, "projectionMatrix", {
            get: function() {
                return this._projectionMatrix;
            },
            enumerable: !0,
            configurable: !0
        }), RenderSupport.prototype.applyBlendMode = function() {
            var context = this.context, blendMode = this.blendMode;
            null == blendMode && (blendMode = this.parentBlendMode || skylark.BlendMode.NORMAL), 
            context.globalCompositeOperation = blendMode;
        }, Object.defineProperty(RenderSupport.prototype, "blendMode", {
            get: function() {
                return this._blendMode;
            },
            set: function(value) {
                value != skylark.BlendMode.AUTO && (this._blendMode = value);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(RenderSupport.prototype, "parentBlendMode", {
            get: function() {
                return this._parentBlendMode;
            },
            set: function(value) {
                this._parentBlendMode = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(RenderSupport.prototype, "alpha", {
            get: function() {
                return this._alpha;
            },
            set: function(alpha) {
                this._alpha = alpha;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(RenderSupport.prototype, "context", {
            get: function() {
                return this._context;
            },
            set: function(context) {
                if (this._context = context, this._canvas = context.canvas, null == this._canvas) throw new skylark.ArgumentError("CanvasRenderingContext2D without a HTMLCanvas reference!");
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(RenderSupport.prototype, "canvas", {
            get: function() {
                return this._canvas;
            },
            enumerable: !0,
            configurable: !0
        }), RenderSupport.prototype.nextFrame = function() {
            this.resetMatrix(), this._blendMode = skylark.BlendMode.NORMAL, this._drawCount = 0;
        }, RenderSupport.clear = function(context, rgb, alpha) {
            "undefined" == typeof rgb && (rgb = 0), "undefined" == typeof alpha && (alpha = 1);
            var canvas = context.canvas;
            if (null == canvas) throw new skylark.IllegalSystemStateError('CanvasRenderingContext2D without a "canvas" reference!');
            context.save(), context.setTransform(1, 0, 0, 1, 0, 0), 0 === rgb && 0 === alpha ? context.clearRect(0, 0, canvas.width, canvas.height) : (context.fillStyle = skylark.Color.toHexString(rgb), 
            context.fillRect(0, 0, canvas.width, canvas.height)), context.restore();
        }, RenderSupport.prototype.clear = function(rgb, alpha) {
            "undefined" == typeof rgb && (rgb = 0), "undefined" == typeof alpha && (alpha = 1);
            var context = this.context;
            if (null == context) throw new skylark.MissingContextError();
            RenderSupport.clear(context, rgb, alpha);
        }, RenderSupport.prototype.raiseDrawCount = function(value) {
            "undefined" == typeof value && (value = 1), this._drawCount += value;
        }, Object.defineProperty(RenderSupport.prototype, "drawCount", {
            get: function() {
                return this._drawCount;
            },
            enumerable: !0,
            configurable: !0
        }), RenderSupport._point = new skylark.Point(), RenderSupport._rectangle = new skylark.Rectangle(), 
        RenderSupport;
    }();
    skylark.RenderSupport = RenderSupport;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var ServiceFactory = function() {
        function ServiceFactory() {
            this.services = {
                assetManager: "skylark.PxLoaderAssetManager",
                canvasProvider: "skylark.HTMLCanvasProvider"
            }, this.instances = {};
        }
        return ServiceFactory.prototype.use = function(obj) {
            if (null == obj) throw new skylark.ArgumentError('Parameter "obj:0" is null or undefined!');
            return skylark.Skylark;
        }, ServiceFactory.prototype.get = function(name) {
            var instance = this.instances[name];
            return null == instance && (instance = this.resolve(name), this.instances[name] = instance), 
            instance;
        }, ServiceFactory.prototype.resolve = function(name) {
            var resolved = this.services[name], instance;
            if ("function" == typeof resolved && (resolved = resolved()), "string" == typeof resolved && (resolved = eval(resolved)), 
            "function" == typeof resolved) instance = new resolved(); else {
                if ("object" != typeof resolved) throw null != resolved ? new Error('We do not understand service or service factory for "' + name + '"') : null == this.services[name] ? new Error('Could not resolve service for "' + name + '"' + " - service is not configured!") : new Error('Could not resolve service for "' + name + '"' + " - configuration resolved to NULL or UNDEFINED");
                instance = resolved;
            }
            return this.instances[name] = instance, instance;
        }, ServiceFactory;
    }();
    skylark.ServiceFactory = ServiceFactory;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var Skylark = function(_super) {
        function Skylark(rootClass, id, viewPort) {
            if ("undefined" == typeof id && (id = "stage"), "undefined" == typeof viewPort && (viewPort = null), 
            _super.call(this), this._bufferedRender = !1, this._shareContext = !1, null == id && (id = "stage"), 
            null == rootClass) throw new skylark.ArgumentError("Root class must not be null");
            this.initializeCanvasProvider();
            var canvas = this.initializeCanvas(id), color = this._canvasProvider.getBackgroundColor(canvas);
            if (null == viewPort && (viewPort = new skylark.Rectangle(0, 0, canvas.width, canvas.height)), 
            this.buffered = Skylark._buffered, this.buffered && this.initializeBufferCanvas(), 
            this.makeCurrent(), "object" == typeof rootClass ? (this._root = rootClass, this._rootClass = rootClass.constructor) : this._rootClass = rootClass, 
            this._viewPort = viewPort, this._previousViewPort = new skylark.Rectangle(), 0 === viewPort.width && 0 === viewPort.height) throw new skylark.ArgumentError("Cannot create Skylark instance without width and height");
            this._stage = new skylark.Stage(viewPort.width, viewPort.height, color), this._touchProcessor = new skylark.TouchProcessor(this._stage), 
            this._juggler = new skylark.Juggler(), this._simulateMultitouch = !1, this._lastFrameTimestamp = this.getTimer() / 1e3, 
            this._support = new skylark.RenderSupport(), this.updateViewPort(), this.initializeRoot();
            var eventTypes = this.touchEventTypes, i = eventTypes.length;
            for (this.$onTouch = this.onTouch.bind(this); i-- > -1; ) canvas.addEventListener(eventTypes[i], this.$onTouch, !1);
            this.$onKey = this.onKey.bind(this), this.$onResize = this.onResize.bind(this), 
            this.$onMouseLeave = this.onMouseLeave.bind(this), canvas.addEventListener("keydown", this.$onKey, !1), 
            canvas.addEventListener("keyup", this.$onKey, !1), canvas.addEventListener("resize", this.$onResize, !1), 
            canvas.addEventListener("mouseleave", this.$onMouseLeave, !1), this._touchProcessor.simulateMultitouch = this._simulateMultitouch, 
            this._lastFrameTimestamp = this.getTimer() / 1e3, Skylark._count++;
        }
        return __extends(Skylark, _super), Object.defineProperty(Skylark, "buffered", {
            get: function() {
                return Skylark._buffered;
            },
            set: function(value) {
                Skylark._buffered = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Skylark, "stageDefaults", {
            get: function() {
                return Skylark._stageDefaults;
            },
            set: function(config) {
                var defaults = Skylark._stageDefaults;
                "undefined" != typeof config.width && (defaults.width = config.width), "undefined" != typeof config.height && (defaults.height = config.height), 
                "undefined" != typeof config.backgroundColor && (defaults.backgroundColor = config.backgroundColor);
            },
            enumerable: !0,
            configurable: !0
        }), Skylark.create = function(rootClass, elementId) {
            return new Skylark(rootClass, elementId);
        }, Skylark.onReady = function(fn) {
            var readyState = document.readyState;
            if ("complete" == readyState || "interactive" == readyState) fn(this); else {
                var onReady = function() {
                    return function listener() {
                        document.removeEventListener("DOMContentLoaded", listener, !1), fn(this);
                    };
                }();
                document.addEventListener("DOMContentLoaded", onReady, !1);
            }
        }, Skylark.prototype.initializeCanvas = function(id) {
            var canvasProvider = this._canvasProvider, canvas = canvasProvider.getCanvasById(id);
            if (null == canvas) {
                var defaults = Skylark._stageDefaults;
                canvas = canvasProvider.createCanvas(id, defaults.width, defaults.height), null != defaults.backgroundColor && (canvas.style.backgroundColor = skylark.Color.toHexString(defaults.backgroundColor));
            } else canvas.width = canvas.clientWidth, canvas.height = canvas.clientHeight;
            return canvas.setAttribute("tabIndex", 0), canvas.focus(), this._canvas = canvas, 
            this._context = canvas.getContext("2d"), canvas;
        }, Skylark.prototype.initializeBufferCanvas = function() {
            var canvas, canvasProvider = this._canvasProvider, onscreenCanvas = this._canvas;
            return canvas = canvasProvider.createCanvasWith(function(canvas) {
                canvas.style.cssText = "position:absolute; top:-10000px; left:-10000px", canvas.id = onscreenCanvas.id + "-buffer", 
                canvas.width = onscreenCanvas.width, canvas.height = onscreenCanvas.height;
            }), this._bufferCanvas = canvas, this._buffer = canvas.getContext("2d"), canvas;
        }, Skylark.prototype.initializeCanvasProvider = function() {
            this._canvasProvider = Skylark._serviceFactory.get("canvasProvider");
        }, Skylark.prototype.initializeRoot = function() {
            var cls = this._rootClass;
            if (null == this._root && (this._root = new cls()), !(this._root instanceof skylark.DisplayObject)) throw new Error('Root object is not of type "DisplayObject": ' + skylark.ClassUtil.getQualifiedClassName(this._root));
            this._stage.addChildAt(this._root, 0), this.dispatchEventWith(skylark.Event.ROOT_CREATED, !1, this._root);
        }, Skylark.prototype.updateViewPort = function(updateAliasing) {
            "undefined" == typeof updateAliasing && (updateAliasing = !1);
            var modified = !1;
            (updateAliasing || (modified = this._previousViewPort.width != this._viewPort.width || this._previousViewPort.height != this._viewPort.height || this._previousViewPort.x != this._viewPort.x || this._previousViewPort.y != this._viewPort.y)) && this._previousViewPort.setTo(this._viewPort.x, this._viewPort.y, this._viewPort.width, this._viewPort.height);
        }, Skylark.prototype.nextFrame = function() {
            var now = this.getTimer() / 1e3, passedTime = now - this._lastFrameTimestamp;
            this._lastFrameTimestamp = now, this.advanceTime(passedTime), this.render();
        }, Skylark.prototype.advanceTime = function(passedTime) {
            this.makeCurrent(), this._touchProcessor.advanceTime(passedTime), this._stage.advanceTime(passedTime), 
            this._juggler.advanceTime(passedTime);
        }, Skylark.prototype.render = function() {
            var support = this._support, stage = this._stage, viewPort = this._viewPort;
            this.makeCurrent(), support.context = this.context, this.updateViewPort(), support.nextFrame(), 
            this._shareContext || support.clear(stage.color, stage.alpha);
            var scaleX = viewPort.width / stage.stageWidth, scaleY = viewPort.height / stage.stageHeight;
            support.setOrthographicProjection(viewPort.x < 0 ? -viewPort.x / scaleX : 0, viewPort.y < 0 ? -viewPort.y / scaleY : 0, viewPort.width / scaleX, viewPort.height / scaleY), 
            stage.render(support), this._bufferedRender && this.flushBuffer();
        }, Skylark.prototype.flushBuffer = function() {
            var onscreen = this._context;
            onscreen.clearRect(0, 0, this._canvas.width, this._canvas.height), onscreen.drawImage(this._bufferCanvas, 0, 0);
        }, Skylark.prototype.makeCurrent = function() {
            return Skylark.current = this, this;
        }, Skylark.prototype.start = function() {
            return this._started = !0, this._lastFrameTimestamp = this.getTimer() / 1e3, this.$onEnterFrame = this.onEnterFrame.bind(this), 
            this._afHandle = window.requestAnimationFrame(this.$onEnterFrame), this;
        }, Skylark.prototype.startOnReady = function() {
            function onReady() {
                document.removeEventListener("DOMContentLoaded", onReady, !1), _this.start();
            }
            var document = window.document, _this = this;
            return "complete" == document.readyState || "interactive" == document.readyState ? this.start() : document.addEventListener("DOMContentLoaded", onReady, !1), 
            this;
        }, Skylark.prototype.stop = function() {
            this._started = !1, null != this._afHandle && window.cancelAnimationFrame(this._afHandle), 
            this._afHandle = null;
        }, Skylark.prototype.isStarted = function() {
            return this._started;
        }, Skylark.prototype.onEnterFrame = function() {
            this._afHandle = window.requestAnimationFrame(this.$onEnterFrame), this._started ? this.nextFrame() : this.render();
        }, Skylark.getHelperCanvas = function(width, height) {
            var canvas = Skylark._helperCanvas;
            return null == canvas ? (canvas = Skylark._serviceFactory.get("canvasProvider").createCanvas("skylark-temporary-" + new Date().getTime(), width, height, !0), 
            Skylark._helperCanvas = canvas) : (canvas.setAttribute("width", width), canvas.setAttribute("height", height)), 
            canvas;
        }, Skylark.prototype.onKey = function(event) {
            event.preventDefault(), this._started && (this.makeCurrent(), this._stage.dispatchEvent(new skylark.KeyboardEvent(event.type, event.charCode, event.keyCode, event.location, event.ctrlKey, event.altKey, event.shiftKey)));
        }, Skylark.prototype.onResize = function() {}, Skylark.prototype.onMouseLeave = function() {
            this._touchProcessor.enqueueMouseLeftStage();
        }, Skylark.prototype.onTouch = function(event) {
            function getPhase() {
                var phase;
                switch (event.type) {
                  case "touchstart":
                    phase = skylark.TouchPhase.BEGAN;
                    break;

                  case "touchmove":
                    phase = skylark.TouchPhase.MOVED;
                    break;

                  case "touchend":
                    phase = skylark.TouchPhase.ENDED;
                    break;

                  case "mousedown":
                    phase = skylark.TouchPhase.BEGAN;
                    break;

                  case "mouseup":
                    phase = skylark.TouchPhase.ENDED;
                    break;

                  case "mousemove":
                    phase = leftMouseDown ? skylark.TouchPhase.MOVED : skylark.TouchPhase.HOVER;
                    break;

                  default:
                    throw new Error("Unknown event type: " + event.type);
                }
                return phase;
            }
            function enqueue() {
                var rect = canvas.getBoundingClientRect(), computedStyle = window.getComputedStyle(canvas, null), paddingLeft = parseInt(computedStyle.getPropertyValue("padding-left"), 10), paddingTop = parseInt(computedStyle.getPropertyValue("padding-top"), 10);
                globalX = globalX - rect.left - paddingLeft, globalY = globalY - rect.top - paddingTop, 
                globalX = stage.stageWidth * (globalX - viewPort.x) / viewPort.width, globalY = stage.stageHeight * (globalY - viewPort.y) / viewPort.height, 
                event.preventDefault(), touchProcessor.enqueue(touchID, phase, globalX, globalY, pressure, width, height);
            }
            if (this._started) {
                var globalX, globalY, touchID, phase, canvas = this._canvas, stage = this._stage, viewPort = this._viewPort, touchProcessor = this._touchProcessor, pressure = 1, width = 1, height = 1, leftMouseDown = this._leftMouseDown;
                if (event instanceof MouseEvent) {
                    var mouseEvent = event;
                    globalX = mouseEvent.clientX, globalY = mouseEvent.clientY, touchID = 0, "mousedown" == event.type ? leftMouseDown = !0 : "mouseup" == event.type && (leftMouseDown = !1), 
                    this._leftMouseDown = leftMouseDown, phase = getPhase(event.type), enqueue();
                } else for (var touches = event.changedTouches, i = 0; i < touches.length; i++) {
                    var touch = touches[i];
                    globalX = touch.clientX, globalY = touch.clientY, touchID = touch.identifier, pressure = touch.webkitForce, 
                    width = touch.webkitRadiusX, height = touch.webkitRadiusY, phase = getPhase(event.type), 
                    enqueue();
                }
            }
        }, Object.defineProperty(Skylark.prototype, "touchEventTypes", {
            get: function() {
                return Skylark.multitouchEnabled ? [ "touchstart", "touchmove", "touchend" ] : [ "mousedown", "mousemove", "mouseup" ];
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Skylark, "multitouchEnabled", {
            get: function() {
                return this._multitouchEnabled;
            },
            set: function(value) {
                if (null != Skylark._current) throw new skylark.IllegalOperationError("'multitouchEnabled' must be set before Skylark instance is created");
                this._multitouchEnabled = value;
            },
            enumerable: !0,
            configurable: !0
        }), Skylark.prototype.getTimer = function() {
            return new Date().getTime();
        }, Object.defineProperty(Skylark.prototype, "stage", {
            get: function() {
                return this._stage;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Skylark.prototype, "juggler", {
            get: function() {
                return this._juggler;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Skylark.prototype, "simulateMultitouch", {
            get: function() {
                return this._simulateMultitouch;
            },
            set: function(value) {
                this._simulateMultitouch = value, this._context && (this._touchProcessor.simulateMultitouch = value);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Skylark.prototype, "viewPort", {
            get: function() {
                return this._viewPort;
            },
            set: function(value) {
                this._viewPort = value.clone();
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Skylark.prototype, "contextData", {
            get: function() {
                return null;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Skylark, "contentScaleFactor", {
            get: function() {
                if (null == Skylark._current) throw new Error('Cannot determine "contentScaleFactor" when no Skylark instance is active');
                return Skylark._current.contentScaleFactor;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Skylark.prototype, "contentScaleFactor", {
            get: function() {
                return this._viewPort.width / this._stage.stageWidth;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Skylark.prototype, "root", {
            get: function() {
                return this._root;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Skylark.prototype, "canvas", {
            get: function() {
                return this._canvas;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Skylark.prototype, "context", {
            get: function() {
                return this._bufferedRender ? this._buffer : this._context;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Skylark.prototype, "buffered", {
            get: function() {
                return this._bufferedRender;
            },
            set: function(enabled) {
                this._bufferedRender = enabled;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Skylark, "current", {
            get: function() {
                return Skylark._current;
            },
            set: function(instance) {
                Skylark._current = instance;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Skylark, "context", {
            get: function() {
                var current = Skylark.current;
                return null != current ? Skylark.current.context : null;
            },
            enumerable: !0,
            configurable: !0
        }), Skylark.prototype.dispose = function() {
            if (this._started && this.stop(), Skylark._current === this && (Skylark._current = null), 
            0 === --Skylark._count) {
                var canvas = Skylark._helperCanvas;
                Skylark._helperCanvas = null, this._canvasProvider.dispose(canvas);
            }
            this._canvas && (this._canvasProvider.dispose(this._canvas), this._canvas = null), 
            this._context && (this._context = null);
        }, Skylark._count = 0, Skylark._serviceFactory = new skylark.ServiceFactory(), Skylark._buffered = !1, 
        Skylark._multitouchEnabled = !1, Skylark._stageDefaults = {
            backgroundColor: null,
            width: 400,
            height: 300
        }, Skylark;
    }(skylark.EventDispatcher);
    skylark.Skylark = Skylark;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var DefaultImageSource = function() {
        function DefaultImageSource(image) {
            if (image instanceof HTMLImageElement && !(image.height > 0 && image.width > 0)) throw new Error("Cannot create ConcreteTexture based on Image that has not yet completed loading or has no dimensions");
            this._image = image;
        }
        return Object.defineProperty(DefaultImageSource.prototype, "width", {
            get: function() {
                return this._image.width;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DefaultImageSource.prototype, "height", {
            get: function() {
                return this._image.height;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DefaultImageSource.prototype, "image", {
            get: function() {
                return this._image;
            },
            enumerable: !0,
            configurable: !0
        }), DefaultImageSource.prototype.dispose = function() {
            this._image = null;
        }, DefaultImageSource;
    }();
    skylark.DefaultImageSource = DefaultImageSource;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var TouchMarker = function(_super) {
        function TouchMarker() {
            _super.call(this), this._center = new skylark.Point(), this._texture = this.createTexture();
            for (var i = 0; 2 > i; ++i) {
                var marker = new skylark.Image(this._texture);
                marker.pivotX = this._texture.width / 2, marker.pivotY = this._texture.height / 2, 
                marker.touchable = !1, this.addChild(marker);
            }
        }
        return __extends(TouchMarker, _super), TouchMarker.prototype.dispose = function() {
            this._texture.dispose(), _super.prototype.dispose.call(this);
        }, TouchMarker.prototype.moveMarker = function(x, y, withCenter) {
            "undefined" == typeof withCenter && (withCenter = !1), withCenter && (this._center.x += x - this.realMarker.x, 
            this._center.y += y - this.realMarker.y), this.realMarker.x = x, this.realMarker.y = y, 
            this.mockMarker.x = 2 * this._center.x - x, this.mockMarker.y = 2 * this._center.y - y;
        }, TouchMarker.prototype.moveCenter = function(x, y) {
            this._center.x = x, this._center.y = y, this.moveMarker(this.realX, this.realY);
        }, TouchMarker.prototype.createTexture = function() {
            var scale = 1, radius = 12 * scale, width = 32 * scale, height = 32 * scale, thickness = 1.5 * scale, canvas = document.createElement("canvas");
            canvas.setAttribute("width", String(width)), canvas.setAttribute("height", String(height));
            var context = canvas.getContext("2d");
            return context.beginPath(), context.arc(width / 2, height / 2, radius + thickness, 0, 2 * Math.PI, !1), 
            context.lineWidth = thickness, context.strokeStyle = "#000000", context.globalAlpha = .3, 
            context.stroke(), context.beginPath(), context.arc(width / 2, height / 2, radius, 0, 2 * Math.PI, !1), 
            context.fillStyle = skylark.Color.toHexString(0), context.globalAlpha = .1, context.fill(), 
            context.lineWidth = thickness, context.strokeStyle = "#ffffff", context.stroke(), 
            skylark.Texture.fromCanvas(canvas);
        }, Object.defineProperty(TouchMarker.prototype, "realMarker", {
            get: function() {
                return this.getChildAt(0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TouchMarker.prototype, "mockMarker", {
            get: function() {
                return this.getChildAt(1);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TouchMarker.prototype, "realX", {
            get: function() {
                return this.realMarker.x;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TouchMarker.prototype, "realY", {
            get: function() {
                return this.realMarker.y;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TouchMarker.prototype, "mockX", {
            get: function() {
                return this.mockMarker.x;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TouchMarker.prototype, "mockY", {
            get: function() {
                return this.mockMarker.y;
            },
            enumerable: !0,
            configurable: !0
        }), TouchMarker;
    }(skylark.Sprite);
    skylark.TouchMarker = TouchMarker;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var TrackMarker = function(_super) {
        function TrackMarker() {
            _super.call(this);
            var texture = this.createTexture(), marker = new skylark.Image(texture);
            marker.pivotX = texture.width / 2, marker.pivotY = texture.height / 2, marker.touchable = !1, 
            this.addChild(marker);
        }
        return __extends(TrackMarker, _super), TrackMarker.prototype.moveMarker = function(x, y) {
            this.x = x, this.y = y;
        }, TrackMarker.prototype.createTexture = function() {
            var scale = 1, radius = 12 * scale, width = 32 * scale, height = 32 * scale, thickness = 1.5 * scale, canvas = document.createElement("canvas");
            canvas.setAttribute("width", String(width)), canvas.setAttribute("height", String(height));
            var context = canvas.getContext("2d");
            return context.beginPath(), context.arc(width / 2, height / 2, radius + thickness, 0, 2 * Math.PI, !1), 
            context.lineWidth = thickness, context.strokeStyle = "#000000", context.globalAlpha = .3, 
            context.stroke(), context.beginPath(), context.arc(width / 2, height / 2, radius, 0, 2 * Math.PI, !1), 
            context.fillStyle = skylark.Color.toHexString(0), context.globalAlpha = .1, context.fill(), 
            context.lineWidth = thickness, context.strokeStyle = "#ffffff", context.stroke(), 
            skylark.Texture.fromCanvas(canvas);
        }, TrackMarker;
    }(skylark.Sprite);
    skylark.TrackMarker = TrackMarker;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var TouchProcessor = function() {
        function TouchProcessor(stage) {
            this._shiftDown = !1, this._ctrlDown = !1, this._stage = stage, this._elapsedTime = 0, 
            this._currentTouches = [], this._queue = [], this._lastTaps = [], this._stage.addEventListener(skylark.KeyboardEvent.KEY_DOWN, this.onKey, this), 
            this._stage.addEventListener(skylark.KeyboardEvent.KEY_UP, this.onKey, this);
        }
        return TouchProcessor.prototype.dispose = function() {
            this._stage.removeEventListener(skylark.KeyboardEvent.KEY_DOWN, this.onKey, this), 
            this._stage.removeEventListener(skylark.KeyboardEvent.KEY_UP, this.onKey, this), 
            this._touchMarker && this._touchMarker.dispose();
        }, TouchProcessor.prototype.advanceTime = function(passedTime) {
            var i, len, touchID, touch, touchData;
            this._elapsedTime += passedTime;
            var taps = this._lastTaps, elapsedTime = this._elapsedTime;
            if (len = taps.length, len > 0) for (i = len - 1; i >= 0; --i) elapsedTime - taps[i].timestamp > TouchProcessor.MULTITAP_TIME && taps.splice(i, 1);
            for (;this._queue.length > 0; ) {
                TouchProcessor._processedTouchIDs.length = TouchProcessor._hoveringTouchData.length = 0;
                var currentTouches = this._currentTouches, len = currentTouches.length;
                for (i = 0, touch = currentTouches[i]; len > i; i++) (touch.phase == skylark.TouchPhase.BEGAN || touch.phase == skylark.TouchPhase.MOVED) && touch.setPhase(skylark.TouchPhase.STATIONARY);
                for (;this._queue.length > 0 && -1 == TouchProcessor._processedTouchIDs.indexOf(this._queue[this._queue.length - 1][0]); ) {
                    var touchArgs = this._queue.pop();
                    touchID = touchArgs[0], touch = this.getCurrentTouch(touchID), touch && touch.phase == skylark.TouchPhase.HOVER && touch.target && TouchProcessor._hoveringTouchData.push({
                        touch: touch,
                        target: touch.target,
                        bubbleChain: touch.bubbleChain
                    }), this.processTouch.apply(this, touchArgs), TouchProcessor._processedTouchIDs.push(touchID);
                }
                var touchEvent = new skylark.TouchEvent(skylark.TouchEvent.TOUCH, this._currentTouches, this._shiftDown, this._ctrlDown), touchDataArr = TouchProcessor._hoveringTouchData;
                for (len = touchDataArr.length, i = 0, touchData = touchDataArr[i]; len > i; i++) touchData.touch.target != touchData.target && touchEvent.dispatch(touchData.bubbleChain);
                var ids = TouchProcessor._processedTouchIDs;
                for (i = 0; i < ids.length; i++) this.getCurrentTouch(ids[i]).dispatchEvent(touchEvent);
                var touches = this._currentTouches;
                for (i = touches.length - 1; i >= 0; --i) touches[i].phase == skylark.TouchPhase.ENDED && touches.splice(i, 1);
            }
        }, TouchProcessor.prototype.enqueue = function(touchID, phase, globalX, globalY, pressure, width, height) {
            "undefined" == typeof pressure && (pressure = 1), "undefined" == typeof width && (width = 1), 
            "undefined" == typeof height && (height = 1), this._queue.unshift(arguments), this._ctrlDown && this.simulateMultitouch && 0 == touchID && (this._touchMarker.moveMarker(globalX, globalY, this._shiftDown), 
            this._queue.unshift([ 1, phase, this._touchMarker.mockX, this._touchMarker.mockY ]));
        }, TouchProcessor.prototype.enqueueMouseLeftStage = function() {
            var mouse = this.getCurrentTouch(0);
            if (null != mouse && mouse.phase == skylark.TouchPhase.HOVER) {
                var offset = 1, exitX = mouse.globalX, exitY = mouse.globalY, distLeft = mouse.globalX, distRight = this._stage.stageWidth - distLeft, distTop = mouse.globalY, distBottom = this._stage.stageHeight - distTop, minDist = Math.min(distLeft, distRight, distTop, distBottom);
                minDist == distLeft ? exitX = -offset : minDist == distRight ? exitX = this._stage.stageWidth + offset : exitY = minDist == distTop ? -offset : this._stage.stageHeight + offset, 
                this.enqueue(0, skylark.TouchPhase.HOVER, exitX, exitY);
            }
        }, TouchProcessor.prototype.processTouch = function(touchID, phase, globalX, globalY, pressure, width, height) {
            "undefined" == typeof pressure && (pressure = 1), "undefined" == typeof width && (width = 1), 
            "undefined" == typeof height && (height = 1);
            var position = new skylark.Point(globalX, globalY), touch = this.getCurrentTouch(touchID);
            null == touch && (touch = new skylark.Touch(touchID, globalX, globalY, phase, null), 
            this.addCurrentTouch(touch)), touch.setPosition(globalX, globalY), touch.setPhase(phase), 
            touch.setTimestamp(this._elapsedTime), touch.setPressure(pressure), touch.setSize(width, height), 
            (phase == skylark.TouchPhase.HOVER || phase == skylark.TouchPhase.BEGAN) && touch.setTarget(this._stage.hitTest(position, !0)), 
            phase == skylark.TouchPhase.BEGAN && this.processTap(touch);
        }, TouchProcessor.prototype.onKey = function(event) {
            if (17 == event.keyCode || 15 == event.keyCode) {
                var wasCtrlDown = this._ctrlDown;
                if (this._ctrlDown = event.type == skylark.KeyboardEvent.KEY_DOWN, this.simulateMultitouch && wasCtrlDown != this._ctrlDown) {
                    this._touchMarker.visible = this._ctrlDown, this._touchMarker.moveCenter(this._stage.stageWidth / 2, this._stage.stageHeight / 2);
                    var mouseTouch = this.getCurrentTouch(0), mockedTouch = this.getCurrentTouch(1);
                    mouseTouch && this._touchMarker.moveMarker(mouseTouch.globalX, mouseTouch.globalY), 
                    wasCtrlDown && mockedTouch && mockedTouch.phase != skylark.TouchPhase.ENDED ? this._queue.unshift([ 1, skylark.TouchPhase.ENDED, mockedTouch.globalX, mockedTouch.globalY ]) : this._ctrlDown && mouseTouch && (mouseTouch.phase == skylark.TouchPhase.HOVER || mouseTouch.phase == skylark.TouchPhase.ENDED ? this._queue.unshift([ 1, skylark.TouchPhase.HOVER, this._touchMarker.mockX, this._touchMarker.mockY ]) : this._queue.unshift([ 1, skylark.TouchPhase.BEGAN, this._touchMarker.mockX, this._touchMarker.mockY ]));
                }
            } else 16 == event.keyCode && (this._shiftDown = event.type == skylark.KeyboardEvent.KEY_DOWN);
        }, TouchProcessor.prototype.processTap = function(touch) {
            var i, tap, nearbyTap = null, minSqDist = TouchProcessor.MULTITAP_DISTANCE * TouchProcessor.MULTITAP_DISTANCE, taps = this._lastTaps, len = taps.length;
            for (i = 0, tap = taps[i]; len > i; i++) {
                var sqDist = Math.pow(tap.globalX - touch.globalX, 2) + Math.pow(tap.globalY - touch.globalY, 2);
                if (minSqDist >= sqDist) {
                    nearbyTap = tap;
                    break;
                }
            }
            nearbyTap ? (touch.setTapCount(nearbyTap.tapCount + 1), this._lastTaps.splice(this._lastTaps.indexOf(nearbyTap), 1)) : touch.setTapCount(1), 
            this._lastTaps.push(touch.clone());
        }, TouchProcessor.prototype.addCurrentTouch = function(touch) {
            for (var currentTouches = this._currentTouches, i = currentTouches.length - 1; i >= 0; --i) currentTouches[i].id == touch.id && currentTouches.splice(i, 1);
            currentTouches.push(touch);
        }, TouchProcessor.prototype.getCurrentTouch = function(touchID) {
            for (var touch, touches = this._currentTouches, len = touches.length, i = 0; len > i; i++) if (touch = touches[i], 
            touch.id == touchID) return touch;
            return null;
        }, TouchProcessor.prototype.enableTouchMarker = function(enable) {
            "undefined" == typeof enable && (enable = !0);
            var touchMarker = this._touchMarker;
            enable && null == touchMarker ? (touchMarker = new skylark.TouchMarker(), this._touchMarker = touchMarker, 
            touchMarker.visible = !1, this._stage.addChild(touchMarker)) : enable || null == touchMarker || (touchMarker.removeFromParent(!0), 
            this._touchMarker = null);
        }, TouchProcessor.prototype.enableTrackMarkers = function(enable) {
            "undefined" == typeof enable && (enable = !0);
            var stage = this._stage;
            enable ? this._trackMarkers = {
                pool: [],
                active: {},
                createMarker: function() {
                    return new skylark.TrackMarker();
                },
                fromPool: function() {
                    var marker, pool = this.pool;
                    return pool.length > 0 ? marker = pool.pop() : (marker = this.createMarker(), marker.visible = !1, 
                    stage.addChild(marker)), marker;
                },
                toPool: function(marker) {
                    var pool = this.pool;
                    marker.visible = !1, pool.push(marker);
                },
                update: function(touch) {
                    var touchId = touch.id, phase = touch.phase, marker = this.active[touchId];
                    null == marker && (marker = this.fromPool(), this.active[touchId] = marker), marker.moveMarker(touch.globalX, touch.globalY), 
                    phase === skylark.TouchPhase.BEGAN ? marker.visible = !0 : phase === skylark.TouchPhase.ENDED && (this.active[touchId] = null, 
                    this.toPool(marker));
                },
                dispose: function() {
                    var active = this.active;
                    for (var key in active) active[key].dispose(), active[key] = null;
                    for (var pool = this.pool, i = 0; i < pool.length; i++) {
                        var marker = pool[i];
                        marker.dispose;
                    }
                    pool.length = 0;
                }
            } : null != this._trackMarkers && (this._trackMarkers.dispose(), this._trackMarkers = null);
        }, Object.defineProperty(TouchProcessor.prototype, "simulateMultitouch", {
            get: function() {
                return this._simulateMultitouch;
            },
            set: function(enable) {
                this.simulateMultitouch !== enable && (this.enableTouchMarker(enable), this._simulateMultitouch = enable);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TouchProcessor.prototype, "trackMultitouch", {
            get: function() {
                return this._trackMultitouch;
            },
            set: function(enable) {
                if (this.trackMultitouch !== enable) {
                    this.enableTrackMarkers(enable);
                    var stage = this._stage;
                    enable ? stage.addEventListener(skylark.TouchEvent.TOUCH, this.updateTouchMarker, this) : stage.removeEventListener(skylark.TouchEvent.TOUCH, this.updateTouchMarker, this), 
                    this._trackMultitouch = enable;
                }
            },
            enumerable: !0,
            configurable: !0
        }), TouchProcessor.prototype.updateTouchMarker = function(event) {
            for (var touches = event.data, i = 0; i < touches.length; i++) {
                var touch = touches[i];
                this._trackMarkers.update(touch);
            }
        }, TouchProcessor.MULTITAP_TIME = .3, TouchProcessor.MULTITAP_DISTANCE = 25, TouchProcessor._processedTouchIDs = [], 
        TouchProcessor._hoveringTouchData = [], TouchProcessor;
    }();
    skylark.TouchProcessor = TouchProcessor;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var AbstractCanvasProvider = function() {
        function AbstractCanvasProvider() {}
        return AbstractCanvasProvider.prototype.getElementById = function() {
            throw new skylark.AbstractMethodError();
        }, AbstractCanvasProvider.prototype.createCanvasWith = function(cb, offscreen) {
            throw "undefined" == typeof offscreen && (offscreen = !1), new skylark.AbstractMethodError();
        }, AbstractCanvasProvider.prototype.getCanvasById = function(id) {
            var canvas = this.getElementById(id);
            if (null != canvas && !(canvas instanceof HTMLCanvasElement)) throw new TypeError('The DOM element with id "' + id + '" is not a HTMLCanvasElement!');
            return canvas;
        }, AbstractCanvasProvider.prototype.createCanvas = function(id, width, height, offscreen) {
            if ("undefined" == typeof width && (width = null), "undefined" == typeof height && (height = null), 
            "undefined" == typeof offscreen && (offscreen = !1), null != this.getElementById(id)) throw new Error('Cannot create canvas with id "' + id + '" - the DOM already contains an element with that id.');
            return this.createCanvasWith(function(canvas) {
                canvas.id = id, canvas.width = width, canvas.height = height;
            }, offscreen);
        }, AbstractCanvasProvider.prototype.getBackgroundColor = function(canvas) {
            var cssColor = canvas.style.backgroundColor;
            return null != cssColor && "" != cssColor ? skylark.Color.fromString(cssColor) : void 0;
        }, AbstractCanvasProvider.prototype.dispose = function(canvas) {
            canvas && null != canvas.parentNode && canvas.parentNode.removeChild(canvas);
        }, AbstractCanvasProvider;
    }();
    skylark.AbstractCanvasProvider = AbstractCanvasProvider;
    var HTMLCanvasProviderFactory = function() {
        function HTMLCanvasProviderFactory() {}
        return Object.defineProperty(HTMLCanvasProviderFactory.prototype, "isCanvasProviderFactory", {
            get: function() {
                return !0;
            },
            enumerable: !0,
            configurable: !0
        }), HTMLCanvasProviderFactory.prototype.create = function() {
            return new HTMLCanvasProvider(document);
        }, HTMLCanvasProviderFactory;
    }();
    skylark.HTMLCanvasProviderFactory = HTMLCanvasProviderFactory;
    var HTMLCanvasProvider = function(_super) {
        function HTMLCanvasProvider(doc) {
            _super.call(this), this._document = null != doc ? doc : document;
        }
        return __extends(HTMLCanvasProvider, _super), HTMLCanvasProvider.prototype.getElementById = function(id) {
            return document.getElementById(id);
        }, HTMLCanvasProvider.prototype.createCanvasWith = function(cb, offscreen) {
            "undefined" == typeof offscreen && (offscreen = !1);
            var canvas = document.createElement("canvas");
            if (cb.call(this, canvas), !offscreen) {
                var body = document.body;
                body.appendChild(canvas);
            }
            return canvas;
        }, HTMLCanvasProvider;
    }(AbstractCanvasProvider);
    skylark.HTMLCanvasProvider = HTMLCanvasProvider;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var DelayedCall = function(_super) {
        function DelayedCall(call, a, b, c) {
            _super.call(this);
            var thisArg, delay, args;
            "number" == typeof a ? (thisArg = this, delay = a, args = b) : (thisArg = a, delay = b, 
            args = c), this.reset(call, thisArg, delay, args);
        }
        return __extends(DelayedCall, _super), DelayedCall.prototype.reset = function(call, thisArg, delay, args) {
            return "undefined" == typeof args && (args = null), this._currentTime = 0, this._totalTime = Math.max(delay, 1e-4), 
            this._call = call, this._this = thisArg, this._args = args, this._repeatCount = 1, 
            this;
        }, DelayedCall.prototype.advanceTime = function(time) {
            var previousTime = this._currentTime;
            this._currentTime = Math.min(this._totalTime, this._currentTime + time), previousTime < this._totalTime && this._currentTime >= this._totalTime && (this._call.apply(this._this || null, this._args), 
            0 == this._repeatCount || this._repeatCount > 1 ? (this._repeatCount > 0 && (this._repeatCount -= 1), 
            this._currentTime = 0, this.advanceTime(previousTime + time - this._totalTime)) : this.dispatchEventWith(skylark.Event.REMOVE_FROM_JUGGLER));
        }, Object.defineProperty(DelayedCall.prototype, "isComplete", {
            get: function() {
                return 1 == this._repeatCount && this._currentTime >= this._totalTime;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DelayedCall.prototype, "totalTime", {
            get: function() {
                return this._totalTime;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DelayedCall.prototype, "currentTime", {
            get: function() {
                return this._currentTime;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(DelayedCall.prototype, "repeatCount", {
            get: function() {
                return this._repeatCount;
            },
            set: function(value) {
                this._repeatCount = value;
            },
            enumerable: !0,
            configurable: !0
        }), DelayedCall;
    }(skylark.EventDispatcher);
    skylark.DelayedCall = DelayedCall;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var Juggler = function() {
        function Juggler() {
            this._elapsedTime = 0, this._objects = [];
        }
        return Juggler.prototype.add = function(object) {
            object && -1 == this._objects.indexOf(object) && (this._objects.push(object), object instanceof skylark.EventDispatcher && object.addEventListener(skylark.Event.REMOVE_FROM_JUGGLER, this.onRemove, this));
        }, Juggler.prototype.contains = function(object) {
            return -1 != this._objects.indexOf(object);
        }, Juggler.prototype.remove = function(object) {
            if (null != object) {
                object instanceof skylark.EventDispatcher && object.removeEventListener(skylark.Event.REMOVE_FROM_JUGGLER, this.onRemove, this);
                var index = this._objects.indexOf(object);
                -1 != index && (this._objects[index] = null);
            }
        }, Juggler.prototype.removeTweens = function(target) {
            if (null != target) for (var objects = this._objects, i = objects.length - 1; i >= 0; --i) {
                var tween = objects[i];
                tween && tween.target == target && (tween.removeEventListener(skylark.Event.REMOVE_FROM_JUGGLER, this.onRemove, this), 
                objects[i] = null);
            }
        }, Juggler.prototype.purge = function() {
            for (var objects = this._objects, i = objects.length - 1; i >= 0; --i) {
                var obj = objects[i];
                obj && obj instanceof skylark.EventDispatcher && obj.removeEventListener(skylark.Event.REMOVE_FROM_JUGGLER, this.onRemove, this), 
                objects[i] = null;
            }
        }, Juggler.prototype.delayCall = function(call, a, b) {
            for (var args = [], _i = 0; _i < arguments.length - 3; _i++) args[_i] = arguments[_i + 3];
            if (null == call) return null;
            var thisArg, delay;
            "object" == typeof a || "function" == typeof a ? (thisArg = a, delay = b) : "number" == typeof a && (delay = a, 
            b && (null != args ? args.unshift(b) : args = [ b ]));
            var delayedCall = new skylark.DelayedCall(call, thisArg, delay, args);
            return this.add(delayedCall), delayedCall;
        }, Juggler.prototype.tween = function(target, time, properties) {
            var tween = skylark.Tween.fromPool(target, time);
            for (var property in properties) {
                var value = properties[property];
                if ("undefined" != typeof tween[property]) tween[property] = value; else {
                    if ("undefined" == typeof target[property]) throw new skylark.ArgumentError("Invalid property: " + property);
                    tween.animate(property, value);
                }
            }
            tween.addEventListener(skylark.Event.REMOVE_FROM_JUGGLER, this.onPooledTweenComplete), 
            this.add(tween);
        }, Juggler.prototype.onPooledTweenComplete = function(event) {
            skylark.Tween.toPool(event.target);
        }, Juggler.prototype.advanceTime = function(time) {
            var i, objects = this._objects, numObjects = objects.length, currentIndex = 0;
            if (this._elapsedTime += time, 0 != numObjects) {
                for (i = 0; numObjects > i; ++i) {
                    var object = objects[i];
                    object && (currentIndex != i && (objects[currentIndex] = object, objects[i] = null), 
                    object.advanceTime(time), ++currentIndex);
                }
                if (currentIndex != i) {
                    for (numObjects = objects.length; numObjects > i; ) objects[currentIndex++] = objects[i++];
                    objects.length = currentIndex;
                }
            }
        }, Juggler.prototype.onRemove = function(event) {
            var target = event.target;
            this.remove(target), target instanceof skylark.Tween && target.isComplete && this.add(target.nextTween);
        }, Object.defineProperty(Juggler.prototype, "elapsedTime", {
            get: function() {
                return this._elapsedTime;
            },
            enumerable: !0,
            configurable: !0
        }), Juggler;
    }();
    skylark.Juggler = Juggler;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var Transitions = function() {
        function Transitions() {
            throw new skylark.AbstractClassError();
        }
        return Transitions.getTransition = function(name) {
            return null == Transitions._transitions && Transitions.registerDefaults(), Transitions._transitions[name];
        }, Transitions.register = function(name, func) {
            null == Transitions._transitions && Transitions.registerDefaults(), Transitions._transitions[name] = func;
        }, Transitions.registerDefaults = function() {
            Transitions._transitions = {}, Transitions.register(Transitions.LINEAR, Transitions.linear), 
            Transitions.register(Transitions.EASE_IN, Transitions.easeIn), Transitions.register(Transitions.EASE_OUT, Transitions.easeOut), 
            Transitions.register(Transitions.EASE_IN_OUT, Transitions.easeInOut), Transitions.register(Transitions.EASE_OUT_IN, Transitions.easeOutIn), 
            Transitions.register(Transitions.EASE_IN_BACK, Transitions.easeInBack), Transitions.register(Transitions.EASE_OUT_BACK, Transitions.easeOutBack), 
            Transitions.register(Transitions.EASE_IN_OUT_BACK, Transitions.easeInOutBack), Transitions.register(Transitions.EASE_OUT_IN_BACK, Transitions.easeOutInBack), 
            Transitions.register(Transitions.EASE_IN_ELASTIC, Transitions.easeInElastic), Transitions.register(Transitions.EASE_OUT_ELASTIC, Transitions.easeOutElastic), 
            Transitions.register(Transitions.EASE_IN_OUT_ELASTIC, Transitions.easeInOutElastic), 
            Transitions.register(Transitions.EASE_OUT_IN_ELASTIC, Transitions.easeOutInElastic), 
            Transitions.register(Transitions.EASE_IN_BOUNCE, Transitions.easeInBounce), Transitions.register(Transitions.EASE_OUT_BOUNCE, Transitions.easeOutBounce), 
            Transitions.register(Transitions.EASE_IN_OUT_BOUNCE, Transitions.easeInOutBounce), 
            Transitions.register(Transitions.EASE_OUT_IN_BOUNCE, Transitions.easeOutInBounce);
        }, Transitions.linear = function(ratio) {
            return ratio;
        }, Transitions.easeIn = function(ratio) {
            return ratio * ratio * ratio;
        }, Transitions.easeOut = function(ratio) {
            var invRatio = ratio - 1;
            return invRatio * invRatio * invRatio + 1;
        }, Transitions.easeInOut = function(ratio) {
            return Transitions.easeCombined(Transitions.easeIn, Transitions.easeOut, ratio);
        }, Transitions.easeOutIn = function(ratio) {
            return Transitions.easeCombined(Transitions.easeOut, Transitions.easeIn, ratio);
        }, Transitions.easeInBack = function(ratio) {
            var s = 1.70158;
            return Math.pow(ratio, 2) * ((s + 1) * ratio - s);
        }, Transitions.easeOutBack = function(ratio) {
            var invRatio = ratio - 1, s = 1.70158;
            return Math.pow(invRatio, 2) * ((s + 1) * invRatio + s) + 1;
        }, Transitions.easeInOutBack = function(ratio) {
            return Transitions.easeCombined(Transitions.easeInBack, Transitions.easeOutBack, ratio);
        }, Transitions.easeOutInBack = function(ratio) {
            return Transitions.easeCombined(Transitions.easeOutBack, Transitions.easeInBack, ratio);
        }, Transitions.easeInElastic = function(ratio) {
            if (0 == ratio || 1 == ratio) return ratio;
            var p = .3, s = p / 4, invRatio = ratio - 1;
            return -1 * Math.pow(2, 10 * invRatio) * Math.sin((invRatio - s) * 2 * Math.PI / p);
        }, Transitions.easeOutElastic = function(ratio) {
            if (0 == ratio || 1 == ratio) return ratio;
            var p = .3, s = p / 4;
            return Math.pow(2, -10 * ratio) * Math.sin((ratio - s) * 2 * Math.PI / p) + 1;
        }, Transitions.easeInOutElastic = function(ratio) {
            return Transitions.easeCombined(Transitions.easeInElastic, Transitions.easeOutElastic, ratio);
        }, Transitions.easeOutInElastic = function(ratio) {
            return Transitions.easeCombined(Transitions.easeOutElastic, Transitions.easeInElastic, ratio);
        }, Transitions.easeInBounce = function(ratio) {
            return 1 - Transitions.easeOutBounce(1 - ratio);
        }, Transitions.easeOutBounce = function(ratio) {
            var l, s = 7.5625, p = 2.75;
            return 1 / p > ratio ? l = s * Math.pow(ratio, 2) : 2 / p > ratio ? (ratio -= 1.5 / p, 
            l = s * Math.pow(ratio, 2) + .75) : 2.5 / p > ratio ? (ratio -= 2.25 / p, l = s * Math.pow(ratio, 2) + .9375) : (ratio -= 2.625 / p, 
            l = s * Math.pow(ratio, 2) + .984375), l;
        }, Transitions.easeInOutBounce = function(ratio) {
            return Transitions.easeCombined(Transitions.easeInBounce, Transitions.easeOutBounce, ratio);
        }, Transitions.easeOutInBounce = function(ratio) {
            return Transitions.easeCombined(Transitions.easeOutBounce, Transitions.easeInBounce, ratio);
        }, Transitions.easeCombined = function(startFunc, endFunc, ratio) {
            return .5 > ratio ? .5 * startFunc(2 * ratio) : .5 * endFunc(2 * (ratio - .5)) + .5;
        }, Transitions.LINEAR = "linear", Transitions.EASE_IN = "easeIn", Transitions.EASE_OUT = "easeOut", 
        Transitions.EASE_IN_OUT = "easeInOut", Transitions.EASE_OUT_IN = "easeOutIn", Transitions.EASE_IN_BACK = "easeInBack", 
        Transitions.EASE_OUT_BACK = "easeOutBack", Transitions.EASE_IN_OUT_BACK = "easeInOutBack", 
        Transitions.EASE_OUT_IN_BACK = "easeOutInBack", Transitions.EASE_IN_ELASTIC = "easeInElastic", 
        Transitions.EASE_OUT_ELASTIC = "easeOutElastic", Transitions.EASE_IN_OUT_ELASTIC = "easeInOutElastic", 
        Transitions.EASE_OUT_IN_ELASTIC = "easeOutInElastic", Transitions.EASE_IN_BOUNCE = "easeInBounce", 
        Transitions.EASE_OUT_BOUNCE = "easeOutBounce", Transitions.EASE_IN_OUT_BOUNCE = "easeInOutBounce", 
        Transitions.EASE_OUT_IN_BOUNCE = "easeOutInBounce", Transitions;
    }();
    skylark.Transitions = Transitions;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var Tween = function(_super) {
        function Tween(target, time, transition) {
            "undefined" == typeof transition && (transition = "linear"), _super.call(this), 
            this.reset(target, time, transition);
        }
        return __extends(Tween, _super), Tween.prototype.reset = function(target, time, transition) {
            if ("undefined" == typeof transition && (transition = "linear"), this._target = target, 
            this._currentTime = 0, this._totalTime = Math.max(1e-4, time), this._delay = this._repeatDelay = 0, 
            this._onStart = this._onUpdate = this._onComplete = null, this._onStartArgs = this._onUpdateArgs = this._onCompleteArgs = null, 
            this._roundToInt = this._reverse = !1, this._repeatCount = 1, this._currentCycle = -1, 
            "string" == typeof transition) this.transition = transition; else {
                if ("function" != typeof transition) throw new skylark.ArgumentError("Argument 'transition' must be either a String or a Function");
                this.transitionFunc = transition;
            }
            return this._properties ? this._properties.length = 0 : this._properties = [], this._startValues ? this._startValues.length = 0 : this._startValues = [], 
            this._endValues ? this._endValues.length = 0 : this._endValues = [], this;
        }, Tween.prototype.animate = function(property, targetValue) {
            null != this._target && (this._properties.push(property), this._startValues.push(Number.NaN), 
            this._endValues.push(targetValue));
        }, Tween.prototype.scaleTo = function(factor) {
            this.animate("scaleX", factor), this.animate("scaleY", factor);
        }, Tween.prototype.moveTo = function(x, y) {
            this.animate("x", x), this.animate("y", y);
        }, Tween.prototype.fadeTo = function(alpha) {
            this.animate("alpha", alpha);
        }, Tween.prototype.advanceTime = function(time) {
            if (0 != time && (1 != this._repeatCount || this._currentTime != this._totalTime)) {
                var i, previousTime = this._currentTime, restTime = this._totalTime - this._currentTime, carryOverTime = time > restTime ? time - restTime : 0;
                if (this._currentTime = Math.min(this._totalTime, this._currentTime + time), !(this._currentTime <= 0)) {
                    this._currentCycle < 0 && 0 >= previousTime && this._currentTime > 0 && (this._currentCycle++, 
                    null != this._onStart && this._onStart.apply(null, this._onStartArgs));
                    var ratio = this._currentTime / this._totalTime, reversed = this._reverse && 1 == this._currentCycle % 2, numProperties = this._startValues.length;
                    for (i = 0; numProperties > i; ++i) {
                        isNaN(this._startValues[i]) && (this._startValues[i] = this._target[this._properties[i]]);
                        var startValue = this._startValues[i], endValue = this._endValues[i], delta = endValue - startValue, transitionValue = reversed ? this._transitionFunc(1 - ratio) : this._transitionFunc(ratio), currentValue = startValue + transitionValue * delta;
                        this._roundToInt && (currentValue = Math.round(currentValue)), this._target[this._properties[i]] = currentValue;
                    }
                    if (null != this._onUpdate && this._onUpdate.apply(null, this._onUpdateArgs), previousTime < this._totalTime && this._currentTime >= this._totalTime) if (0 == this._repeatCount || this._repeatCount > 1) this._currentTime = -this._repeatDelay, 
                    this._currentCycle++, this._repeatCount > 1 && this._repeatCount--, null != this._onRepeat && this._onRepeat.apply(null, this._onRepeatArgs); else {
                        var onComplete = this._onComplete, onCompleteArgs = this._onCompleteArgs;
                        this.dispatchEventWith(skylark.Event.REMOVE_FROM_JUGGLER), null != onComplete && onComplete.apply(null, onCompleteArgs);
                    }
                    carryOverTime && this.advanceTime(carryOverTime);
                }
            }
        }, Object.defineProperty(Tween.prototype, "isComplete", {
            get: function() {
                return this._currentTime >= this._totalTime && 1 == this._repeatCount;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "target", {
            get: function() {
                return this._target;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "transition", {
            get: function() {
                return this._transitionName;
            },
            set: function(value) {
                if (this._transitionName = value, this._transitionFunc = skylark.Transitions.getTransition(value), 
                null == this._transitionFunc) throw new skylark.ArgumentError("Invalid transiton: " + value);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "transitionFunc", {
            get: function() {
                return this._transitionFunc;
            },
            set: function(value) {
                this._transitionName = "custom", this._transitionFunc = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "totalTime", {
            get: function() {
                return this._totalTime;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "currentTime", {
            get: function() {
                return this._currentTime;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "delay", {
            get: function() {
                return this._delay;
            },
            set: function(value) {
                this._currentTime = this._currentTime + this._delay - value, this._delay = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "repeatCount", {
            get: function() {
                return this._repeatCount;
            },
            set: function(value) {
                this._repeatCount = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "repeatDelay", {
            get: function() {
                return this._repeatDelay;
            },
            set: function(value) {
                this._repeatDelay = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "reverse", {
            get: function() {
                return this._reverse;
            },
            set: function(value) {
                this._reverse = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "roundToInt", {
            get: function() {
                return this._roundToInt;
            },
            set: function(value) {
                this._roundToInt = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "onStart", {
            get: function() {
                return this._onStart;
            },
            set: function(value) {
                this._onStart = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "onUpdate", {
            get: function() {
                return this._onUpdate;
            },
            set: function(value) {
                this._onUpdate = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "onRepeat", {
            get: function() {
                return this._onRepeat;
            },
            set: function(value) {
                this._onRepeat = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "onComplete", {
            get: function() {
                return this._onComplete;
            },
            set: function(value) {
                this._onComplete = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "onStartArgs", {
            get: function() {
                return this._onStartArgs;
            },
            set: function(value) {
                this._onStartArgs = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "onUpdateArgs", {
            get: function() {
                return this._onUpdateArgs;
            },
            set: function(value) {
                this._onUpdateArgs = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "onRepeatArgs", {
            get: function() {
                return this._onRepeatArgs;
            },
            set: function(value) {
                this._onRepeatArgs = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "onCompleteArgs", {
            get: function() {
                return this._onCompleteArgs;
            },
            set: function(value) {
                this._onCompleteArgs = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Tween.prototype, "nextTween", {
            get: function() {
                return this._nextTween;
            },
            set: function(value) {
                this._nextTween = value;
            },
            enumerable: !0,
            configurable: !0
        }), Tween.fromPool = function(target, time, transition) {
            return "undefined" == typeof transition && (transition = "linear"), Tween._tweenPool.length ? Tween._tweenPool.pop().reset(target, time, transition) : new Tween(target, time, transition);
        }, Tween.toPool = function(tween) {
            tween._onStart = tween._onUpdate = tween._onRepeat = tween._onComplete = null, tween._onStartArgs = tween._onUpdateArgs = tween._onRepeatArgs = tween._onCompleteArgs = null, 
            tween._target = null, tween._transitionFunc = null, tween.removeEventListeners(), 
            Tween._tweenPool.push(tween);
        }, Tween._tweenPool = [], Tween;
    }(skylark.EventDispatcher);
    skylark.Tween = Tween;
}(skylark || (skylark = {})), function(m) {
    m.ErrorImpl = Error;
}(skylark);

var skylark;

!function(skylark) {
    var DefaultError = function(_super) {
        function DefaultError(msg) {
            _super.call(this, msg), null == this.name && (this.name = "DefaultError"), this.message = msg, 
            this.stack = new Error("[" + this.name + "] " + msg).stack;
        }
        return __extends(DefaultError, _super), DefaultError;
    }(skylark.ErrorImpl);
    skylark.DefaultError = DefaultError;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var AbstractClassError = function(_super) {
        function AbstractClassError(msg) {
            "undefined" == typeof msg && (msg = null), _super.call(this, msg);
        }
        return __extends(AbstractClassError, _super), AbstractClassError;
    }(skylark.DefaultError);
    skylark.AbstractClassError = AbstractClassError;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var AbstractMethodError = function(_super) {
        function AbstractMethodError(msg) {
            _super.call(this, msg || "ABSTRACT METHOD ERROR: Method must be implemented in a sub-class.");
        }
        return __extends(AbstractMethodError, _super), AbstractMethodError;
    }(skylark.DefaultError);
    skylark.AbstractMethodError = AbstractMethodError;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var ArgumentError = function(_super) {
        function ArgumentError(msg) {
            this.name = "ArgumentError", _super.call(this, msg);
        }
        return __extends(ArgumentError, _super), ArgumentError;
    }(skylark.DefaultError);
    skylark.ArgumentError = ArgumentError;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var IllegalOperationError = function(_super) {
        function IllegalOperationError(msg) {
            _super.call(this, msg);
        }
        return __extends(IllegalOperationError, _super), IllegalOperationError;
    }(skylark.DefaultError);
    skylark.IllegalOperationError = IllegalOperationError;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var IllegalSystemStateError = function(_super) {
        function IllegalSystemStateError(msg) {
            _super.call(this, msg);
        }
        return __extends(IllegalSystemStateError, _super), IllegalSystemStateError;
    }(skylark.DefaultError);
    skylark.IllegalSystemStateError = IllegalSystemStateError;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var MissingContextError = function(_super) {
        function MissingContextError(msg) {
            "undefined" == typeof msg && (msg = null), _super.call(this, msg);
        }
        return __extends(MissingContextError, _super), MissingContextError;
    }(skylark.DefaultError);
    skylark.MissingContextError = MissingContextError;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var InvalidXmlError = function(_super) {
        function InvalidXmlError(msg, xml, errors) {
            "undefined" == typeof msg && (msg = null), "undefined" == typeof xml && (xml = null), 
            "undefined" == typeof errors && (errors = null), _super.call(this, msg), this.name = "InvalidXmlError", 
            this._xml = xml, this._parserErrors = errors;
        }
        return __extends(InvalidXmlError, _super), InvalidXmlError.prototype.toString = function() {
            return this.message + " | " + this._parserErrors[0].textContent;
        }, InvalidXmlError;
    }(skylark.DefaultError);
    skylark.InvalidXmlError = InvalidXmlError;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var _Bitmap = skylark.Bitmap, Texture = function() {
        function Texture() {
            this._repeat = !1;
        }
        return Texture.prototype.dispose = function() {}, Texture.createBitmap = function(width, height, color) {
            for (var rows = [], pixel = [ skylark.Color.getRed(color), skylark.Color.getGreen(color), skylark.Color.getBlue(color) ], row = [], j = 0; width > j; j++) row.push(pixel);
            for (var i = 0; height > i; i++) rows.push(row);
            var image = new NativeImage();
            return image.src = _Bitmap.create(rows, 1), image.width = width, image.height = height, 
            image;
        }, Texture.empty = function(width, height, premultipliedAlpha, mipMapping, optimizeForRenderToTexture, scale) {
            "undefined" == typeof premultipliedAlpha && (premultipliedAlpha = !0), "undefined" == typeof mipMapping && (mipMapping = !0), 
            "undefined" == typeof optimizeForRenderToTexture && (optimizeForRenderToTexture = !1), 
            "undefined" == typeof scale && (scale = -1), 0 >= scale && (scale = skylark.Skylark.contentScaleFactor);
            var origWidth = width * scale, origHeight = height * scale, potWidth = skylark.MathUtil.getNextPowerOfTwo(origWidth), potHeight = skylark.MathUtil.getNextPowerOfTwo(origHeight), image = Texture.createBitmap(potWidth, potHeight, 16777215), concreteTexture = new skylark.ConcreteTexture(image);
            return new skylark.SubTexture(concreteTexture, new skylark.Rectangle(0, 0, width, height), !0);
        }, Texture.fromTexture = function(texture, region, frame) {
            "undefined" == typeof region && (region = null), "undefined" == typeof frame && (frame = null);
            var subTexture = new skylark.SubTexture(texture, region);
            return subTexture._frame = frame, subTexture;
        }, Texture.fromCanvas = function(canvas, generateMipMaps, scale) {
            "undefined" == typeof generateMipMaps && (generateMipMaps = !0), "undefined" == typeof scale && (scale = 1);
            var image = new NativeImage();
            return image.src = canvas.toDataURL(), image.width = canvas.width, image.height = canvas.height, 
            new skylark.ConcreteTexture(image, scale);
        }, Texture.fromColor = function(width, height, color, optimizeForRenderToTexture, scale) {
            "undefined" == typeof color && (color = 4294967295), "undefined" == typeof optimizeForRenderToTexture && (optimizeForRenderToTexture = !1), 
            "undefined" == typeof scale && (scale = -1), 0 >= scale && (scale = skylark.Skylark.contentScaleFactor);
            var bitmapData = new skylark.BitmapData(width * scale, height * scale, !0, color), texture = Texture.fromBitmapData(bitmapData, !1, optimizeForRenderToTexture, scale);
            return texture;
        }, Texture.fromEmbedded = function(base64String, width, height) {
            var image = new NativeImage();
            return image.src = base64String, image.width = width, image.height = height, new skylark.ConcreteTexture(image);
        }, Texture.fromBitmapData = function(data, generateMipMaps, optimizeForRenderToTexture, scale) {
            "undefined" == typeof generateMipMaps && (generateMipMaps = !0), "undefined" == typeof optimizeForRenderToTexture && (optimizeForRenderToTexture = !1), 
            "undefined" == typeof scale && (scale = 1);
            var origWidth = data.width, origHeight = data.height, legalWidth = skylark.MathUtil.getNextPowerOfTwo(origWidth), legalHeight = skylark.MathUtil.getNextPowerOfTwo(origHeight), image = new NativeImage();
            image.src = data.asUrl(), console.log("fromBitmapData", origWidth, origHeight, legalWidth, legalHeight), 
            image.width = origWidth, image.height = origHeight;
            var concreteTexture = new skylark.ConcreteTexture(image);
            return origWidth == legalWidth && origHeight == legalHeight ? concreteTexture : new skylark.SubTexture(concreteTexture, new skylark.Rectangle(0, 0, origWidth / scale, origHeight / scale), !0);
        }, Texture.prototype.adjustVertexData = function(vertexData, vertexID, count) {
            var frame = this._frame;
            if (frame) {
                if (4 != count) throw new skylark.ArgumentError("Textures with a frame can only be used on quads");
                var deltaRight = frame.width + frame.x - this.width, deltaBottom = frame.height + frame.y - this.height;
                vertexData.translateVertex(vertexID, -frame.x, -frame.y), vertexData.translateVertex(vertexID + 1, -deltaRight, -frame.y), 
                vertexData.translateVertex(vertexID + 2, -frame.x, -deltaBottom), vertexData.translateVertex(vertexID + 3, -deltaRight, -deltaBottom);
            }
        }, Object.defineProperty(Texture.prototype, "frame", {
            get: function() {
                return this._frame ? this._frame.clone() : new skylark.Rectangle(0, 0, this.width, this.height);
            },
            enumerable: !0,
            configurable: !0
        }), Texture.prototype.hasFrame = function() {
            return null !== this._frame;
        }, Object.defineProperty(Texture.prototype, "repeat", {
            get: function() {
                return this._repeat;
            },
            set: function(value) {
                this._repeat = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Texture.prototype, "width", {
            get: function() {
                return 0;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Texture.prototype, "height", {
            get: function() {
                return 0;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Texture.prototype, "nativeWidth", {
            get: function() {
                return 0;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Texture.prototype, "nativeHeight", {
            get: function() {
                return 0;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Texture.prototype, "scale", {
            get: function() {
                return 1;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Texture.prototype, "base", {
            get: function() {
                return null;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Texture.prototype, "root", {
            get: function() {
                return null;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(Texture.prototype, "premultipliedAlpha", {
            get: function() {
                return !1;
            },
            enumerable: !0,
            configurable: !0
        }), Texture._origin = new skylark.Point(), Texture;
    }();
    skylark.Texture = Texture;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var ConcreteTexture = function(_super) {
        function ConcreteTexture(a, b, c) {
            _super.call(this);
            var base, scale = 1;
            "object" == typeof a ? (base = skylark.ClassUtil.isCanvasImageSource(a) ? new skylark.DefaultImageSource(a) : a, 
            scale = null != b ? b : scale, this._width = base.width, this._height = base.height) : (scale = null != c ? c : scale, 
            this._width = a, this._height = b, skylark.Arguments.number(a, b, scale)), this._base = base, 
            this._scale = 0 >= scale ? 1 : scale;
        }
        return __extends(ConcreteTexture, _super), ConcreteTexture.prototype.dispose = function() {
            this._base && this._base.dispose(), _super.prototype.dispose.call(this);
        }, Object.defineProperty(ConcreteTexture.prototype, "base", {
            get: function() {
                return this._base;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(ConcreteTexture.prototype, "root", {
            get: function() {
                return this;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(ConcreteTexture.prototype, "width", {
            get: function() {
                return this._width / this._scale;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(ConcreteTexture.prototype, "height", {
            get: function() {
                return this._height / this._scale;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(ConcreteTexture.prototype, "nativeWidth", {
            get: function() {
                return this._width;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(ConcreteTexture.prototype, "nativeHeight", {
            get: function() {
                return this._height;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(ConcreteTexture.prototype, "scale", {
            get: function() {
                return this._scale;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(ConcreteTexture.prototype, "mipMapping", {
            get: function() {
                return this._mipMapping;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(ConcreteTexture.prototype, "premultipliedAlpha", {
            get: function() {
                return this._premultipliedAlpha;
            },
            enumerable: !0,
            configurable: !0
        }), ConcreteTexture.prototype.clear = function(color, alpha) {
            "undefined" == typeof color && (color = 0), "undefined" == typeof alpha && (alpha = 0);
            var canvas = skylark.Skylark.getHelperCanvas(this.width, this.height), context = canvas.getContext("2d"), Color = Color;
            this._premultipliedAlpha && 1 > alpha && (color = Color.rgb(Color.getRed(color) * alpha, Color.getGreen(color) * alpha, Color.getBlue(color) * alpha)), 
            this._base, skylark.RenderSupport.clear(context, color, alpha);
        }, ConcreteTexture.prototype.render = function(support, context) {
            context.drawImage(this.base.image, 0, 0);
        }, ConcreteTexture;
    }(skylark.Texture);
    skylark.ConcreteTexture = ConcreteTexture;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var SubTexture = function(_super) {
        function SubTexture(parentTexture, region, ownsParent) {
            "undefined" == typeof ownsParent && (ownsParent = !1), _super.call(this), this._parent = parentTexture, 
            this._ownsParent = ownsParent, null == region ? this.setClipping(new skylark.Rectangle(0, 0, 1, 1)) : this.setClipping(new skylark.Rectangle(region.x / parentTexture.width, region.y / parentTexture.height, region.width / parentTexture.width, region.height / parentTexture.height));
        }
        return __extends(SubTexture, _super), SubTexture.prototype.dispose = function() {
            this._ownsParent && this._parent.dispose(), _super.prototype.dispose.call(this);
        }, SubTexture.prototype.setClipping = function(value) {
            this._clipping = value, this._rootClipping = value.clone();
            for (var parentTexture = this._parent; parentTexture && parentTexture instanceof SubTexture; ) {
                var parentClipping = parentTexture._clipping;
                this._rootClipping.x = parentClipping.x + this._rootClipping.x * parentClipping.width, 
                this._rootClipping.y = parentClipping.y + this._rootClipping.y * parentClipping.height, 
                this._rootClipping.width *= parentClipping.width, this._rootClipping.height *= parentClipping.height, 
                parentTexture = parentTexture._parent;
            }
        }, SubTexture.prototype.adjustVertexData = function(vertexData, vertexID, count) {
            _super.prototype.adjustVertexData.call(this, vertexData, vertexID, count);
            for (var _rootClipping = this._rootClipping, clipX = _rootClipping.x, clipY = _rootClipping.y, clipWidth = _rootClipping.width, clipHeight = _rootClipping.height, endIndex = vertexID + count, i = vertexID; endIndex > i; ++i) vertexData.getTexCoords(i, SubTexture._texCoords), 
            vertexData.setTexCoords(i, clipX + SubTexture._texCoords.x * clipWidth, clipY + SubTexture._texCoords.y * clipHeight);
        }, Object.defineProperty(SubTexture.prototype, "parent", {
            get: function() {
                return this._parent;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(SubTexture.prototype, "ownsParent", {
            get: function() {
                return this._ownsParent;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(SubTexture.prototype, "clipping", {
            get: function() {
                return this._clipping.clone();
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(SubTexture.prototype, "base", {
            get: function() {
                return this._parent.base;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(SubTexture.prototype, "root", {
            get: function() {
                return this._parent.root;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(SubTexture.prototype, "width", {
            get: function() {
                return this._parent.width * this._clipping.width;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(SubTexture.prototype, "height", {
            get: function() {
                return this._parent.height * this._clipping.height;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(SubTexture.prototype, "nativeWidth", {
            get: function() {
                return this._parent.nativeWidth * this._clipping.width;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(SubTexture.prototype, "nativeHeight", {
            get: function() {
                return this._parent.nativeHeight * this._clipping.height;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(SubTexture.prototype, "premultipliedAlpha", {
            get: function() {
                return this._parent.premultipliedAlpha;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(SubTexture.prototype, "scale", {
            get: function() {
                return this._parent.scale;
            },
            enumerable: !0,
            configurable: !0
        }), SubTexture._texCoords = new skylark.Point(), SubTexture;
    }(skylark.Texture);
    skylark.SubTexture = SubTexture;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var TextureSmoothing = function() {
        function TextureSmoothing() {
            throw new skylark.AbstractClassError();
        }
        return TextureSmoothing.isValid = function(smoothing) {
            return smoothing == TextureSmoothing.NONE || smoothing == TextureSmoothing.BILINEAR || smoothing == TextureSmoothing.TRILINEAR;
        }, TextureSmoothing.NONE = "none", TextureSmoothing.BILINEAR = "bilinear", TextureSmoothing.TRILINEAR = "trilinear", 
        TextureSmoothing;
    }();
    skylark.TextureSmoothing = TextureSmoothing;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var TextureAtlas = function() {
        function TextureAtlas(texture, atlasXml) {
            "undefined" == typeof atlasXml && (atlasXml = null), this._names = [], this._textureRegions = {}, 
            this._textureFrames = {}, this._atlasTexture = texture, "string" == typeof atlasXml && (atlasXml = skylark.StringUtil.parseXml(atlasXml)), 
            null != atlasXml && this.parseAtlasXml(atlasXml);
        }
        return TextureAtlas.prototype.dispose = function() {
            this._atlasTexture.dispose();
        }, TextureAtlas.prototype.parseAtlasXml = function(xml) {
            for (var scale = this._atlasTexture.scale, textures = xml.getElementsByTagName("SubTexture"), i = 0; i < textures.length; i++) {
                var subTexture = textures[i], name = subTexture.getAttribute("name"), x = parseFloat(subTexture.getAttribute("x")) / scale, y = parseFloat(subTexture.getAttribute("y")) / scale, width = parseFloat(subTexture.getAttribute("width")) / scale, height = parseFloat(subTexture.getAttribute("height")) / scale, frameX = parseFloat(subTexture.getAttribute("frameX")) / scale, frameY = parseFloat(subTexture.getAttribute("frameY")) / scale, frameWidth = parseFloat(subTexture.getAttribute("frameWidth")) / scale, frameHeight = parseFloat(subTexture.getAttribute("frameHeight")) / scale, region = new skylark.Rectangle(x, y, width, height), frame = frameWidth > 0 && frameHeight > 0 ? new skylark.Rectangle(frameX, frameY, frameWidth, frameHeight) : null;
                this.addRegion(name, region, frame);
            }
        }, TextureAtlas.prototype.getTexture = function(name) {
            var region = this._textureRegions[name];
            return null == region ? null : skylark.Texture.fromTexture(this._atlasTexture, region, this._textureFrames[name]);
        }, TextureAtlas.prototype.getTextures = function(prefix, result) {
            "undefined" == typeof prefix && (prefix = ""), "undefined" == typeof result && (result = null), 
            null == result && (result = []);
            for (var names = this.getNames(prefix, this._names), i = 0; i < names.length; i++) result.push(this.getTexture(names[i]));
            return this._names.length = 0, result;
        }, TextureAtlas.prototype.getNames = function(prefix, result) {
            "undefined" == typeof prefix && (prefix = ""), "undefined" == typeof result && (result = null), 
            null == result && (result = []);
            for (var name in this._textureRegions) 0 === name.indexOf(prefix) && result.push(name);
            return skylark.StringUtil.sortArray(result), result;
        }, TextureAtlas.prototype.getRegion = function(name) {
            return this._textureRegions[name];
        }, TextureAtlas.prototype.getFrame = function(name) {
            return this._textureFrames[name];
        }, TextureAtlas.prototype.addRegion = function(name, region, frame) {
            "undefined" == typeof frame && (frame = null), this._textureRegions[name] = region, 
            this._textureFrames[name] = frame;
        }, TextureAtlas.prototype.removeRegion = function(name) {
            delete this._textureRegions[name], delete this._textureFrames[name];
        }, TextureAtlas;
    }();
    skylark.TextureAtlas = TextureAtlas;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var TextFieldAutoSize = function() {
        function TextFieldAutoSize() {
            throw new skylark.AbstractClassError();
        }
        return TextFieldAutoSize.NONE = "none", TextFieldAutoSize.HORIZONTAL = "horizontal", 
        TextFieldAutoSize.VERTICAL = "vertical", TextFieldAutoSize.BOTH_DIRECTIONS = "bothDirections", 
        TextFieldAutoSize;
    }();
    skylark.TextFieldAutoSize = TextFieldAutoSize;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var TextField = function(_super) {
        function TextField(width, height, txt, fontName, fontSize, color, bold) {
            "undefined" == typeof fontName && (fontName = "Verdana"), "undefined" == typeof fontSize && (fontSize = 12), 
            "undefined" == typeof color && (color = 0), "undefined" == typeof bold && (bold = !1), 
            _super.call(this), this._text = txt ? txt : "", this._fontSize = fontSize, this._color = color, 
            this.mHAlign = skylark.HAlign.CENTER, this.mVAlign = skylark.VAlign.CENTER, this._border = null, 
            this._kerning = !0, this._bold = bold, this._autoSize = skylark.TextFieldAutoSize.NONE, 
            this.fontName = fontName, this._hitArea = new skylark.Quad(width, height), this._hitArea.alpha = 0, 
            this.addChild(this._hitArea), this.addEventListener(skylark.Event.FLATTEN, this.onFlatten, this);
        }
        return __extends(TextField, _super), TextField.prototype.dispose = function() {
            this.removeEventListener(skylark.Event.FLATTEN, this.onFlatten, this), this._image && this._image.texture.dispose(), 
            this._quadBatch && this._quadBatch.dispose(), _super.prototype.dispose.call(this);
        }, TextField.prototype.onFlatten = function() {
            this._requiresRedraw && this.redraw();
        }, TextField.prototype.render = function(support) {
            this._requiresRedraw && this.redraw(), _super.prototype.render.call(this, support);
        }, TextField.prototype.redraw = function() {
            this._requiresRedraw && (this._isRenderedText ? this.createRenderedContents() : this.createComposedContents(), 
            this.updateBorder(), this._requiresRedraw = !1);
        }, TextField.prototype.createRenderedContents = function() {
            this._quadBatch && (this._quadBatch.removeFromParent(!0), this._quadBatch = null), 
            null == this._textBounds && (this._textBounds = new skylark.Rectangle());
            var scale = skylark.Skylark.contentScaleFactor;
            this._hitArea.width * scale, this._hitArea.height * scale;
            var imageSource = this.renderText(scale, this._textBounds), texture = new skylark.ConcreteTexture(imageSource, scale);
            null == this._image ? (this._image = new skylark.Image(texture), this._image.touchable = !1, 
            this.addChild(this._image)) : (this._image.texture.dispose(), this._image.texture = texture, 
            this._image.readjustSize());
        }, TextField.prototype.renderText = function(scale, resultTextBounds) {
            var _this = this, width = this._hitArea.width * scale, height = this._hitArea.height * scale, hAlign = this.mHAlign, vAlign = this.mVAlign, canvas = skylark.Skylark.getHelperCanvas(width, height), context = canvas.getContext("2d"), fontStr = function() {
                var str = [];
                return _this._bold && str.push("bold"), _this._italic && str.push("italic"), str.push(_this._fontSize * scale + "px"), 
                str.push(_this._fontName), str.join(" ");
            }();
            context.textAlign = hAlign, context.textBaseline = "top", context.font = fontStr, 
            context.fillStyle = skylark.Color.toHexString(this._color);
            var textHeight, textWidth, xOffset = 0, yOffset = 0, clipped = !1, fontSize = this._fontSize, lineHeight = 1.3 * fontSize;
            if (textWidth = context.measureText(this._text).width, textWidth > width) {
                var lines = [], text = this._text.split(/\s/g);
                textWidth = 0, textHeight = 0;
                var candidateWidth, lineWidth, candidate, championWidth = -1, idx = 0, champion = "";
                do {
                    for (candidate = champion; length > idx && (candidate += (candidate.length ? " " : "") + text[idx], 
                    !(text[idx].length > 0)); idx++) ;
                    if (candidateWidth = context.measureText(candidate).width, candidateWidth > width) {
                        if (-1 === championWidth ? (lines.push(candidate), lineWidth = candidateWidth, idx++) : (lines.push(champion), 
                        lineWidth = championWidth), textHeight += lineHeight, champion = "", championWidth = -1, 
                        textHeight + fontSize > height) break;
                    } else idx === length - 1 ? (lines.push(candidate), lineWidth = candidateWidth, 
                    textHeight += lineHeight, idx++) : (champion = candidate, championWidth = candidateWidth, 
                    idx++);
                    lineWidth > textWidth && (textWidth = lineWidth);
                } while (length > idx);
                textHeight -= lineHeight - fontSize, clipped = length > idx;
                var x, y;
                x = hAlign === skylark.HAlign.CENTER ? width / 2 : hAlign === skylark.HAlign.RIGHT ? width : 0, 
                vAlign === skylark.VAlign.TOP ? y = 0 : vAlign === skylark.VAlign.CENTER ? y = (height - textHeight) / 2 : vAlign === skylark.VAlign.BOTTOM && (y = height - lines.length * lineHeight);
                for (var i = 0; i < lines.length; i++) {
                    var line = lines[i];
                    context.fillText(line, x, y), y += lineHeight;
                }
            } else {
                textHeight = lineHeight;
                var x, y;
                context.textAlign = hAlign, context.textBaseline = vAlign, x = hAlign === skylark.HAlign.CENTER ? width / 2 : hAlign === skylark.HAlign.RIGHT ? width : 0, 
                vAlign === skylark.VAlign.TOP ? y = 0 : vAlign === skylark.VAlign.CENTER ? y = height / 2 : vAlign === skylark.VAlign.BOTTOM && (y = height), 
                context.fillText(this._text, x, y);
            }
            resultTextBounds.setTo(xOffset / scale, yOffset / scale, textWidth / scale, textHeight / scale);
            var image = new NativeImage();
            return image.src = canvas.toDataURL(), image.width = width, image.height = height, 
            image;
        }, TextField.prototype.createComposedContents = function() {
            this._image && (this._image.removeFromParent(!0), this._image = null);
            var bitmapFont = TextField.bitmapFonts[this._fontName];
            if (null == bitmapFont) throw new Error("Bitmap font not registered: " + this._fontName);
            var width = this._hitArea.width, height = this._hitArea.height, hAlign = this.mHAlign, vAlign = this.mVAlign;
            this.isHorizontalAutoSize && (width = Number.MAX_VALUE, hAlign = skylark.HAlign.LEFT), 
            this.isVerticalAutoSize && (height = Number.MAX_VALUE, vAlign = skylark.VAlign.TOP), 
            null == this._quadBatch && (this._quadBatch = bitmapFont.createSprite(width, height, this._text, this._fontSize, this._color, hAlign, vAlign, this._autoScale, this._kerning), 
            this._quadBatch.touchable = !1, this.addChild(this._quadBatch)), this._autoSize != skylark.TextFieldAutoSize.NONE ? (this._textBounds = this._quadBatch.getBounds(this._quadBatch, this._textBounds), 
            this.isHorizontalAutoSize && (this._hitArea.width = this._textBounds.x + this._textBounds.width), 
            this.isVerticalAutoSize && (this._hitArea.height = this._textBounds.y + this._textBounds.height)) : this._textBounds = null;
        }, TextField.prototype.updateBorder = function() {
            if (null != this._border) {
                var width = this._hitArea.width, height = this._hitArea.height, topLine = this._border.getChildAt(0), rightLine = this._border.getChildAt(1), bottomLine = this._border.getChildAt(2), leftLine = this._border.getChildAt(3);
                topLine.width = width, topLine.height = 1, bottomLine.width = width, bottomLine.height = 1, 
                leftLine.width = 1, leftLine.height = height, rightLine.width = 1, rightLine.height = height, 
                rightLine.x = width - 1, bottomLine.y = height - 1, topLine.color = rightLine.color = bottomLine.color = leftLine.color = this._color;
            }
        }, Object.defineProperty(TextField.prototype, "isHorizontalAutoSize", {
            get: function() {
                return this._autoSize == skylark.TextFieldAutoSize.HORIZONTAL || this._autoSize == skylark.TextFieldAutoSize.BOTH_DIRECTIONS;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "isVerticalAutoSize", {
            get: function() {
                return this._autoSize == skylark.TextFieldAutoSize.VERTICAL || this._autoSize == skylark.TextFieldAutoSize.BOTH_DIRECTIONS;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "textBounds", {
            get: function() {
                return this._requiresRedraw && this.redraw(), null == this._textBounds && (this._textBounds = this._quadBatch.getBounds(this._quadBatch)), 
                this._textBounds.clone();
            },
            enumerable: !0,
            configurable: !0
        }), TextField.prototype.getBounds = function(targetSpace, resultRect) {
            return "undefined" == typeof resultRect && (resultRect = null), this._requiresRedraw && this.redraw(), 
            this._hitArea.getBounds(targetSpace, resultRect);
        }, Object.defineProperty(TextField.prototype, "width", {
            set: function(value) {
                this._hitArea.width = value, this._requiresRedraw = !0;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "height", {
            set: function(value) {
                this._hitArea.height = value, this._requiresRedraw = !0;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "text", {
            get: function() {
                return this._text;
            },
            set: function(value) {
                null == value && (value = ""), this._text != value && (this._text = value, this._requiresRedraw = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "fontName", {
            get: function() {
                return this._fontName;
            },
            set: function(value) {
                this._fontName != value && (value == skylark.BitmapFont.MINI && null == TextField.bitmapFonts[value] && TextField.registerBitmapFont(new skylark.MiniBitmapFont()), 
                this._fontName = value, this._requiresRedraw = !0, this._isRenderedText = void 0 == TextField.bitmapFonts[value]);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "fontSize", {
            get: function() {
                return this._fontSize;
            },
            set: function(value) {
                this._fontSize != value && (this._fontSize = value, this._requiresRedraw = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "color", {
            get: function() {
                return this._color;
            },
            set: function(value) {
                this._color != value && (this._color = value, this._requiresRedraw = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "hAlign", {
            get: function() {
                return this.mHAlign;
            },
            set: function(value) {
                if (!skylark.HAlign.isValid(value)) throw new skylark.ArgumentError("Invalid horizontal align: " + value);
                this.mHAlign != value && (this.mHAlign = value, this._requiresRedraw = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "vAlign", {
            get: function() {
                return this.mVAlign;
            },
            set: function(value) {
                if (!skylark.VAlign.isValid(value)) throw new skylark.ArgumentError("Invalid vertical align: " + value);
                this.mVAlign != value && (this.mVAlign = value, this._requiresRedraw = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "border", {
            get: function() {
                return null != this._border;
            },
            set: function(value) {
                if (value && null == this._border) {
                    this._border = new skylark.Sprite(), this.addChild(this._border);
                    for (var i = 0; 4 > i; ++i) this._border.addChild(new skylark.Quad(1, 1));
                    this.updateBorder();
                } else value || null == this._border || (this._border.removeFromParent(!0), this._border = null);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "bold", {
            get: function() {
                return this._bold;
            },
            set: function(value) {
                this._bold != value && (this._bold = value, this._requiresRedraw = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "italic", {
            get: function() {
                return this._italic;
            },
            set: function(value) {
                this._italic != value && (this._italic = value, this._requiresRedraw = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "underline", {
            get: function() {
                return this._underline;
            },
            set: function(value) {
                this._underline != value && (this._underline = value, this._requiresRedraw = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "kerning", {
            get: function() {
                return this._kerning;
            },
            set: function(value) {
                this._kerning != value && (this._kerning = value, this._requiresRedraw = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "autoScale", {
            get: function() {
                return this._autoScale;
            },
            set: function(value) {
                this._autoScale != value && (this._autoScale = value, this._requiresRedraw = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "autoSize", {
            get: function() {
                return this._autoSize;
            },
            set: function(value) {
                this._autoSize != value && (this._autoSize = value, this._requiresRedraw = !0);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "batchable", {
            get: function() {
                return this._batchable;
            },
            set: function(value) {
                this._batchable = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(TextField.prototype, "nativeFilters", {
            get: function() {
                return this._nativeFilters;
            },
            set: function(value) {
                if (!this._isRenderedText) throw new Error("The TextField.nativeFilters property cannot be used on Bitmap fonts.");
                this._nativeFilters = value.concat(), this._requiresRedraw = !0;
            },
            enumerable: !0,
            configurable: !0
        }), TextField.registerBitmapFont = function(bitmapFont, name) {
            return "undefined" == typeof name && (name = null), null == name && (name = bitmapFont.name), 
            TextField.bitmapFonts[name] = bitmapFont, name;
        }, TextField.unregisterBitmapFont = function(name, dispose) {
            "undefined" == typeof dispose && (dispose = !0), dispose && void 0 != TextField.bitmapFonts[name] && TextField.bitmapFonts[name].dispose(), 
            delete TextField.bitmapFonts[name];
        }, TextField.getBitmapFont = function(name) {
            return TextField.bitmapFonts[name];
        }, Object.defineProperty(TextField, "bitmapFonts", {
            get: function() {
                var fonts = TextField._fonts;
                return null == fonts && (fonts = TextField._fonts = {}), fonts;
            },
            enumerable: !0,
            configurable: !0
        }), TextField.BITMAP_FONT_DATA_NAME = "skylark.TextField.BitmapFonts", TextField;
    }(skylark.DisplayObjectContainer);
    skylark.TextField = TextField;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var BitmapChar = function() {
        function BitmapChar(id, texture, xOffset, yOffset, xAdvance) {
            this._charID = id, this._texture = texture, this.mXOffset = xOffset, this.mYOffset = yOffset, 
            this.mXAdvance = xAdvance, this._kernings = null;
        }
        return BitmapChar.prototype.addKerning = function(charID, amount) {
            null == this._kernings && (this._kernings = []), this._kernings[charID] = amount;
        }, BitmapChar.prototype.getKerning = function(charID) {
            return null == this._kernings || void 0 == this._kernings[charID] ? 0 : this._kernings[charID];
        }, BitmapChar.prototype.createImage = function() {
            return new skylark.Image(this._texture);
        }, Object.defineProperty(BitmapChar.prototype, "charID", {
            get: function() {
                return this._charID;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(BitmapChar.prototype, "xOffset", {
            get: function() {
                return this.mXOffset;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(BitmapChar.prototype, "yOffset", {
            get: function() {
                return this.mYOffset;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(BitmapChar.prototype, "xAdvance", {
            get: function() {
                return this.mXAdvance;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(BitmapChar.prototype, "texture", {
            get: function() {
                return this._texture;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(BitmapChar.prototype, "width", {
            get: function() {
                return this._texture.width;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(BitmapChar.prototype, "height", {
            get: function() {
                return this._texture.height;
            },
            enumerable: !0,
            configurable: !0
        }), BitmapChar;
    }();
    skylark.BitmapChar = BitmapChar;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var BitmapFont = function() {
        function BitmapFont(texture, fontXml) {
            "undefined" == typeof texture && (texture = null), "undefined" == typeof fontXml && (fontXml = null), 
            null == texture && null == fontXml && (texture = skylark.MiniBitmapFont.texture, 
            fontXml = skylark.MiniBitmapFont.xml), this._name = "unknown", this._lineHeight = this._size = this._baseline = 14, 
            this._texture = texture, this._chars = {}, this._helperImage = new skylark.Image(texture), 
            this._charLocationPool = [], fontXml && this.parseFontXml(fontXml);
        }
        return BitmapFont.prototype.dispose = function() {
            this._texture && this._texture.dispose();
        }, BitmapFont.prototype.parseFontXml = function(a) {
            var fontXmlData, fontXml;
            fontXmlData = "string" == typeof a ? skylark.StringUtil.parseXml(a) : a, fontXmlData = skylark.StringUtil.xmlToJson(fontXmlData, !1), 
            fontXml = fontXmlData.font;
            var scale = this._texture.scale, frame = this._texture.frame;
            this._name = fontXml.info.attribute("face"), this._size = parseFloat(fontXml.info.attribute("size")) / scale, 
            this._lineHeight = parseFloat(fontXml.common.attribute("lineHeight")) / scale, this._baseline = parseFloat(fontXml.common.attribute("base")) / scale, 
            "0" == fontXml.info.attribute("smooth").toString() && (this.smoothing = skylark.TextureSmoothing.NONE), 
            this._size <= 0 && (console.log("[Skylark] Warning: invalid font size in '" + this._name + "' font."), 
            this._size = 0 == this._size ? 16 : -1 * this._size);
            for (var chars = fontXml.chars.char, i = 0; i < chars.length; i++) {
                var charElement = chars[i], id = parseInt(charElement.attribute("id")), xOffset = parseFloat(charElement.attribute("xoffset")) / scale, yOffset = parseFloat(charElement.attribute("yoffset")) / scale, xAdvance = parseFloat(charElement.attribute("xadvance")) / scale, region = new skylark.Rectangle();
                region.x = parseFloat(charElement.attribute("x")) / scale + frame.x, region.y = parseFloat(charElement.attribute("y")) / scale + frame.y, 
                region.width = parseFloat(charElement.attribute("width")) / scale, region.height = parseFloat(charElement.attribute("height")) / scale;
                var texture = skylark.Texture.fromTexture(this._texture, region), bitmapChar = new skylark.BitmapChar(id, texture, xOffset, yOffset, xAdvance);
                this.addChar(id, bitmapChar);
            }
            if (fontXml.kernings) for (var kernings = fontXml.kernings.kerning, i = 0; i < kernings.length; i++) {
                var kerningElement = kernings[i], first = parseInt(kerningElement.attribute("first")), second = parseInt(kerningElement.attribute("second")), amount = parseFloat(kerningElement.attribute("amount")) / scale;
                second in this._chars && this.getChar(second).addKerning(first, amount);
            }
        }, BitmapFont.prototype.getChar = function(charID) {
            return this._chars[charID];
        }, BitmapFont.prototype.addChar = function(charID, bitmapChar) {
            this._chars[charID] = bitmapChar;
        }, BitmapFont.prototype.createSprite = function(width, height, text, fontSize, color, hAlign, vAlign, autoScale, kerning) {
            "undefined" == typeof fontSize && (fontSize = -1), "undefined" == typeof color && (color = 16777215), 
            "undefined" == typeof hAlign && (hAlign = skylark.HAlign.CENTER), "undefined" == typeof vAlign && (vAlign = skylark.VAlign.MIDDLE), 
            "undefined" == typeof autoScale && (autoScale = !0), "undefined" == typeof kerning && (kerning = !0);
            for (var charLocations = this.arrangeChars(width, height, text, fontSize, hAlign, vAlign, autoScale, kerning), numChars = charLocations.length, sprite = new skylark.Sprite(), i = 0; numChars > i; ++i) {
                var charLocation = charLocations[i], char = charLocation.char.createImage();
                char.x = charLocation.x, char.y = charLocation.y, char.scaleX = char.scaleY = charLocation.scale, 
                sprite.addChild(char);
            }
            return sprite;
        }, BitmapFont.prototype.fillQuadBatch = function(quadBatch, width, height, text, fontSize, color, hAlign, vAlign, autoScale, kerning) {
            "undefined" == typeof fontSize && (fontSize = -1), "undefined" == typeof color && (color = 16777215), 
            "undefined" == typeof hAlign && (hAlign = skylark.HAlign.CENTER), "undefined" == typeof vAlign && (vAlign = skylark.VAlign.MIDDLE), 
            "undefined" == typeof autoScale && (autoScale = !0), "undefined" == typeof kerning && (kerning = !0);
            var charLocations = this.arrangeChars(width, height, text, fontSize, hAlign, vAlign, autoScale, kerning), numChars = charLocations.length;
            if (this._helperImage.color = color, numChars > 8192) throw new skylark.ArgumentError("Bitmap Font text is limited to 8192 characters.");
            for (var i = 0; numChars > i; ++i) {
                var charLocation = charLocations[i];
                this._helperImage.texture = charLocation.char.texture, this._helperImage.readjustSize(), 
                this._helperImage.x = charLocation.x, this._helperImage.y = charLocation.y, this._helperImage.scaleX = this._helperImage.scaleY = charLocation.scale, 
                quadBatch.addImage(this._helperImage);
            }
        }, BitmapFont.prototype.arrangeChars = function(width, height, txt, fontSize, hAlign, vAlign, autoScale, kerning) {
            if ("undefined" == typeof fontSize && (fontSize = -1), "undefined" == typeof hAlign && (hAlign = skylark.HAlign.CENTER), 
            "undefined" == typeof vAlign && (vAlign = skylark.VAlign.MIDDLE), "undefined" == typeof autoScale && (autoScale = !0), 
            "undefined" == typeof kerning && (kerning = !0), null == txt || 0 == txt.length) return [];
            0 > fontSize && (fontSize *= -this._size);
            for (var lines, charLocation, numChars, containerWidth, containerHeight, scale, finished = !1; !finished; ) {
                if (scale = fontSize / this._size, containerWidth = width / scale, containerHeight = height / scale, 
                lines = [], this._lineHeight <= containerHeight) {
                    var lastWhiteSpace = -1, lastCharID = -1, currentX = 0, currentY = 0, currentLine = [];
                    numChars = txt.length;
                    for (var i = 0; numChars > i; ++i) {
                        var lineFull = !1, charID = txt.charCodeAt(i), char = this.getChar(charID);
                        if (charID == BitmapFont.CHAR_NEWLINE || charID == BitmapFont.CHAR_CARRIAGE_RETURN) lineFull = !0; else if (null == char) console.log("[Skylark] Missing character: " + charID); else if ((charID == BitmapFont.CHAR_SPACE || charID == BitmapFont.CHAR_TAB) && (lastWhiteSpace = i), 
                        kerning && (currentX += char.getKerning(lastCharID)), charLocation = this._charLocationPool.length ? this._charLocationPool.pop() : new CharLocation(char), 
                        charLocation.char = char, charLocation.x = currentX + char.xOffset, charLocation.y = currentY + char.yOffset, 
                        currentLine.push(charLocation), currentX += char.xAdvance, lastCharID = charID, 
                        charLocation.x + char.width > containerWidth) {
                            var numCharsToRemove = -1 == lastWhiteSpace ? 1 : i - lastWhiteSpace, removeIndex = currentLine.length - numCharsToRemove;
                            if (currentLine.splice(removeIndex, numCharsToRemove), 0 == currentLine.length) break;
                            i -= numCharsToRemove, lineFull = !0;
                        }
                        if (i == numChars - 1) lines.push(currentLine), finished = !0; else if (lineFull) {
                            if (lines.push(currentLine), lastWhiteSpace == i && currentLine.pop(), !(currentY + 2 * this._lineHeight <= containerHeight)) break;
                            currentLine = [], currentX = 0, currentY += this._lineHeight, lastWhiteSpace = -1, 
                            lastCharID = -1;
                        }
                    }
                }
                autoScale && !finished ? (fontSize -= 1, lines.length = 0) : finished = !0;
            }
            var finalLocations = [], numLines = lines.length, bottom = currentY + this._lineHeight, yOffset = 0;
            vAlign == skylark.VAlign.BOTTOM ? yOffset = containerHeight - bottom : vAlign == skylark.VAlign.CENTER && (yOffset = (containerHeight - bottom) / 2);
            for (var lineID = 0; numLines > lineID; ++lineID) {
                var line = lines[lineID];
                if (numChars = line.length, 0 != numChars) {
                    var xOffset = 0, lastLocation = line[line.length - 1], right = lastLocation.x - lastLocation.char.xOffset + lastLocation.char.xAdvance;
                    hAlign == skylark.HAlign.RIGHT ? xOffset = containerWidth - right : hAlign == skylark.HAlign.CENTER && (xOffset = (containerWidth - right) / 2);
                    for (var c = 0; numChars > c; ++c) charLocation = line[c], charLocation.x = scale * (charLocation.x + xOffset), 
                    charLocation.y = scale * (charLocation.y + yOffset), charLocation.scale = scale, 
                    charLocation.char.width > 0 && charLocation.char.height > 0 && finalLocations.push(charLocation), 
                    this._charLocationPool.push(charLocation);
                }
            }
            return finalLocations;
        }, Object.defineProperty(BitmapFont.prototype, "name", {
            get: function() {
                return this._name;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(BitmapFont.prototype, "size", {
            get: function() {
                return this._size;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(BitmapFont.prototype, "lineHeight", {
            get: function() {
                return this._lineHeight;
            },
            set: function(value) {
                this._lineHeight = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(BitmapFont.prototype, "smoothing", {
            get: function() {
                return this._helperImage.smoothing;
            },
            set: function(value) {
                this._helperImage.smoothing = value;
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(BitmapFont.prototype, "baseline", {
            get: function() {
                return this._baseline;
            },
            enumerable: !0,
            configurable: !0
        }), BitmapFont.NATIVE_SIZE = -1, BitmapFont.MINI = "mini", BitmapFont.CHAR_SPACE = 32, 
        BitmapFont.CHAR_TAB = 9, BitmapFont.CHAR_NEWLINE = 10, BitmapFont.CHAR_CARRIAGE_RETURN = 13, 
        BitmapFont;
    }();
    skylark.BitmapFont = BitmapFont;
    var CharLocation = function() {
        function CharLocation(char) {
            this.char = char;
        }
        return CharLocation;
    }();
    skylark.CharLocation = CharLocation;
}(skylark || (skylark = {}));

var skylark;

!function(skylark) {
    var MiniBitmapFont = function(_super) {
        function MiniBitmapFont() {
            _super.call(this, MiniBitmapFont.texture, MiniBitmapFont.xml);
        }
        return __extends(MiniBitmapFont, _super), Object.defineProperty(MiniBitmapFont, "texture", {
            get: function() {
                var img = new NativeImage();
                return img.src = MiniBitmapFont.IMAGE_DATA, img.width = MiniBitmapFont.BITMAP_WIDTH, 
                img.height = MiniBitmapFont.BITMAP_HEIGHT, new skylark.ConcreteTexture(img);
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(MiniBitmapFont, "xml", {
            get: function() {
                return MiniBitmapFont.XML_DATA;
            },
            enumerable: !0,
            configurable: !0
        }), MiniBitmapFont.IMAGE_DATA = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAABABAMAAAAg+GJMAAAAJFBMVEUAAAD///////////////////////////////////////////+0CY3pAAAAC3RSTlMAAgQGCg4QFNn5/aulndcAAANHSURBVFhH7ZYxrhtHEESf4J+9RLGu4NCRoHQBBZv5EEp8AAVMfAQf4R+hAgIK6nIOenZJSt+GjW/IiRrN4XA4XV1dPcshvNrevFkubyFAELybfzshRATg3bvl4dkjNHw5YV6eKAkAz8/LH23Q/41JIs3ptuO3FTydHAwakUYS3fabsyjfrZzROQHcdieQxDOrrc3yu8QLQG4ArbpI9HHjXzO4B0Cp2w75KtM3Gtz8a4ARD0eV721zMhpyOoSix+wtJIKY20wgQAsjyw1SJMkxe9YpmtzPwCFAI4xaD0h/b3b2NkeD8NNv4qg5Q+y0926NOGfmadqAK/d5YrZc9xk+5nqZgXNtywEwDCYOEfzlwyPAzjUzvAQw9a/gLA3GF/G7EsithHNtuvBakxFFqYlluh8xFut8yog69Mk6MECmb7OS6xan03JUTSzw5XIjrfNakUc0SYjQ5gEg0Dl7lh45l+mHO4DrlgZCs9pfmuCW605z1W2V8DIDi2tpkRRiB0BeBDgkCQmkpU1Yz4sUVm8zJVjiocGh2OrCgH5fa1szNDLVBwsWm3mjx9imjV01g7/+DFQGYCTjy+cFuRNy3ZKnhBk5PKNR22CSSJL8npCVvdltJiuBPI3EpGnTALKORyKReThXaxaDI/c9g5wMcKGbeZ+WreKDJeReg8CdBq82UZykU6/tLC4/LznWb9fNEUyNbruMjyzKdDWwNorO7PPFz5d1meEYHgxyA1j7oaU5qTBEZ8Ps7XGbZ+U/0wvBqRXBSQ+67eRBg5k3yMkDOe7YMN/euSPja+3IjRynwyNHhwqrGJyKmgYJdELDVGo7MOv/xK5bYQEUa8kpSyNhXTATnQyGVkurF9sBeMpVSQJzSWRffYWQA0No3Hb3ol53wHuAOtUcDBh5uWkw39GgS4PSTglLI6EJyn9ggxMy/MZqJFJ7XIYNJwdJKzFgCfHiBcTDM6/tenFL8GOiW8oUUQjlWiCCDEyOB+MGkAHYiW5hqTBi053pQKYYmXAX/dD1GNEJmxOc+xJGg+OILAlOgb6HqTHaEm2dmvLTHyRJiM7T2Kr9hp5BOmcrjHwXwvv3ujr2dcijOSoMA1BCXLL+E5M5NT/sh/2v9idsZLc1sYX4WAAAAABJRU5ErkJggg==", 
        MiniBitmapFont.BITMAP_WIDTH = 128, MiniBitmapFont.BITMAP_HEIGHT = 64, MiniBitmapFont.XML_DATA = '<?xml version="1.0" encoding="UTF-8"?><font>    <info face="mini" size="8" bold="0" italic="0" smooth="0" />    <common lineHeight="8" base="7" scaleW="128" scaleH="64" pages="1" packed="0" />    <chars count="191">        <char id="195" x="1" y="1" width="5" height="9" xoffset="0" yoffset="-2" xadvance="6" />        <char id="209" x="7" y="1" width="5" height="9" xoffset="0" yoffset="-2" xadvance="6" />        <char id="213" x="13" y="1" width="5" height="9" xoffset="0" yoffset="-2" xadvance="6" />        <char id="253" x="19" y="1" width="4" height="9" xoffset="0" yoffset="0" xadvance="5" />        <char id="255" x="24" y="1" width="4" height="9" xoffset="0" yoffset="0" xadvance="5" />        <char id="192" x="29" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6" />        <char id="193" x="35" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6" />        <char id="194" x="41" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6" />        <char id="197" x="47" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6" />        <char id="200" x="53" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6" />        <char id="201" x="59" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6" />        <char id="202" x="65" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6" />        <char id="210" x="71" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6" />        <char id="211" x="77" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6" />        <char id="212" x="83" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6" />        <char id="217" x="89" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6" />        <char id="218" x="95" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6" />        <char id="219" x="101" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6" />        <char id="221" x="107" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6" />        <char id="206" x="113" y="1" width="3" height="8" xoffset="-1" yoffset="-1" xadvance="2" />        <char id="204" x="117" y="1" width="2" height="8" xoffset="-1" yoffset="-1" xadvance="2" />        <char id="205" x="120" y="1" width="2" height="8" xoffset="0" yoffset="-1" xadvance="2" />        <char id="36" x="1" y="11" width="5" height="7" xoffset="0" yoffset="1" xadvance="6" />        <char id="196" x="7" y="11" width="5" height="7" xoffset="0" yoffset="0" xadvance="6" />        <char id="199" x="13" y="11" width="5" height="7" xoffset="0" yoffset="2" xadvance="6" />        <char id="203" x="19" y="11" width="5" height="7" xoffset="0" yoffset="0" xadvance="6" />        <char id="214" x="25" y="11" width="5" height="7" xoffset="0" yoffset="0" xadvance="6" />        <char id="220" x="31" y="11" width="5" height="7" xoffset="0" yoffset="0" xadvance="6" />        <char id="224" x="37" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5" />        <char id="225" x="42" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5" />        <char id="226" x="47" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5" />        <char id="227" x="52" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5" />        <char id="232" x="57" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5" />        <char id="233" x="62" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5" />        <char id="234" x="67" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5" />        <char id="235" x="72" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5" />        <char id="241" x="77" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5" />        <char id="242" x="82" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5" />        <char id="243" x="87" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5" />        <char id="244" x="92" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5" />        <char id="245" x="97" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5" />        <char id="249" x="102" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5" />        <char id="250" x="107" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5" />        <char id="251" x="112" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5" />        <char id="254" x="117" y="11" width="4" height="7" xoffset="0" yoffset="2" xadvance="5" />        <char id="123" x="122" y="11" width="3" height="7" xoffset="0" yoffset="1" xadvance="4" />        <char id="125" x="1" y="19" width="3" height="7" xoffset="0" yoffset="1" xadvance="4" />        <char id="167" x="5" y="19" width="3" height="7" xoffset="0" yoffset="1" xadvance="4" />        <char id="207" x="9" y="19" width="3" height="7" xoffset="-1" yoffset="0" xadvance="2" />        <char id="106" x="13" y="19" width="2" height="7" xoffset="0" yoffset="2" xadvance="3" />        <char id="40" x="16" y="19" width="2" height="7" xoffset="0" yoffset="1" xadvance="3" />        <char id="41" x="19" y="19" width="2" height="7" xoffset="0" yoffset="1" xadvance="3" />        <char id="91" x="22" y="19" width="2" height="7" xoffset="0" yoffset="1" xadvance="3" />        <char id="93" x="25" y="19" width="2" height="7" xoffset="0" yoffset="1" xadvance="3" />        <char id="124" x="28" y="19" width="1" height="7" xoffset="1" yoffset="1" xadvance="4" />        <char id="81" x="30" y="19" width="5" height="6" xoffset="0" yoffset="2" xadvance="6" />        <char id="163" x="36" y="19" width="5" height="6" xoffset="0" yoffset="1" xadvance="6" />        <char id="177" x="42" y="19" width="5" height="6" xoffset="0" yoffset="2" xadvance="6" />        <char id="181" x="48" y="19" width="5" height="6" xoffset="0" yoffset="3" xadvance="6" />        <char id="103" x="54" y="19" width="4" height="6" xoffset="0" yoffset="3" xadvance="5" />        <char id="112" x="59" y="19" width="4" height="6" xoffset="0" yoffset="3" xadvance="5" />        <char id="113" x="64" y="19" width="4" height="6" xoffset="0" yoffset="3" xadvance="5" />        <char id="121" x="69" y="19" width="4" height="6" xoffset="0" yoffset="3" xadvance="5" />        <char id="162" x="74" y="19" width="4" height="6" xoffset="0" yoffset="2" xadvance="5" />        <char id="228" x="79" y="19" width="4" height="6" xoffset="0" yoffset="1" xadvance="5" />        <char id="229" x="84" y="19" width="4" height="6" xoffset="0" yoffset="1" xadvance="5" />        <char id="231" x="89" y="19" width="4" height="6" xoffset="0" yoffset="3" xadvance="5" />        <char id="240" x="94" y="19" width="4" height="6" xoffset="0" yoffset="1" xadvance="5" />        <char id="246" x="99" y="19" width="4" height="6" xoffset="0" yoffset="1" xadvance="5" />        <char id="252" x="104" y="19" width="4" height="6" xoffset="0" yoffset="1" xadvance="5" />        <char id="238" x="109" y="19" width="3" height="6" xoffset="-1" yoffset="1" xadvance="2" />        <char id="59" x="113" y="19" width="2" height="6" xoffset="0" yoffset="3" xadvance="4" />        <char id="236" x="116" y="19" width="2" height="6" xoffset="-1" yoffset="1" xadvance="2" />        <char id="237" x="119" y="19" width="2" height="6" xoffset="0" yoffset="1" xadvance="2" />        <char id="198" x="1" y="27" width="9" height="5" xoffset="0" yoffset="2" xadvance="10" />        <char id="190" x="11" y="27" width="8" height="5" xoffset="0" yoffset="2" xadvance="9" />        <char id="87" x="20" y="27" width="7" height="5" xoffset="0" yoffset="2" xadvance="8" />        <char id="188" x="28" y="27" width="7" height="5" xoffset="0" yoffset="2" xadvance="8" />        <char id="189" x="36" y="27" width="7" height="5" xoffset="0" yoffset="2" xadvance="8" />        <char id="38" x="44" y="27" width="6" height="5" xoffset="0" yoffset="2" xadvance="7" />        <char id="164" x="51" y="27" width="6" height="5" xoffset="0" yoffset="2" xadvance="7" />        <char id="208" x="58" y="27" width="6" height="5" xoffset="0" yoffset="2" xadvance="7" />        <char id="8364" x="65" y="27" width="6" height="5" xoffset="0" yoffset="2" xadvance="7" />        <char id="65" x="72" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="66" x="78" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="67" x="84" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="68" x="90" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="69" x="96" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="70" x="102" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="71" x="108" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="72" x="114" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="75" x="120" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="77" x="1" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="78" x="7" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="79" x="13" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="80" x="19" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="82" x="25" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="83" x="31" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="84" x="37" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="85" x="43" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="86" x="49" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="88" x="55" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="89" x="61" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="90" x="67" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="50" x="73" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="51" x="79" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="52" x="85" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="53" x="91" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="54" x="97" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="56" x="103" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="57" x="109" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="48" x="115" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="47" x="121" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="64" x="1" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="92" x="7" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="37" x="13" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="43" x="19" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="35" x="25" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="42" x="31" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="165" x="37" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="169" x="43" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="174" x="49" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="182" x="55" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="216" x="61" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="247" x="67" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6" />        <char id="74" x="73" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5" />        <char id="76" x="78" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5" />        <char id="98" x="83" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5" />        <char id="100" x="88" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5" />        <char id="104" x="93" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5" />        <char id="107" x="98" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5" />        <char id="55" x="103" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5" />        <char id="63" x="108" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5" />        <char id="191" x="113" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5" />        <char id="222" x="118" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5" />        <char id="223" x="123" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5" />        <char id="116" x="1" y="45" width="3" height="5" xoffset="0" yoffset="2" xadvance="4" />        <char id="60" x="5" y="45" width="3" height="5" xoffset="0" yoffset="2" xadvance="4" />        <char id="62" x="9" y="45" width="3" height="5" xoffset="0" yoffset="2" xadvance="4" />        <char id="170" x="13" y="45" width="3" height="5" xoffset="0" yoffset="2" xadvance="4" />        <char id="186" x="17" y="45" width="3" height="5" xoffset="0" yoffset="2" xadvance="4" />        <char id="239" x="21" y="45" width="3" height="5" xoffset="-1" yoffset="2" xadvance="2" />        <char id="102" x="25" y="45" width="2" height="5" xoffset="0" yoffset="2" xadvance="3" />        <char id="49" x="28" y="45" width="2" height="5" xoffset="0" yoffset="2" xadvance="3" />        <char id="73" x="31" y="45" width="1" height="5" xoffset="0" yoffset="2" xadvance="2" />        <char id="105" x="33" y="45" width="1" height="5" xoffset="0" yoffset="2" xadvance="2" />        <char id="108" x="35" y="45" width="1" height="5" xoffset="0" yoffset="2" xadvance="2" />        <char id="33" x="37" y="45" width="1" height="5" xoffset="1" yoffset="2" xadvance="3" />        <char id="161" x="39" y="45" width="1" height="5" xoffset="0" yoffset="2" xadvance="3" />        <char id="166" x="41" y="45" width="1" height="5" xoffset="0" yoffset="2" xadvance="2" />        <char id="109" x="43" y="45" width="7" height="4" xoffset="0" yoffset="3" xadvance="8" />        <char id="119" x="51" y="45" width="7" height="4" xoffset="0" yoffset="3" xadvance="8" />        <char id="230" x="59" y="45" width="7" height="4" xoffset="0" yoffset="3" xadvance="8" />        <char id="97" x="67" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5" />        <char id="99" x="72" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5" />        <char id="101" x="77" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5" />        <char id="110" x="82" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5" />        <char id="111" x="87" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5" />        <char id="115" x="92" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5" />        <char id="117" x="97" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5" />        <char id="118" x="102" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5" />        <char id="120" x="107" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5" />        <char id="122" x="112" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5" />        <char id="215" x="117" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5" />        <char id="248" x="122" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5" />        <char id="114" x="1" y="51" width="3" height="4" xoffset="0" yoffset="3" xadvance="4" />        <char id="178" x="5" y="51" width="3" height="4" xoffset="0" yoffset="2" xadvance="4" />        <char id="179" x="9" y="51" width="3" height="4" xoffset="0" yoffset="2" xadvance="4" />        <char id="185" x="13" y="51" width="1" height="4" xoffset="0" yoffset="2" xadvance="2" />        <char id="61" x="15" y="51" width="5" height="3" xoffset="0" yoffset="3" xadvance="6" />        <char id="171" x="21" y="51" width="5" height="3" xoffset="0" yoffset="3" xadvance="6" />        <char id="172" x="27" y="51" width="5" height="3" xoffset="0" yoffset="4" xadvance="6" />        <char id="187" x="33" y="51" width="5" height="3" xoffset="0" yoffset="3" xadvance="6" />        <char id="176" x="39" y="51" width="3" height="3" xoffset="0" yoffset="2" xadvance="4" />        <char id="44" x="43" y="51" width="2" height="3" xoffset="0" yoffset="6" xadvance="3" />        <char id="58" x="46" y="51" width="1" height="3" xoffset="1" yoffset="3" xadvance="4" />        <char id="94" x="48" y="51" width="4" height="2" xoffset="-1" yoffset="2" xadvance="4" />        <char id="126" x="53" y="51" width="4" height="2" xoffset="0" yoffset="3" xadvance="5" />        <char id="34" x="58" y="51" width="3" height="2" xoffset="0" yoffset="2" xadvance="4" />        <char id="96" x="62" y="51" width="2" height="2" xoffset="0" yoffset="2" xadvance="3" />        <char id="180" x="65" y="51" width="2" height="2" xoffset="0" yoffset="2" xadvance="3" />        <char id="184" x="68" y="51" width="2" height="2" xoffset="0" yoffset="7" xadvance="3" />        <char id="39" x="71" y="51" width="1" height="2" xoffset="0" yoffset="2" xadvance="2" />        <char id="95" x="73" y="51" width="5" height="1" xoffset="0" yoffset="7" xadvance="6" />        <char id="45" x="79" y="51" width="4" height="1" xoffset="0" yoffset="4" xadvance="5" />        <char id="173" x="84" y="51" width="4" height="1" xoffset="0" yoffset="4" xadvance="5" />        <char id="168" x="89" y="51" width="3" height="1" xoffset="1" yoffset="2" xadvance="5" />        <char id="175" x="93" y="51" width="3" height="1" xoffset="0" yoffset="2" xadvance="4" />        <char id="46" x="97" y="51" width="1" height="1" xoffset="0" yoffset="6" xadvance="2" />        <char id="183" x="99" y="51" width="1" height="1" xoffset="0" yoffset="4" xadvance="2" />        <char id="32" x="6" y="56" width="0" height="0" xoffset="0" yoffset="127" xadvance="3" />    </chars></font>', 
        MiniBitmapFont;
    }(skylark.BitmapFont);
    skylark.MiniBitmapFont = MiniBitmapFont;
}(skylark || (skylark = {})), function(root, modules) {
    "object" == typeof exports ? module.exports = modules : "function" == typeof define && define.amd ? define(modules) : root.returnExports = modules;
}(this, skylark);
//# sourceMappingURL=build/skylark.min.js.map